{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/promise-polyfill/promise.js","src/js/app.js","src/js/calculator.js","src/js/currency/currency.js","src/js/currency/currencyManager.js","src/js/currency/currencyUpdater.js","src/js/logger.js","src/js/settings.js","src/js/signal.js","src/js/termsMgr.js","src/js/utils.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzOA;;;;;;;;;;;;;;;;;;;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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function (root) {\n\n  // Store setTimeout reference so promise-polyfill will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var setTimeoutFunc = setTimeout;\n\n  function noop() {}\n  \n  // Polyfill for Function.prototype.bind\n  function bind(fn, thisArg) {\n    return function () {\n      fn.apply(thisArg, arguments);\n    };\n  }\n\n  function Promise(fn) {\n    if (typeof this !== 'object') throw new TypeError('Promises must be constructed via new');\n    if (typeof fn !== 'function') throw new TypeError('not a function');\n    this._state = 0;\n    this._handled = false;\n    this._value = undefined;\n    this._deferreds = [];\n\n    doResolve(fn, this);\n  }\n\n  function handle(self, deferred) {\n    while (self._state === 3) {\n      self = self._value;\n    }\n    if (self._state === 0) {\n      self._deferreds.push(deferred);\n      return;\n    }\n    self._handled = true;\n    Promise._immediateFn(function () {\n      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n      if (cb === null) {\n        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n        return;\n      }\n      var ret;\n      try {\n        ret = cb(self._value);\n      } catch (e) {\n        reject(deferred.promise, e);\n        return;\n      }\n      resolve(deferred.promise, ret);\n    });\n  }\n\n  function resolve(self, newValue) {\n    try {\n      // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n      if (newValue === self) throw new TypeError('A promise cannot be resolved with itself.');\n      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n        var then = newValue.then;\n        if (newValue instanceof Promise) {\n          self._state = 3;\n          self._value = newValue;\n          finale(self);\n          return;\n        } else if (typeof then === 'function') {\n          doResolve(bind(then, newValue), self);\n          return;\n        }\n      }\n      self._state = 1;\n      self._value = newValue;\n      finale(self);\n    } catch (e) {\n      reject(self, e);\n    }\n  }\n\n  function reject(self, newValue) {\n    self._state = 2;\n    self._value = newValue;\n    finale(self);\n  }\n\n  function finale(self) {\n    if (self._state === 2 && self._deferreds.length === 0) {\n      Promise._immediateFn(function() {\n        if (!self._handled) {\n          Promise._unhandledRejectionFn(self._value);\n        }\n      });\n    }\n\n    for (var i = 0, len = self._deferreds.length; i < len; i++) {\n      handle(self, self._deferreds[i]);\n    }\n    self._deferreds = null;\n  }\n\n  function Handler(onFulfilled, onRejected, promise) {\n    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n    this.promise = promise;\n  }\n\n  /**\n   * Take a potentially misbehaving resolver function and make sure\n   * onFulfilled and onRejected are only called once.\n   *\n   * Makes no guarantees about asynchrony.\n   */\n  function doResolve(fn, self) {\n    var done = false;\n    try {\n      fn(function (value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      }, function (reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      });\n    } catch (ex) {\n      if (done) return;\n      done = true;\n      reject(self, ex);\n    }\n  }\n\n  Promise.prototype['catch'] = function (onRejected) {\n    return this.then(null, onRejected);\n  };\n\n  Promise.prototype.then = function (onFulfilled, onRejected) {\n    var prom = new (this.constructor)(noop);\n\n    handle(this, new Handler(onFulfilled, onRejected, prom));\n    return prom;\n  };\n\n  Promise.all = function (arr) {\n    var args = Array.prototype.slice.call(arr);\n\n    return new Promise(function (resolve, reject) {\n      if (args.length === 0) return resolve([]);\n      var remaining = args.length;\n\n      function res(i, val) {\n        try {\n          if (val && (typeof val === 'object' || typeof val === 'function')) {\n            var then = val.then;\n            if (typeof then === 'function') {\n              then.call(val, function (val) {\n                res(i, val);\n              }, reject);\n              return;\n            }\n          }\n          args[i] = val;\n          if (--remaining === 0) {\n            resolve(args);\n          }\n        } catch (ex) {\n          reject(ex);\n        }\n      }\n\n      for (var i = 0; i < args.length; i++) {\n        res(i, args[i]);\n      }\n    });\n  };\n\n  Promise.resolve = function (value) {\n    if (value && typeof value === 'object' && value.constructor === Promise) {\n      return value;\n    }\n\n    return new Promise(function (resolve) {\n      resolve(value);\n    });\n  };\n\n  Promise.reject = function (value) {\n    return new Promise(function (resolve, reject) {\n      reject(value);\n    });\n  };\n\n  Promise.race = function (values) {\n    return new Promise(function (resolve, reject) {\n      for (var i = 0, len = values.length; i < len; i++) {\n        values[i].then(resolve, reject);\n      }\n    });\n  };\n\n  // Use polyfill for setImmediate for performance gains\n  Promise._immediateFn = (typeof setImmediate === 'function' && function (fn) { setImmediate(fn); }) ||\n    function (fn) {\n      setTimeoutFunc(fn, 0);\n    };\n\n  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n    if (typeof console !== 'undefined' && console) {\n      console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n    }\n  };\n\n  /**\n   * Set the immediate function to execute callbacks\n   * @param fn {function} Function to execute\n   * @deprecated\n   */\n  Promise._setImmediateFn = function _setImmediateFn(fn) {\n    Promise._immediateFn = fn;\n  };\n\n  /**\n   * Change the function to execute on unhandled rejection\n   * @param {function} fn Function to execute on unhandled rejection\n   * @deprecated\n   */\n  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n    Promise._unhandledRejectionFn = fn;\n  };\n  \n  if (typeof module !== 'undefined' && module.exports) {\n    module.exports = Promise;\n  } else if (!root.Promise) {\n    root.Promise = Promise;\n  }\n\n})(this);\n","/*\r\nMIT License\r\n\r\nCopyright (c) 2017 Ivo Cass\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n*/\r\n\r\n\"use strict\"\r\n\r\nimport Promise from 'promise-polyfill'; \r\nimport app from './app';\r\nimport utils from './utils';\r\n\r\nimport logger from './logger';\r\n\r\nimport Signal from './signal';\r\nimport TermsMgr from './termsMgr';\r\nimport Calculator from './calculator';\r\nimport Settings from './settings';\r\n// import quoteGenerator from './quoteGenerator';\r\nimport Currency from './currency/currency';\r\nimport CurrencyManager from './currency/currencyManager';\r\n\r\n\r\n\r\nVue.config.devtools = false;\r\n\r\n// ie polyfill\r\nif (!window.Promise) {\r\nwindow.Promise = Promise;\r\n}\r\n\r\n// ie polyfill\r\nNumber.isInteger = Number.isInteger || function(value) {\r\n    return typeof value === \"number\" &&\r\n           isFinite(value) &&\r\n           Math.floor(value) === value;\r\n};\r\n\r\n\r\nvar App = function(){\r\n\r\n    log('App()');    \r\n    \r\n    this.config = new Config();    \r\n    this.data;\r\n\r\n    var hasInitialized = false;    \r\n    var termsMgr;\r\n    var currencyManager;\r\n    var settings;\r\n    var calc;\r\n\r\n    this.currencyUpdated = new Signal();\r\n    this.currencySelected = new Signal();\r\n    this.currencySliderToggled = new Signal();\r\n    this.currencyOffsetToggled = new Signal();\r\n    this.currencyModified = new Signal(); // dispatched after processed by Settings\r\n    this.currencyOffsetModified = new Signal(); // dispatched after processed by Settings\r\n    this.settingsChanged = new Signal();\r\n    this.saveSettingRequested = new Signal();\r\n\r\n    this.init = function(){\r\n\r\n        log('App - init()');\r\n\r\n        if(hasInitialized) return;\r\n        hasInitialized = true;\r\n\r\n        logger.setMaxEntries(this.config.loggerMaxEntries);\r\n\r\n        utils.trackingEnabled = this.config.trackingEnabled;\r\n\r\n\r\n        this.data = new Vue({\r\n        el: '#app',\r\n        data: {\r\n            termsAndConditions:\"cargando..\",\r\n            hasAcceptedTerms:false,\r\n            alternativeDesignEnabled:false,\r\n            alternateDetailsEnabled:false,\r\n            mainColor:'#10c77b',\r\n            currency:new Currency('USD'), // dummy currency for Vue, until the current one is set\r\n            currencyUSD:new Currency('USD'),\r\n            currencyEUR:new Currency('EUR'),\r\n            currencyGBP:new Currency('GBP'),            \r\n            currencyARS:new Currency('ARS'),\r\n            currencies:[], \r\n            selectOptionUSD:'USD (Dólar) - $...',\r\n            selectOptionEUR:'EUR (Euro) - $...',\r\n            selectOptionGBP:'GBP (Libra) - $...',\r\n            selectOptionARS:'ARS (Peso)',\r\n            currencyOffset:app.config.currencyOffset,\r\n            isOffsetCustom:false,\r\n            valCompra:app.config.defaultPurchase,\r\n            valCurrencyConversion:0,        \r\n            valCurrencyConversionText:'$0',        \r\n            valAfip:0,\r\n            valCorreo:app.config.gestionCorreo,\r\n            valFranchise:app.config.valFranchise,\r\n            valTotal:0,\r\n            showCompraPesos:true,\r\n            showAfip:true,\r\n            showCorreo:true,\r\n            useFranchise:true,\r\n            showInfoIcons:true,\r\n            showCheckboxes:true,\r\n            infoModalTitle:'',\r\n            valCompraMax:app.config.valCompraMax,\r\n            isCompraOutOfRange:false,\r\n            showingSettings:false,\r\n            version:app.config.version\r\n        },\r\n        methods: {\r\n            \r\n            // settings\r\n            setMainColor:function(color){settings.setMainColor(color)},                    \r\n            onCurrencyModified:function(event, id){settings.onCurrencyModified(event, id)},\r\n            toggleDesign:function(){settings.toggleDesign()},\r\n            toggleCustomCurrency:function(id){settings.toggleCustomCurrency(id)},\r\n            toggleInfoIcons:function(){settings.toggleInfoIcons()},\r\n            toggleCheckboxes:function(){settings.toggleCheckboxes()},            \r\n            toggleCurrencyOffset:function(){settings.toggleCurrencyOffset()},\r\n            onCurrencyOffsetModified:function(event){settings.onCurrencyOffsetModified(event)},\r\n\r\n            // termsMgr\r\n            onTermsCheckboxClicked:function(){termsMgr.onTermsCheckboxClicked()},\r\n            onWelcomeContinueClicked:function(){termsMgr.onWelcomeContinueClicked()},\r\n            \r\n            // app\r\n            openSettings:function(color){app.data.showingSettings = true},\r\n            closeSettings:function(color){app.data.showingSettings = false},    \r\n            showDetailsSection:function(){app.data.alternateDetailsEnabled = true},\r\n            hideDetailsSection:function(){app.data.alternateDetailsEnabled = false},\r\n            onFacebookClicked:function(){app.onFacebookClicked()},\r\n            onExtensionClicked:function(name){app.onExtensionClicked(name)},\r\n\r\n            // currencyManager\r\n            onCurrencySelected:function(e){currencyManager.onCurrencySelected(e)},\r\n            updateCurrency:function(id){currencyManager.updateCurrency(id)},\r\n\r\n            // calc\r\n            onLabelClicked:function(name){calc.onLabelClicked(name)},\r\n            showInfoModal:function(id){calc.showInfoModal(id)},\r\n        }\r\n     });\r\n\r\n        if(!this.config.loggerEnabled){\r\n            logger.disable();\r\n        }\r\n\r\n        termsMgr = new TermsMgr();\r\n        currencyManager = new CurrencyManager();\r\n        settings = new Settings();\r\n        calc = new Calculator();\r\n    };\r\n\r\n    this.onFacebookClicked = function(){\r\n\r\n        utils.track('Facebook', 'Clicked');\r\n\r\n        window.open('https://www.facebook.com/CalculoCompras','_blank');\r\n    };\r\n\r\n    this.onExtensionClicked = function(browserName){\r\n\r\n        utils.track('Extension', 'Clicked', browserName);\r\n    };\r\n    \r\n}\r\n\r\nexport default new App();\r\n\r\n// $(document).ready(app.init);\r\n\r\napp.init();","/*\r\nMIT License\r\n\r\nCopyright (c) 2017 Ivo Cass\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n*/\r\n\r\nimport app from './app';\r\nimport utils from './utils';\r\n\r\nexport default function Calculator(){\r\n    \r\n    log('Calculator()');\r\n\r\n    // todo: use better names to identify html elements\r\n    var priceCompraInput;\r\n    var currencyConversionText;\r\n    var priceAfip;\r\n    var priceCorreo;\r\n    var priceFranquicia;\r\n    var valTotalSpan;    \r\n    var data = null;\r\n    var prevInput = '';\r\n\r\n    \r\n\r\n    function init(){\r\n\r\n        log('Calculator - init()');\r\n\r\n        data = app.data;\r\n        \r\n        priceCompraInput = $('#price-compra-input').get(0);\r\n        currencyConversionText = $('#currency-conversion-text').get(0);\r\n        priceAfip = $('#price-afip').get(0);\r\n        priceCorreo = $('#price-correo').get(0);\r\n        priceFranquicia = $('#price-franquicia').get(0);\r\n        valTotalSpan = $('#val-total').get(0);\r\n        prevInput = data.valCompra;\r\n        \r\n        document.body.addEventListener('wheel', mouseWheelListener);\r\n        priceCompraInput.addEventListener('keyup', onPriceCompraInputChanged);\r\n\r\n        app.currencyUpdated.add(onCurrencyUpdated);\r\n        app.settingsChanged.add(updateTotal);\r\n                \r\n        updatePrice(priceCompraInput, data.valCompra);\r\n\r\n        processNewCompraVal();\r\n                \r\n        updateTotal();\r\n\r\n        if(app.config.runTests){\r\n            runTests();\r\n        }\r\n        \r\n        \r\n        app.currencySelected.add(processNewCompraVal);\r\n    }\r\n\r\n    init();\r\n    \r\n    this.showInfoModal = function(id){\r\n        \r\n        $('.info-modal-content').addClass('d-none');\r\n\r\n        data.infoModalTitle = $(id).data('title');\r\n        \r\n        $(id).removeClass('d-none');\r\n    }\r\n\r\n    function onCurrencyUpdated(){\r\n\r\n        log('Calculator() - onCurrencyUpdated()');\r\n\r\n        processNewCompraVal();\r\n    }\r\n\r\n    function onPriceCompraInputChanged(e){\r\n        \r\n        // firefox allows other characters in input even with type=\"number\"\r\n        // this code helps (but first needs to be tested in mac and mobile)\r\n        // var key = e.keyCode;\r\n        // const KEY_BACKSPACE = 8;\r\n        // const KEY_DEL = 46;\r\n        // const KEY_PERIOD = 190;\r\n        // const KEY_NUMPAD_PERIOD = 110;        \r\n        // const KEY_HOME = 36;\r\n        // const KEY_END = 35;\r\n\r\n        // // numbers, numpad numbers, arrows\r\n        // var allowedKeys = [48, 49, 50, 51, 52, 53, 54, 55, 56, 57, KEY_BACKSPACE, KEY_DEL, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, KEY_PERIOD, KEY_NUMPAD_PERIOD, 37, 38, 39, 40, KEY_HOME, KEY_END];\r\n\r\n        // if (allowedKeys.indexOf(key) == -1)\r\n        // {\r\n        //     priceCompraInput.value = prevInput;\r\n            \r\n        //     return;\r\n        // }\r\n\r\n        // prevInput = priceCompraInput.value;\r\n\r\n        processNewCompraVal();\r\n    }\r\n\r\n    function processNewCompraVal(){\r\n\r\n        log('Calculator() - processNewCompraVal()', priceCompraInput.value);\r\n\r\n        if(Number(priceCompraInput.value) < 0){\r\n            priceCompraInput.value = 0;\r\n        }\r\n\r\n        data.valCompra = Number(priceCompraInput.value);         \r\n\r\n        data.isCompraOutOfRange = getIsCompraOutOfRange();\r\n\r\n        updateTotal();\r\n    }\r\n\r\n    function mouseWheelListener(e){\r\n\r\n        if(data.showingSettings || !data.hasAcceptedTerms){\r\n            return;\r\n        }\r\n        \r\n        let val = Number(priceCompraInput.value);\r\n\r\n        var step = 1;\r\n\r\n        if(e.shiftKey){\r\n            step = 10;\r\n        }\r\n        else\r\n        if(e.altKey){\r\n            step = 0.1;\r\n        }\r\n\r\n        if(e.deltaY < 0){\r\n            val += step;\r\n        }\r\n        else{\r\n            val -= step;\r\n        }\r\n\r\n        if(val < 0){\r\n            val = 0;\r\n        }\r\n\r\n        val = formatPrice(val);\r\n\r\n        priceCompraInput.value = val;\r\n\r\n        processNewCompraVal();\r\n    }\r\n\r\n    this.onLabelClicked = function(name){\r\n        \r\n        log('Calculator - onLabelClicked', name);\r\n\r\n        switch(name){\r\n            \r\n            // case 'afip':\r\n            //     data.showAfip = !data.showAfip;\r\n            // break;\r\n            \r\n            // case 'correo':\r\n            //     data.showCorreo = !data.showCorreo;\r\n            // break;\r\n            \r\n            case 'franquicia':\r\n                data.useFranchise = !data.useFranchise;\r\n\r\n                $('#sliderToggleFranchise').prop('checked', data.useFranchise);\r\n\r\n                app.saveSettingRequested.dispatch({name:'useFranchise', value:data.useFranchise});\r\n            break;\r\n        }\r\n\r\n        updateTotal();\r\n    }\r\n\r\n    // todo: stop using english and spanish for f#$k's sake...\r\n    function getIsCompraOutOfRange(){\r\n\r\n        // get valCompra in USD\r\n        var valCompraUSD = data.valCompra;\r\n        \r\n        // if we are not using USD\r\n        if(data.currency != data.currencyUSD){\r\n\r\n            let valCompraARS = data.valCompra;\r\n            \r\n            // if we are not using ARS\r\n            if(data.currency != data.currencyARS){\r\n\r\n                // convert to ARS\r\n                valCompraARS = data.valCompra * data.currency.getCurrentVal();\r\n            }\r\n            \r\n            // then convert to USD\r\n            valCompraUSD = valCompraARS / data.currencyUSD.getCurrentVal();\r\n            \r\n        }\r\n\r\n        if(valCompraUSD > data.valCompraMax){\r\n\r\n            log('Calculator - getIsCompraOutOfRange()', data.valCompra, valCompraUSD, true);\r\n            return true;\r\n        }\r\n\r\n        log('Calculator - getIsCompraOutOfRange()', data.valCompra, valCompraUSD, false);\r\n\r\n        return false;\r\n    }\r\n\r\n    function updatePrice(priceLabel, value){\r\n\r\n        // console.log('Calculator - updatePrice()', priceLabel, value);\r\n\r\n        value = formatPrice(value);\r\n\r\n        if(priceLabel.tagName == 'INPUT'){\r\n            priceLabel.value = value;\r\n        }\r\n        else{\r\n            priceLabel.innerHTML = value;\r\n        }        \r\n    }\r\n\r\n    function formatPrice(val){\r\n\r\n        val = parseFloat(val).toFixed(2);\r\n\r\n        if(Number.isInteger(Number(val))){\r\n            \r\n            return parseFloat(val).toFixed(0);\r\n        }\r\n\r\n        return Number(val);\r\n    }\r\n\r\n\r\n    function updateTotal(){\r\n\r\n        var currencyModifier = data.currency.getCurrentVal();   \r\n        \r\n        var valPurchase = data.valCompra * currencyModifier;\r\n\r\n        var valAfip = valPurchase * 0.5;    \r\n        var valCorreo = app.config.gestionCorreo;\r\n        var valFranchisePesos = data.valFranchise * data.currencyUSD.getCurrentVal();\r\n        var valFranchiseDiscount = 0; // how much we subtract from valAfip if the franchise is used\r\n\r\n        // According to AFIP: \"El monto del tributo a abonar corresponde al 50% del excedente de la franquicia, \r\n        // siendo esta de U$S 25 a utilizarse en un solo envío y una vez por año calendario.\"\r\n        if(data.useFranchise){\r\n\r\n            if(valPurchase <= valFranchisePesos){\r\n                valAfip = 0;\r\n            }\r\n            else{\r\n                valAfip = (valPurchase - valFranchisePesos) * 0.5;\r\n            }\r\n        }\r\n\r\n        var valTotal = valPurchase + valAfip + valCorreo;\r\n\r\n        \r\n        if(data.currency.getId() == 'ARS'){\r\n            \r\n            // currencyConversionText will show peso to dollar\r\n\r\n            data.valCurrencyConversion = data.valCompra / data.currencyUSD.getCurrentVal();\r\n            \r\n            data.valCurrencyConversionText = 'U$S{1}';\r\n        }        \r\n        else{\r\n\r\n            // currencyConversionText will show peso from other currencies\r\n\r\n            data.valCurrencyConversion = valPurchase;\r\n            \r\n            data.valCurrencyConversionText = '${1}';\r\n        }\r\n\r\n        data.valCurrencyConversion = formatPrice(data.valCurrencyConversion);\r\n        data.valCurrencyConversionText =  data.valCurrencyConversionText.replace('{1}', data.valCurrencyConversion)\r\n        \r\n\r\n        data.valAfip = formatPrice(valAfip);\r\n        data.valCorreo = formatPrice(valCorreo);\r\n        data.valTotal = formatPrice(valTotal);\r\n\r\n        if(data.valCompra == 0){\r\n            data.valTotal = '?';\r\n        }\r\n\r\n        log('Calculator - updateTotal() -', data.currency.getCurrentVal(), valPurchase, valAfip, valCorreo, valTotal);\r\n    }\r\n\r\n    function runTests(){\r\n\r\n        console.log('<<<<<<<<<<<<<<<<< Calculator - runTests() - STARTED >>>>>>>>>>>>>>>>');\r\n\r\n        console.log('--------- TEST 1 ---------');\r\n\r\n        data.valCompra = 123.45;\r\n        priceCompraInput.value = data.valCompra;\r\n        data.currencyUSD.setCurrentVal(18.12);\r\n        data.gestionCorreo = 120;\r\n        data.valFranchise = 25;\r\n\r\n        data.showAfip = true;\r\n        data.showCorreo = true;\r\n        data.useFranchise = true;\r\n\r\n        updateTotal();\r\n\r\n        // force render\r\n        app.data.$mount();\r\n        \r\n        utils.assertEquals('currencyConversionText.innerHTML', currencyConversionText.innerHTML, \"$2236.91\");\r\n        utils.assertEquals('priceAfip.innerHTML', priceAfip.innerHTML, \"$891.96\");\r\n        utils.assertEquals('priceCorreo.innerHTML', priceCorreo.innerHTML, \"$120\");\r\n        utils.assertEquals('valTotalSpan.innerHTML', valTotalSpan.innerHTML, \"3248.87\");\r\n        \r\n\r\n        // get the total independently\r\n        var valPesos = data.valCompra * data.currencyUSD.getCurrentVal();\r\n        var valAfip = (data.valCompra - data.valFranchise) * 0.5 * data.currencyUSD.getCurrentVal();\r\n        valAfip = formatPrice(valAfip);\r\n        var valCorreo = 120;\r\n                        \r\n        var valTotal = formatPrice(valPesos + valAfip + valCorreo);\r\n\r\n        utils.assertEquals('valPesos', valPesos, 2236.914);\r\n        utils.assertEquals('valAfip', valAfip, 891.96);\r\n        utils.assertEquals('valTotal', valTotal, 3248.87);\r\n        \r\n        utils.assertEquals('data.valTotal', data.valTotal, valTotal);\r\n\r\n\r\n        console.log('--------- TEST 2 ---------');\r\n\r\n        data.valCompra = 42.42;\r\n        priceCompraInput.value = data.valCompra;\r\n        data.currency = data.currencyEUR;\r\n        data.currencyEUR.setCurrentVal(22.54);\r\n        data.gestionCorreo = 120;\r\n        data.valFranchise = 25;\r\n\r\n        data.showAfip = true;\r\n        data.showCorreo = true;\r\n        data.useFranchise = false;\r\n\r\n        updateTotal();\r\n\r\n        // force render\r\n        app.data.$mount();\r\n\r\n        utils.assertEquals('currencyConversionText.innerHTML', currencyConversionText.innerHTML, \"$956.15\");\r\n        utils.assertEquals('priceAfip.innerHTML', priceAfip.innerHTML, \"$478.07\");\r\n        utils.assertEquals('priceCorreo.innerHTML', priceCorreo.innerHTML, \"$120\");\r\n        utils.assertEquals('valTotalSpan.innerHTML', valTotalSpan.innerHTML, \"1554.22\");\r\n        \r\n\r\n        // get the total independently\r\n        valPesos = data.valCompra * data.currency.getCurrentVal();\r\n        valAfip = valPesos * 0.5;\r\n        valCorreo = 120;\r\n        \r\n\r\n        valTotal = valPesos + valAfip + valCorreo;\r\n\r\n        utils.assertEquals('valPesos', valPesos, 956.1468);\r\n        utils.assertEquals('valAfip', valAfip, 478.0734);\r\n        utils.assertEquals('valTotal', valTotal, 1554.2202);\r\n        \r\n        utils.assertEquals('data.valAfip', data.valAfip, formatPrice(valAfip));\r\n        utils.assertEquals('data.valTotal', data.valTotal, formatPrice(valTotal));\r\n\r\n\r\n        console.log('<<<<<<<<<<<<<<<<< Calculator - runTests() - ENDED >>>>>>>>>>>>>>>>');\r\n    }\r\n\r\n}\r\n\r\n","import utils from '../utils';\r\nimport app from '../app';\r\nimport CurrencyUpdater from './currencyUpdater';\r\n\r\nvar Currency = function(id){\r\n\r\n    log('Currency() - id:', id);\r\n\r\n    var self = this;\r\n    var _index = -1;\r\n    var id = id;\r\n    var name = '-1';\r\n    var currentVal = 0;\r\n    var fallbackVal = -1;\r\n    var updatedVal = -1;\r\n    var customVal = -1;\r\n    var lastFallbackValDate = -1;    \r\n    var lastUpdateDate = -1;    \r\n    var lastCustomValDate = -1;\r\n    var _usesCustomVal = false;\r\n    var queryUrl = '';\r\n    var isSelected = false;\r\n    var currencyUpdater;\r\n\r\n    this.getName = function(){\r\n        return name;\r\n    };\r\n\r\n    this.getId = function(){\r\n        return id;\r\n    };\r\n    \r\n    this.getCurrentVal = function(){\r\n\r\n        log('Currency - getCurrentVal()', id, currentVal);\r\n\r\n        return currentVal;\r\n    }\r\n\r\n    this.setCurrentVal = function(val){\r\n\r\n        log('Currency - setCurrentVal()', id, val);\r\n\r\n        val = applyOffset(val);\r\n\r\n        currentVal = val;\r\n\r\n        updateSelectOption();\r\n    }\r\n\r\n    function applyOffset(val){\r\n\r\n        if(id == 'ARS'){\r\n            return val;\r\n        }\r\n\r\n        var offset = app.data.currencyOffset;\r\n\r\n        if(!_usesCustomVal && offset != 0){\r\n            \r\n            if(updatedVal == -1){\r\n                val = fallbackVal;\r\n            }\r\n            else{\r\n                val = updatedVal;\r\n            }\r\n\r\n            if(offset >= -50 && offset <= 50){\r\n\r\n                // offset is a percentage, so it should be divided by 100 and added to 1\r\n                // e.g.: 17.4 * (1 + 2 / 100)   ===> 17.4 * 1.02\r\n                val *= 1 + offset / 100;\r\n\r\n                val = utils.formatCurrency(val);\r\n\r\n                log('Currency - setCurrentVal() applied offset. id:', id, 'val:', val, 'offset:', offset);\r\n            }\r\n        }\r\n\r\n        return val;\r\n    }\r\n    \r\n    this.refresh = function(){\r\n\r\n        log('Currency - refresh()', id);\r\n\r\n        var val = -1;\r\n\r\n        if(_usesCustomVal){\r\n            val = customVal;\r\n        }\r\n        else{\r\n\r\n            if(updatedVal == -1){\r\n                val = fallbackVal;\r\n            }\r\n            else{\r\n                val = updatedVal;\r\n            }\r\n        }\r\n\r\n        this.setCurrentVal(val);\r\n    };   \r\n\r\n    this.setAutoMode = function (usesCustomVal){\r\n\r\n        log('Currency - setAutoMode()', id, usesCustomVal);\r\n\r\n        _usesCustomVal = usesCustomVal;\r\n\r\n        if(_usesCustomVal){\r\n\r\n            if(customVal == -1){\r\n                customVal = self.getCurrentVal();\r\n            }\r\n\r\n            lastCustomValDate = Date.now();\r\n\r\n            self.setCurrentVal(customVal);            \r\n        }\r\n        else{\r\n\r\n            if(updatedVal > -1){\r\n\r\n                self.setCurrentVal(updatedVal);\r\n            }\r\n            else{\r\n                log('Currency - setAutoMode() - using fallbackVal', id, usesCustomVal, fallbackVal);\r\n                self.setCurrentVal(fallbackVal);\r\n            }\r\n        }\r\n\r\n        self.save();\r\n    };\r\n\r\n    this.setCustomVal = function(val){\r\n\r\n        customVal = val;\r\n\r\n        self.setCurrentVal(customVal);\r\n\r\n        self.save();\r\n    };\r\n\r\n    this.setSelectedState = function(val){\r\n        isSelected = val;\r\n\r\n        if(isSelected){\r\n\r\n            if(id != 'ARS'){\r\n                currencyUpdater.wakeUp();\r\n            }            \r\n        }\r\n        else{\r\n            currencyUpdater.sleep();\r\n        }\r\n    };\r\n\r\n\r\n    this.getLastUpdateDate = function(){\r\n        return lastUpdateDate;\r\n    };\r\n\r\n    this.getLastUpdateDateReadable = function(){\r\n\r\n        if(lastUpdateDate == -1){\r\n            return '-1';\r\n        }\r\n\r\n        return new Date(lastUpdateDate).toLocaleString('es-AR');\r\n    };\r\n    \r\n    this.getHasCustomVal = function(){\r\n        return _usesCustomVal;\r\n    };\r\n\r\n    this.getIndex = function(){\r\n        return _index;\r\n    }\r\n\r\n    this.load = function(index){\r\n\r\n        _index = index;\r\n\r\n        // load from config.js\r\n        var data = app.config.currencies[_index];\r\n\r\n        log('Currency - load() data.id', data.id);\r\n\r\n        \r\n        if(id != data.id){\r\n\r\n            var errorMsg = 'Currency - load() - expected id: \"' + id + '\" doesnt match data.id: \"' + data.id + '\"';\r\n            log(errorMsg);\r\n            throw new Error(errorMsg);\r\n        }\r\n\r\n        name = data.name;\r\n        fallbackVal = data.val;\r\n        lastUpdateDate = data.lastUpdate;\r\n        lastFallbackValDate = data.lastUpdate;\r\n        queryUrl = app.config.currencyQueryUrl.replace('{1}', id);\r\n\r\n        currencyUpdater = new CurrencyUpdater(id, queryUrl, onUpdateReady);\r\n\r\n        self.setCurrentVal(fallbackVal);\r\n\r\n        \r\n\r\n        // load from localStorage\r\n        var savedData = utils.getSavedItem(id);\r\n        \r\n        if(!savedData || savedData.id != id){\r\n            log('Currency - load() - no saved data', savedData, id);\r\n            return;\r\n        }\r\n\r\n        updatedVal = savedData.updatedVal;\r\n        customVal = savedData.customVal;\r\n        lastUpdateDate = savedData.lastUpdateDate;\r\n        lastCustomValDate = savedData.lastCustomValDate;\r\n        _usesCustomVal = savedData.usesCustomVal;\r\n\r\n        log('Currency - load() - loading:', updatedVal, customVal, lastUpdateDate, lastCustomValDate, _usesCustomVal);\r\n        \r\n        if(_usesCustomVal == false){\r\n\r\n            if(updatedVal > -1 &&\r\n                lastUpdateDate > -1 &&\r\n                lastUpdateDate > lastFallbackValDate){\r\n        \r\n                log('Currency - load() - loaded successfully. setting updatedVal:', updatedVal);\r\n                self.setCurrentVal(updatedVal);\r\n            }\r\n            else{\r\n                log('Currency - load() - FAILED to load:', id, updatedVal);\r\n            }\r\n        }\r\n        else{\r\n\r\n            if(customVal > -1){\r\n                self.setCurrentVal(customVal);\r\n            }\r\n            else{\r\n                // we keep using the fallbackVal that we just set\r\n                _usesCustomVal = false;\r\n\r\n                self.save();\r\n            }            \r\n        };        \r\n        \r\n    };\r\n\r\n\r\n    this.save = function(){\r\n\r\n        log('Currency - save()', id);\r\n\r\n        localStorage.setItem(id, getSaveData());\r\n    };\r\n\r\n    function getSaveData(){\r\n\r\n        var data = \r\n            {id:id, \r\n            updatedVal:updatedVal, \r\n            customVal:customVal, \r\n            lastUpdateDate:lastUpdateDate, \r\n            lastCustomValDate:lastCustomValDate, \r\n            usesCustomVal:_usesCustomVal};\r\n\r\n        return JSON.stringify(data);\r\n    }\r\n\r\n    this.update = function(){\r\n\r\n        log('Currency - update()', id);\r\n\r\n        currencyUpdater.update();\r\n    };\r\n\r\n    function updateSelectOption(){\r\n\r\n        log('Currency - updateSelectOption() - ' + id);\r\n\r\n        switch(id){\r\n\r\n            case 'USD':\r\n                app.data.selectOptionUSD = 'USD (Dólar) - $' + String(self.getCurrentVal()) + (self.getHasCustomVal() ? '*' : '');\r\n                break;\r\n            case 'EUR':\r\n                app.data.selectOptionEUR = 'EUR (Euro) - $' + String(self.getCurrentVal()) + (self.getHasCustomVal() ? '*' : '');\r\n                break;\r\n            case 'GBP':\r\n                app.data.selectOptionGBP = 'GBP (Libra) - $' + String(self.getCurrentVal()) + (self.getHasCustomVal() ? '*' : '');\r\n                break;\r\n        }\r\n    }\r\n\r\n    function onUpdateReady(update){\r\n\r\n        log('Currency - onUpdateReady()', update.id, update.value, update.date);\r\n        \r\n\r\n        if(update.id != id){\r\n\r\n            log('Currency - onUpdateReady() - ids dont match:', update.id, id);\r\n            return;\r\n        }\r\n\r\n        if(update.date > lastUpdateDate){\r\n            \r\n            lastUpdateDate = update.date;\r\n            updatedVal = update.value;\r\n    \r\n            log('Currency - onUpdateReady() - success', id);\r\n    \r\n            if(!_usesCustomVal){\r\n                self.setCurrentVal(updatedVal);\r\n            }\r\n    \r\n            self.save();\r\n\r\n            app.currencyUpdated.dispatch(self);\r\n        }\r\n        else{\r\n            log('Currency - onUpdateReady() - update.date is older than:', getLastUpdateDate());\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport default Currency;","import app from '../app';\r\n\r\nimport utils from '../utils';\r\n\r\n\r\nvar CurrencyManager = function(){\r\n\r\n    log('CurrencyManager()');\r\n\r\n    \r\n\r\n    function init(){\r\n\r\n        log('CurrencyManager - init()');\r\n\r\n        // don't include ARS (as it shouldn't be in Configuración)\r\n        app.data.currencies.push(app.data.currencyUSD, app.data.currencyEUR, app.data.currencyGBP); \r\n\r\n        app.data.currencyUSD.load(0);\r\n        app.data.currencyEUR.load(1);\r\n        app.data.currencyGBP.load(2);\r\n        app.data.currencyARS.load(3);\r\n\r\n        \r\n\r\n        var selectedCurrencyId = utils.getSavedItem('selectedCurrencyId');\r\n\r\n        if(selectedCurrencyId == null || selectedCurrencyId == undefined || selectedCurrencyId == ''){\r\n            \r\n            selectedCurrencyId = app.config.defaultCurrencyId;\r\n\r\n            utils.track('Settings', 'loaded', 'selectedCurrencyId', selectedCurrencyId);\r\n        }\r\n\r\n        app.data.currency = getCurrencyById(selectedCurrencyId);\r\n\r\n        $('#currency-select').prop('selectedIndex', app.data.currency.getIndex());\r\n\r\n        app.data.currency.setSelectedState(true);\r\n\r\n        log('CurrencyManager - init() - app.data.currency.getId():', app.data.currency.getId());\r\n\r\n\r\n        app.currencySliderToggled.add(onCurrencySliderToggled);\r\n        app.currencyModified.add(onCurrencyModified);\r\n        app.currencyOffsetToggled.add(onCurrencyOffsetToggled);\r\n        app.currencyOffsetModified.add(onCurrencyOffsetModified);\r\n    }\r\n\r\n    function onCurrencyOffsetToggled(){\r\n\r\n        app.data.currencies.forEach(function(currency){\r\n            currency.refresh();\r\n        });\r\n    }\r\n\r\n    function onCurrencyOffsetModified(val){\r\n        onCurrencyOffsetToggled();\r\n    }\r\n\r\n    this.updateCurrency = function (id){\r\n\r\n        var currency = getCurrencyById(id);\r\n\r\n        if(currency){\r\n            currency.update();\r\n        }\r\n    };\r\n\r\n    function onCurrencySliderToggled(data){\r\n\r\n        var currency = getCurrencyById(data.id);\r\n        \r\n        if(currency){\r\n            currency.setAutoMode(data.value);\r\n        }\r\n    }    \r\n\r\n    function onCurrencyModified(data){\r\n\r\n        var currency = getCurrencyById(data.id);\r\n\r\n        if(currency){\r\n            currency.setCustomVal(data.value);\r\n        }\r\n    }\r\n\r\n\r\n    function getCurrencyById(id){\r\n\r\n        log('CurrencyManager - getCurrencyById()', id);\r\n\r\n        switch(id){\r\n            \r\n            case 'USD':\r\n                return app.data.currencyUSD;\r\n            \r\n            case 'EUR':\r\n                return app.data.currencyEUR;\r\n            \r\n            case 'GBP':\r\n                return app.data.currencyGBP;\r\n            \r\n            case 'ARS':\r\n                return app.data.currencyARS;\r\n        }\r\n\r\n        throw new Error('CurrencyManager - getCurrencyById() - unrecognized currency id:' + id);\r\n\r\n        return null;\r\n    }\r\n\r\n\r\n    this.onCurrencySelected =  function(e){\r\n\r\n        \r\n        \r\n        if(e == null || e.target.selectedIndex == undefined){\r\n            throw new Error('CurrencyManager - onCurrencySelected()');\r\n        }\r\n\r\n        var id = app.config.currencies[e.target.selectedIndex].id;\r\n        \r\n        log('CurrencyManager - onCurrencySelected()', id);\r\n\r\n        var selectedCurrency = getCurrencyById(id);\r\n        \r\n        if(!selectedCurrency || selectedCurrency == app.data.currency){\r\n            return;\r\n        }\r\n\r\n        app.data.currency.setSelectedState(false);\r\n\r\n        app.data.currency = selectedCurrency;\r\n\r\n        app.data.currency.setSelectedState(true);\r\n\r\n        app.currencySelected.dispatch();\r\n\r\n        app.saveSettingRequested.dispatch({name:'selectedCurrencyId', value:id});\r\n    }\r\n\r\n    this.onCurrencyModified = function(event, id){\r\n\r\n\r\n    };\r\n\r\n    init();\r\n}\r\n\r\nexport default CurrencyManager;","/*\r\nMIT License\r\n\r\nCopyright (c) 2017 Ivo Cass\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n*/\r\n\r\nimport app from '../app';\r\nimport utils from '../utils';\r\n\r\nvar CurrencyUpdater = function(id, queryUrl, onUpdateSuccessful, onUpdateError){\r\n    \r\n    log('CurrencyUpdater() - id:', id, 'queryUrl:', queryUrl);\r\n\r\n    var req = new XMLHttpRequest();\r\n    var timerId = '';\r\n    var sleeping = true;\r\n\r\n    this.wakeUp = function(){\r\n        \r\n        log('CurrencyUpdater() - wakeUp()', id, app.config.updateCurrency);\r\n\r\n        if(!app.config.updateCurrency){\r\n            return;\r\n        }\r\n\r\n        sendRequest();\r\n\r\n        clearInterval(timerId);\r\n        timerId = setInterval(sendRequest, app.config.currencyUpdateInterval);\r\n        sleeping = false;\r\n    }\r\n\r\n    this.sleep = function(){\r\n        clearInterval(timerId);\r\n\r\n        timerId = '';\r\n        sleeping = true;\r\n    };\r\n\r\n    this.update = function(){\r\n        sendRequest();\r\n    };\r\n\r\n    function sendRequest(){\r\n\r\n        log('CurrencyUpdater() - sendRequest() - queryUrl:', queryUrl);\r\n\r\n        req.open('GET', queryUrl, true);\r\n        req.send();\r\n    }\r\n\r\n    req.onreadystatechange = function(){\r\n        \r\n        log('CurrencyUpdater() - req.onreadystatechange()', id, 'req.readyState:', req.readyState);\r\n\r\n        if (req.readyState === XMLHttpRequest.DONE) {\r\n\r\n            log('CurrencyUpdater() - req.onreadystatechange() - req.status:', req.status)\r\n\r\n            if (req.status === 200) {\r\n\r\n                try {\r\n                    var xmlDoc = utils.stringToXML(req.responseText);                    \r\n                    var rate = xmlDoc.documentElement.getElementsByTagName('Rate')[0].childNodes[0].nodeValue;\r\n\r\n                    if(!isNaN(rate) && rate > 0){\r\n\r\n                        rate = parseFloat(rate).toFixed(2);\r\n\r\n                        onUpdateSuccessful({id:id, value:rate, date:Date.now()});\r\n                    }                    \r\n                }\r\n                catch(err) {\r\n\r\n                    log('CurrencyUpdater() - req.onreadystatechange() - error caught! - reason', err.name)\r\n\r\n                    if(onUpdateError){\r\n\r\n                        onUpdateError(\"error getting rate\");\r\n                    }\r\n                    else{\r\n                        console.log('CurrencyUpdater - error getting rate', err);\r\n                    }\r\n                }\r\n                \r\n            } else {\r\n                if(onUpdateError){\r\n\r\n                    onUpdateError(\"error getting currency\");\r\n                }\r\n                else{\r\n                    console.log('CurrencyUpdater - error getting currency');\r\n                }\r\n            }\r\n        }\r\n    };\r\n}\r\n\r\nexport default CurrencyUpdater;\r\n\r\n/*\r\n\r\nsample responseText\r\n\r\n<query xmlns:yahoo=\"http://www.yahooapis.com/v1/base.rng\" yahoo:count=\"1\" yahoo:created=\"2017-08-11T18:07:52Z\" yahoo:lang=\"en-US\">\r\n    <diagnostics>\r\n        <url execution-start-time=\"1\" execution-stop-time=\"2\" execution-time=\"1\"><![CDATA[http://www.datatables.org/yahoo/finance/yahoo.finance.xchange.xml]]></url>\r\n        <publiclyCallable>true</publiclyCallable>\r\n        <cache execution-start-time=\"4\" execution-stop-time=\"4\" execution-time=\"0\" method=\"GET\" type=\"MEMCACHED\"><![CDATA[e1b28fd8ab8a7bf21a52162f420f1447]]></cache>\r\n        <url execution-start-time=\"4\" execution-stop-time=\"5\" execution-time=\"1\"><![CDATA[http://download.finance.yahoo.com/d/quotes.csv?s=USDARS=X&amp;f=snl1d1t1ab]]></url>\r\n        <query execution-start-time=\"4\" execution-stop-time=\"5\" execution-time=\"1\"><![CDATA[select * from csv where url='http://download.finance.yahoo.com/d/quotes.csv?s=USDARS=X&amp;f=snl1d1t1ab' and columns='Symbol,Name,Rate,Date,Time,Ask,Bid']]></query>\r\n        <javascript execution-start-time=\"2\" execution-stop-time=\"5\" execution-time=\"2\" instructions-used=\"18668\" table-name=\"yahoo.finance.xchange\" />\r\n        <user-time>6</user-time>\r\n        <service-time>2</service-time>\r\n        <build-version>2.0.164</build-version>\r\n    </diagnostics>\r\n    <results>\r\n        <rate id=\"USDARS\">\r\n            <Name>USD/ARS</Name>\r\n            <Rate>17.7150</Rate>\r\n            <Date>8/11/2017</Date>\r\n            <Time>5:50pm</Time>\r\n            <Ask>17.7200</Ask>\r\n            <Bid>17.7150</Bid>\r\n        </rate>\r\n    </results>\r\n</query>\r\n*/"," /*\r\nMIT License\r\n\r\nCopyright (c) 2017 Ivo Cass\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n*/\r\n\r\n/*\r\n\r\nabout: lightweight logger\r\nauthor: ivocass\r\n\r\nversion: 0.11\r\nlast updated: 20170908\r\n\r\n-description:\r\nstores lines in an array, then dumps to console upon request.\r\nwhen 'maxEntries' is reached, it starts storing from index 0 again.\r\n\r\n-usage:\r\nlog('some message');\r\nlog(isValid, array.length, moreParams);\r\nthen in the console: logger.show()\r\n\r\n */\r\n\r\nvar Logger = function(){\r\n\r\n    var self = this;\r\n    var enabled = true;\r\n    var maxEntries = 2000;\r\n\r\n    \r\n    var logHistory = [];\r\n    var logHistoryIndex = 0;\r\n    var entryId = 0;\r\n    \r\n\r\n    function init(){\r\n\r\n        window.logger = self;\r\n\r\n        window.log = logEntry;\r\n    }\r\n\r\n    function logEntry(){\r\n\r\n        var args = Array.prototype.slice.call(arguments).toString();\r\n\r\n        logHistory[logHistoryIndex] = String(entryId) + ') ' + args;\r\n\r\n        logHistoryIndex++;\r\n        entryId++;\r\n\r\n        if(logHistoryIndex == maxEntries){\r\n            logHistoryIndex = 0;\r\n        }\r\n    }\r\n\r\n    this.setMaxEntries = function(value){\r\n        maxEntries = value;\r\n    };\r\n\r\n    this.disable = function(){\r\n        enabled = false;\r\n    };\r\n\r\n\r\n    this.show = function(){\r\n\r\n        console.log('---------------- LOG BEGINS ----------------');\r\n\r\n        // TODO: if logHistory.length > logHistoryIndex, start from logHistoryIndex + 1, then go from 0 to logHistoryIndex\r\n        for(var i = 0; i < logHistory.length; i++){\r\n\r\n            console.log(logHistory[i]);\r\n        }\r\n\r\n        console.log('---------------- LOG ENDS ------------------');\r\n    };\r\n\r\n\r\n    init();\r\n}\r\n\r\nexport default new Logger();\r\n\r\n","/*\r\nMIT License\r\n\r\nCopyright (c) 2017 Ivo Cass\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n*/\r\n\r\nimport app from './app';\r\nimport utils from './utils';\r\n\r\nexport default function Settings(){\r\n\r\n    var self = this;\r\n    var dolarInputCustom;\r\n    \r\n    \r\n    function init(){\r\n\r\n        \r\n        var showInfoIcons = utils.getSavedItem('showInfoIcons');\r\n        var showCheckboxes = utils.getSavedItem('showCheckboxes');\r\n        var useFranchise = utils.getSavedItem('useFranchise');\r\n        var isOffsetCustom = utils.getSavedItem('isOffsetCustom');\r\n        var alternativeDesignEnabled = utils.getSavedItem('alternativeDesignEnabled');\r\n\r\n        \r\n\r\n        dolarInputCustom = $('#dolar-input-custom').get(0);\r\n        \r\n        app.valCompra = app.config.defaultPurchase;\r\n        \r\n        // it may be null, true, false\r\n        if(alternativeDesignEnabled === null) alternativeDesignEnabled = app.data.alternativeDesignEnabled; // set to default\r\n        app.data.alternativeDesignEnabled = alternativeDesignEnabled;\r\n        $('#sliderToggleDesign').prop('checked', app.data.alternativeDesignEnabled);\r\n\r\n        utils.track('Settings', 'loaded', 'alternativeDesignEnabled', app.data.alternativeDesignEnabled);\r\n\r\n        loadMainColor();\r\n\r\n        // it may be null, true, false\r\n        if(showInfoIcons === null) showInfoIcons = app.data.showInfoIcons; // set to default\r\n        app.data.showInfoIcons = showInfoIcons;\r\n        $('#sliderToggleInfo').prop('checked', app.data.showInfoIcons);\r\n\r\n        // it may be null, true, false\r\n        if(showCheckboxes === null) showCheckboxes = app.data.showCheckboxes; // set to default\r\n        app.data.showCheckboxes = showCheckboxes;\r\n        $('#sliderToggleCheckboxes').prop('checked', app.data.showCheckboxes);\r\n\r\n        // it may be null, true, false\r\n        if(isOffsetCustom === null) isOffsetCustom = app.data.isOffsetCustom; // set to default\r\n        app.data.isOffsetCustom = isOffsetCustom;\r\n        $('#sliderToggleOffset').prop('checked', !isOffsetCustom);\r\n\r\n        // it may be null, true, false\r\n        if(useFranchise === null) useFranchise = app.data.useFranchise; // set to default\r\n        app.data.useFranchise = useFranchise;\r\n        $('#sliderToggleFranchise').prop('checked', useFranchise);\r\n\r\n        // restore custom offset if any and if valid\r\n        if(isOffsetCustom){\r\n            var currencyOffsetCustom = utils.getSavedItem('currencyOffsetCustom');\r\n\r\n            if(currencyOffsetCustom != null && currencyOffsetCustom != 0 && currencyOffsetCustom >= -50 && currencyOffsetCustom <= 50){\r\n                app.data.currencyOffset = currencyOffsetCustom;\r\n                $('#currencyOffsetInput').val(currencyOffsetCustom);\r\n            }\r\n        }\r\n        \r\n\r\n        app.saveSettingRequested.add(onSaveSettingRequested);\r\n\r\n    }\r\n\r\n    this.toggleDesign = function (){\r\n\r\n        app.data.alternativeDesignEnabled = $('#sliderToggleDesign').prop('checked');\r\n\r\n        this.setMainColor(app.data.mainColor);\r\n\r\n        localStorage.setItem('alternativeDesignEnabled',  app.data.alternativeDesignEnabled);\r\n    };\r\n\r\n    // todo: is 'important' necessary?\r\n    this.setMainColor = function(color){\r\n\r\n        log('Settings - setMainColor() color:', color)\r\n\r\n        $(document.body).css('background-color', color, 'important');\r\n        $('#app').css('background-color', color, 'important');\r\n        $('#settings .settings-header').css('background-color', color, 'important');\r\n        $('#infoModal .modal-header').css('background-color', color, 'important');\r\n        \r\n        // dont change when on the welcome screen\r\n        if(app.data.hasAcceptedTerms){\r\n            $('#termsModal .modal-header').css('background-color', color, 'important');\r\n            $('#terms-ok-btn').css('background-color', color, 'important');\r\n        }\r\n        \r\n        // $('#contact-link').css('color', color, 'important');        \r\n        $('.checkbox-check').css('color', color, 'important');\r\n        // $('#price-compra-input').css('color', color, 'important');\r\n        // $('#compra-stuff .form-control').css('color', color, 'important');\r\n        // $('.arrow .fa-caret-down').css('color', color, 'important');\r\n        $('#settings .panel-left').css('background-color', color, 'important');\r\n\r\n\r\n        if(app.data.alternativeDesignEnabled){\r\n            $('#section-purchase').css('background-color', color);\r\n            $('#section-expenses').css('background-color', color);\r\n            $('#section-total').css('background-color', 'white');\r\n            $('#section-total').css('color', color);\r\n\r\n            $('#app-links button').css('color', color);\r\n        }\r\n        else{\r\n            $('#section-purchase').css('background-color', utils.changeColorLuminance(color, -app.config.colorLuminanceChange));\r\n            $('#section-expenses').css('background-color', color);\r\n            $('#section-total').css('background-color', utils.changeColorLuminance(color, app.config.colorLuminanceChange));\r\n\r\n            $('#section-total').css('color', 'white');\r\n            $('#app-links button').css('color', 'white');           \r\n        }\r\n\r\n\r\n        localStorage.setItem('mainColor', color);\r\n\r\n        app.data.mainColor = color;\r\n    };\r\n\r\n\r\n    this.onCurrencyModified = function(event, id){\r\n        \r\n        var val = event.target.value;\r\n\r\n        if(isNaN(val)){\r\n            $(event.target).addClass('input-error');\r\n            return;\r\n        }\r\n\r\n        val = Number(val);\r\n\r\n        if(val <= 0){\r\n            $(event.target).addClass('input-error');\r\n        }\r\n        else{\r\n            $(event.target).removeClass('input-error');\r\n\r\n            app.currencyModified.dispatch({id:id, value:val});\r\n            \r\n            app.settingsChanged.dispatch();\r\n        }\r\n    };\r\n\r\n    this.onCurrencyOffsetModified = function(event){\r\n\r\n        var val = event.target.value;\r\n\r\n        if(isNaN(val)){\r\n            $(event.target).addClass('input-error');\r\n            return;\r\n        }        \r\n        \r\n        val = Number(val);\r\n\r\n        if(val < -50 || val > 50){\r\n            $(event.target).addClass('input-error');\r\n        }\r\n        else{\r\n            $(event.target).removeClass('input-error');\r\n\r\n            app.data.currencyOffset = val;\r\n\r\n            app.currencyOffsetModified.dispatch(val);\r\n            \r\n            app.settingsChanged.dispatch();\r\n\r\n            localStorage.setItem('currencyOffsetCustom', val);\r\n        }\r\n    }\r\n\r\n    this.toggleCurrencyOffset = function (){\r\n\r\n        app.data.isOffsetCustom = !$('#sliderToggleOffset').prop('checked');\r\n        \r\n        if(app.data.isOffsetCustom){\r\n\r\n            app.data.currencyOffset = 0;\r\n            $('#currencyOffsetInput').val(app.data.currencyOffset);\r\n        }\r\n        else{\r\n            app.data.currencyOffset = app.config.currencyOffset;            \r\n        }\r\n\r\n        app.currencyOffsetToggled.dispatch();\r\n\r\n        localStorage.setItem('isOffsetCustom', app.data.isOffsetCustom)\r\n\r\n        app.settingsChanged.dispatch();\r\n    };\r\n\r\n    this.toggleCustomCurrency = function(id){\r\n        \r\n        var signalData = {id:id, value:false};\r\n\r\n        // if 'checked' is true, 'value' is false (it affects 'usesCustomValue')\r\n        if(!$('#sliderToggle' + id).prop('checked')){\r\n        \r\n            signalData.value = true;\r\n        }\r\n\r\n        app.currencySliderToggled.dispatch(signalData);\r\n\r\n        app.settingsChanged.dispatch();\r\n    };\r\n\r\n    this.toggleInfoIcons = function(){\r\n\r\n        app.data.showInfoIcons = $('#sliderToggleInfo').prop('checked');\r\n         \r\n        \r\n        localStorage.setItem('showInfoIcons', app.data.showInfoIcons);\r\n    };\r\n\r\n    this.toggleCheckboxes = function(){\r\n\r\n        app.data.showCheckboxes = $('#sliderToggleCheckboxes').prop('checked');         \r\n        \r\n        localStorage.setItem('showCheckboxes', app.data.showCheckboxes);\r\n    };\r\n    \r\n\r\n\r\n    function loadMainColor(){\r\n        \r\n        var mainColor = utils.getSavedItem('mainColor');\r\n\r\n        if(mainColor !== null){\r\n            \r\n            self.setMainColor(mainColor);\r\n\r\n            utils.track('Settings', 'loaded', 'mainColor', mainColor);              \r\n        }\r\n        else{\r\n            self.setMainColor(app.config.mainColor);\r\n        }\r\n    }\r\n\r\n    function onSaveSettingRequested(setting){\r\n        localStorage.setItem(setting.name, setting.value);\r\n    }\r\n\r\n    init();\r\n}","/*\r\nMIT License\r\n\r\nCopyright (c) 2017 Ivo Cass\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n*/\r\n\r\n//_____________________________\r\n\r\n/**\r\n* author: ivocass\r\n* date created: 2011\r\n* date modified: 20170810\r\n* description: lightweight and awesome signal. ported from AS3.\r\n* version: 0.13\r\n* \r\n*/\r\nexport default function Signal(){\r\n\t\r\n\tvar listeners = [];\r\n\tvar amount = 0;\r\n\t\r\n\tvar stepping = false;\r\n\t\r\n\tvar hasColdListeners = false;\r\n\t\r\n\tthis.destroy = function(){\r\n\r\n\t\tfor (var i = 0; i < listeners.length; i++) \r\n\t\t{\r\n\t\t\tlisteners[i].callbackFunction = null;\r\n\t\t}\r\n\t\t\r\n\t\tlisteners = null;\r\n\t\tamount = 0;\r\n\t}\r\n\t\r\n\tthis.reset = function(){\r\n\r\n\t\tthis.destroy();\r\n\t\t\r\n\t\tlisteners = [];\r\n\t\t\r\n\t\tstepping = false;\r\n\t\thasColdListeners = false;\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\tthis.add = function(callback, removeOnFirstCallback = false)\r\n\t{\r\n\t\tif (getListenerIndex(callback) > -1)\r\n\t\t{\r\n\t\t\tthrow new Error(\"Attempt to add a callback twice.\");\r\n\t\t}\r\n\t\t\r\n\t\tvar listener = new SignalListener(callback);\r\n\t\tlistener.removeOnFirstCallback = removeOnFirstCallback;\r\n\t\t\r\n\t\tlisteners.push(listener);\r\n\t\tamount++;\r\n\t}\r\n\t\r\n\t\r\n\tthis.rem = function(callback, safeRemove = false){\r\n\r\n\t\tvar index = getListenerIndex(callback);\r\n\t\t\r\n\t\tif (index == -1)\r\n\t\t{\r\n\t\t\tif (safeRemove)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthrow new Error(\"Attempt to remove an unregistered callback.\");\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (stepping)\r\n\t\t{\r\n\t\t\tlisteners[index].isCold = true;\r\n\t\t\tlisteners[index].callbackFunction = null;\r\n\t\t\t\r\n\t\t\thasColdListeners = true;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tlisteners.splice(index, 1);\r\n\t\t\tamount--;\r\n\t\t}\r\n\t}\r\n\t\r\n\tvar getListenerIndex =  function(callback){\r\n\r\n\t\tfor (var i = 0; i < amount; i++) \r\n\t\t{\r\n\t\t\tif (listeners[i].callbackFunction == callback)\r\n\t\t\t{\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn -1;\r\n\t}\r\n\t\r\n\tthis.dispatch = function(param = null){\r\n\t\t\r\n\t\tif (stepping)\r\n\t\t{\r\n\t\t\tthrow new Error(\"Attempt to dispatch a signal while stepping.\");\r\n\t\t}\r\n\t\t\r\n\t\tstepping = true;\r\n\t\t\r\n\t\tfor (var i = 0; i < amount; i++) \r\n\t\t{\r\n\t\t\tvar listener = listeners[i];\r\n\t\t\t\r\n\t\t\tif (listener.isCold) continue;\r\n\t\t\t\r\n\t\t\tif (listener.paramsRequired == 0)\r\n\t\t\t{\r\n\t\t\t\tlistener.callbackFunction();\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\tif (listener.paramsRequired == 1)\r\n\t\t\t{\r\n\t\t\t\tlistener.callbackFunction(param);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\tif (listener.paramsRequired == 2)\r\n\t\t\t{\r\n\t\t\t\tlistener.callbackFunction(this, param);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tif (listener.removeOnFirstCallback)\r\n\t\t\t{\r\n\t\t\t\tlistener.callbackFunction = null;\r\n\t\t\t\tlistener.isCold = true;\r\n\t\t\t\thasColdListeners = true;\r\n\t\t\t}\t\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tif (hasColdListeners)\r\n\t\t{\r\n\t\t\tfor (i = amount - 1; i > -1; i--) \r\n\t\t\t{\r\n\t\t\t\tif (listeners[i].isCold)\r\n\t\t\t\t{\r\n\t\t\t\t\tlisteners.splice(i, 1);\r\n\t\t\t\t\tamount--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\thasColdListeners = false;\r\n\t\t}\r\n\t\t\r\n\t\tstepping = false;\r\n\t}\r\n\t\r\n}\r\n\r\nvar SignalListener = function(callbackFunction){\r\n\r\n\tthis.callbackFunction = callbackFunction;\r\n\r\n\tthis.removeOnFirstCallback = false;\r\n\r\n\tthis.isCold = false;\r\n\r\n\tthis.paramsRequired = callbackFunction.length; // 0:none, 1:param, 2:signal and param\r\n\r\n}"," /*\r\nMIT License\r\n\r\nCopyright (c) 2017 Ivo Cass\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n*/\r\n\r\nimport app from './app';\r\nimport utils from './utils';\r\n\r\nexport default function TermsMgr(){\r\n    \r\n    log('TermsMgr()');\r\n\r\n    function init(){\r\n\r\n        utils.loadText('assets/terms.txt').then((txt) => {\r\n\r\n            log('TermsMgr() - txt loaded', txt.length);\r\n\r\n            app.data.termsAndConditions = txt;\r\n        });\r\n\r\n        var hasAcceptedTerms = utils.getSavedItem('hasAcceptedTerms');\r\n\r\n        log('TermsMgr() - hasAcceptedTerms:', hasAcceptedTerms);\r\n\r\n        if(hasAcceptedTerms){\r\n            app.data.hasAcceptedTerms = true;\r\n        }\r\n    }\r\n\r\n    this.onTermsCheckboxClicked = function(){\r\n\r\n        if($('#termsCheckbox').prop('checked')){\r\n\r\n            $('#btnWelcomeContinue').removeClass('disabled');\r\n        }\r\n        else{\r\n            $('#btnWelcomeContinue').addClass('disabled');\r\n        }\r\n    };\r\n\r\n    this.onWelcomeContinueClicked = function(){\r\n\r\n        if($('#termsCheckbox').prop('checked')){\r\n\r\n            $('#welcome').addClass('d-none');\r\n\r\n            app.data.hasAcceptedTerms = true;\r\n\r\n            localStorage.setItem('hasAcceptedTerms', true);\r\n        }\r\n        else{\r\n            // alert('');\r\n        }\r\n    };\r\n    \r\n    init();\r\n}\r\n"," /*\r\nMIT License\r\n\r\nCopyright (c) 2017 Ivo Cass\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n*/\r\n\r\n\r\nvar Utils = function(){\r\n\r\n    var self = this;\r\n    this.trackingEnabled = false;\r\n    \r\n    this.isBrowser = function(name){\r\n\r\n        return navigator.userAgent.indexOf(name) > -1;\r\n    };\r\n\r\n    this.assertEquals = function(name, currentVal, expectedVal){\r\n\r\n        var isSuccessful = currentVal === expectedVal ? true : false;\r\n\r\n        if(isSuccessful){\r\n            console.log('assertEquals()', 'SUCCESS', name, currentVal);\r\n        }\r\n        else{\r\n            console.log('assertEquals()', 'ERROR', name, 'current/expected:', currentVal, '/', expectedVal);\r\n        }        \r\n\r\n        if(!isSuccessful){\r\n           console.log('ERROR ------------------------------------------');\r\n           console.log('|            LAST TEST FAILED =(');\r\n           console.log('ERROR ------------------------------------------');\r\n        }\r\n    };\r\n\r\n    this.getSavedItem = function(name){\r\n\r\n        log('Utils - getSavedItem()', name);\r\n\r\n        var item = localStorage.getItem(name);\r\n\r\n        // console.log('utils.getSavedItem() - name:', name, ' - item:', item);\r\n\r\n        if(item !== null && item !== undefined && item !== 'undefined'){\r\n            \r\n            switch(true){\r\n                \r\n                case item === 'false':\r\n                    return false;\r\n                \r\n                case item === 'true':\r\n                    return true;\r\n                \r\n                case !isNaN(item):\r\n                    return Number(item);\r\n\r\n                case typeof item == 'string':\r\n                    try {\r\n                        var data = JSON.parse(item);\r\n\r\n                        if(data != null){\r\n                            return data;\r\n                        }\r\n                    }\r\n                    catch(err) {\r\n                        return item;\r\n                    }\r\n                break;\r\n\r\n            }\r\n        }\r\n\r\n        return null;\r\n    };\r\n\r\n    this.track = function (category, action = '', label = '', value = ''){\r\n\r\n        if(!self.trackingEnabled) return;\r\n\r\n        ga('send', {\r\n            hitType: 'event',\r\n            eventCategory: category,\r\n            eventAction: action,\r\n            eventLabel: label,\r\n            eventValue: value\r\n        });\r\n    };\r\n\r\n    this.formatCurrency = function(val){\r\n\r\n        val = parseFloat(val).toFixed(2);\r\n\r\n        if(Number.isInteger(Number(val))){\r\n            \r\n            return parseFloat(val).toFixed(0);\r\n        }\r\n\r\n        return Number(val);\r\n    }\r\n    \r\n    this.loadText = function (url){\r\n\r\n        return new Promise(function (resolve, reject) {\r\n\r\n            var xhr = new XMLHttpRequest();\r\n\r\n            if (xhr.overrideMimeType) {\r\n                xhr.overrideMimeType('text/plain; charset=ISO-8859-1');\r\n            }\r\n            \r\n            xhr.open('GET', url, true);\r\n\r\n            xhr.onload = function () {\r\n                if (this.status >= 200 && this.status < 300) {\r\n                    resolve(xhr.response);\r\n                } else {\r\n                    reject({\r\n                    status: this.status,\r\n                    statusText: xhr.statusText\r\n                    });\r\n                }\r\n            };\r\n\r\n            xhr.onerror = function () {\r\n                reject({\r\n                    status: this.status,\r\n                    statusText: xhr.statusText\r\n                });\r\n            };\r\n\r\n            xhr.send();\r\n        });\r\n    }\r\n\r\n    // returns an XML DOM document\r\n    this.stringToXML = function(text){\r\n\r\n        if(text){\r\n            return new DOMParser().parseFromString(text, \"text/xml\");\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    // lum should represent a percentage (e.g. for 5%, provide 0.05. negative values to darken)\r\n    this.changeColorLuminance = function(hex, lum) {\r\n\r\n        // Validate hex string\r\n        hex = String(hex).replace(/[^0-9a-f]/gi, \"\");\r\n        if (hex.length < 6) {\r\n        hex = hex.replace(/(.)/g, '$1$1');\r\n        }\r\n        lum = lum || 0;\r\n\r\n        // Convert to decimal and change luminosity\r\n        var rgb = \"#\",\r\n        c;\r\n        for (var i = 0; i < 3; ++i) {\r\n            c = parseInt(hex.substr(i * 2, 2), 16);\r\n            c = Math.round(Math.min(Math.max(0, c + (c * lum)), 255)).toString(16);\r\n            rgb += (\"00\" + c).substr(c.length);\r\n        }\r\n\r\n        return rgb;\r\n    }\r\n}\r\n\r\nexport default new Utils();\r\n\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvcHJvbWlzZS1wb2x5ZmlsbC9wcm9taXNlLmpzIiwic3JjXFxqc1xcYXBwLmpzIiwic3JjXFxqc1xcY2FsY3VsYXRvci5qcyIsInNyY1xcanNcXGN1cnJlbmN5XFxjdXJyZW5jeS5qcyIsInNyY1xcanNcXGN1cnJlbmN5XFxjdXJyZW5jeU1hbmFnZXIuanMiLCJzcmNcXGpzXFxjdXJyZW5jeVxcY3VycmVuY3lVcGRhdGVyLmpzIiwic3JjXFxqc1xcbG9nZ2VyLmpzIiwic3JjXFxqc1xcc2V0dGluZ3MuanMiLCJzcmNcXGpzXFxzaWduYWwuanMiLCJzcmNcXGpzXFx0ZXJtc01nci5qcyIsInNyY1xcanNcXHV0aWxzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pPQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBd0JBOzs7Ozs7QUFFQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFFQTs7OztBQUVBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBRUE7Ozs7QUFDQTs7Ozs7O0FBRkE7QUFNQSxJQUFJLE1BQUosQ0FBVyxRQUFYLEdBQXNCLEtBQXRCOztBQUVBO0FBQ0EsSUFBSSxDQUFDLE9BQU8sT0FBWixFQUFxQjtBQUNyQixXQUFPLE9BQVA7QUFDQzs7QUFFRDtB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QUFXLEtBQUssR0FBTCxDQUFTLEtBQUssR0FBTCxDQUFTLENBQVQsRUFBWSxJQUFLLElBQUksR0FBckIsQ0FBVCxFQUFxQyxHQUFyQyxDQUFYLEVBQXNELFFBQXRELENBQStELEVBQS9ELENBQUo7QUFDQSxtQkFBTyxDQUFDLE9BQU8sQ0FBUixFQUFXLE1BQVgsQ0FBa0IsRUFBRSxNQUFwQixDQUFQO0FBQ0g7O0FBRUQsZUFBTyxHQUFQO0FBQ0gsS0FuQkQ7QUFvQkgsQ0E5SkQ7O2tCQWdLZSxJQUFJLEtBQUosRSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIoZnVuY3Rpb24gKHJvb3QpIHtcblxuICAvLyBTdG9yZSBzZXRUaW1lb3V0IHJlZmVyZW5jZSBzbyBwcm9taXNlLXBvbHlmaWxsIHdpbGwgYmUgdW5hZmZlY3RlZCBieVxuICAvLyBvdGhlciBjb2RlIG1vZGlmeWluZyBzZXRUaW1lb3V0IChsaWtlIHNpbm9uLnVzZUZha2VUaW1lcnMoKSlcbiAgdmFyIHNldFRpbWVvdXRGdW5jID0gc2V0VGltZW91dDtcblxuICBmdW5jdGlvbiBub29wKCkge31cbiAgXG4gIC8vIFBvbHlmaWxsIGZvciBGdW5jdGlvbi5wcm90b3R5cGUuYmluZFxuICBmdW5jdGlvbiBiaW5kKGZuLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGZuLmFwcGx5KHRoaXNBcmcsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIFByb21pc2UoZm4pIHtcbiAgICBpZiAodHlwZW9mIHRoaXMgIT09ICdvYmplY3QnKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdQcm9taXNlcyBtdXN0IGJlIGNvbnN0cnVjdGVkIHZpYSBuZXcnKTtcbiAgICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdub3QgYSBmdW5jdGlvbicpO1xuICAgIHRoaXMuX3N0YXRlID0gMDtcbiAgICB0aGlzLl9oYW5kbGVkID0gZmFsc2U7XG4gICAgdGhpcy5fdmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fZGVmZXJyZWRzID0gW107XG5cbiAgICBkb1Jlc29sdmUoZm4sIHRoaXMpO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlKHNlbGYsIGRlZmVycmVkKSB7XG4gICAgd2hpbGUgKHNlbGYuX3N0YXRlID09PSAzKSB7XG4gICAgICBzZWxmID0gc2VsZi5fdmFsdWU7XG4gICAgfVxuICAgIGlmIChzZWxmLl9zdGF0ZSA9PT0gMCkge1xuICAgICAgc2VsZi5fZGVmZXJyZWRzLnB1c2goZGVmZXJyZWQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZWxmLl9oYW5kbGVkID0gdHJ1ZTtcbiAgICBQcm9taXNlLl9pbW1lZGlhdGVGbihmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgY2IgPSBzZWxmLl9zdGF0ZSA9PT0gMSA/IGRlZmVycmVkLm9uRnVsZmlsbGVkIDogZGVmZXJyZWQub25SZWplY3RlZDtcbiAgICAgIGlmIChjYiA9PT0gbnVsbCkge1xuICAgICAgICAoc2VsZi5fc3RhdGUgPT09IDEgPyByZXNvbHZlIDogcmVqZWN0KShkZWZlcnJlZC5wcm9taXNlLCBzZWxmLl92YWx1ZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciByZXQ7XG4gICAgICB0cnkge1xuICAgICAgICByZXQgPSBjYihzZWxmLl92YWx1ZSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlamVjdChkZWZlcnJlZC5wcm9taXNlLCBlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcmVzb2x2ZShkZWZlcnJlZC5wcm9taXNlLCByZXQpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVzb2x2ZShzZWxmLCBuZXdWYWx1ZSkge1xuICAgIHRyeSB7XG4gICAgICAvLyBQcm9taXNlIFJlc29sdXRpb24gUHJvY2VkdXJlOiBodHRwczovL2dpdGh1Yi5jb20vcHJvbWlzZXMtYXBsdXMvcHJvbWlzZXMtc3BlYyN0aGUtcHJvbWlzZS1yZXNvbHV0aW9uLXByb2NlZHVyZVxuICAgICAgaWYgKG5ld1ZhbHVlID09PSBzZWxmKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdBIHByb21pc2UgY2Fubm90IGJlIHJlc29sdmVkIHdpdGggaXRzZWxmLicpO1xuICAgICAgaWYgKG5ld1ZhbHVlICYmICh0eXBlb2YgbmV3VmFsdWUgPT09ICdvYmplY3QnIHx8IHR5cGVvZiBuZXdWYWx1ZSA9PT0gJ2Z1bmN0aW9uJykpIHtcbiAgICAgICAgdmFyIHRoZW4gPSBuZXdWYWx1ZS50aGVuO1xuICAgICAgICBpZiAobmV3VmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgc2VsZi5fc3RhdGUgPSAzO1xuICAgICAgICAgIHNlbGYuX3ZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgICAgZmluYWxlKHNlbGYpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGRvUmVzb2x2ZShiaW5kKHRoZW4sIG5ld1ZhbHVlKSwgc2VsZik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzZWxmLl9zdGF0ZSA9IDE7XG4gICAgICBzZWxmLl92YWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgZmluYWxlKHNlbGYpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJlamVjdChzZWxmLCBlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZWplY3Qoc2VsZiwgbmV3VmFsdWUpIHtcbiAgICBzZWxmLl9zdGF0ZSA9IDI7XG4gICAgc2VsZi5fdmFsdWUgPSBuZXdWYWx1ZTtcbiAgICBmaW5hbGUoc2VsZik7XG4gIH1cblxuICBmdW5jdGlvbiBmaW5hbGUoc2VsZikge1xuICAgIGlmIChzZWxmLl9zdGF0ZSA9PT0gMiAmJiBzZWxmLl9kZWZlcnJlZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBQcm9taXNlLl9pbW1lZGlhdGVGbihmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCFzZWxmLl9oYW5kbGVkKSB7XG4gICAgICAgICAgUHJvbWlzZS5fdW5oYW5kbGVkUmVqZWN0aW9uRm4oc2VsZi5fdmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gc2VsZi5fZGVmZXJyZWRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBoYW5kbGUoc2VsZiwgc2VsZi5fZGVmZXJyZWRzW2ldKTtcbiAgICB9XG4gICAgc2VsZi5fZGVmZXJyZWRzID0gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIEhhbmRsZXIob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIHByb21pc2UpIHtcbiAgICB0aGlzLm9uRnVsZmlsbGVkID0gdHlwZW9mIG9uRnVsZmlsbGVkID09PSAnZnVuY3Rpb24nID8gb25GdWxmaWxsZWQgOiBudWxsO1xuICAgIHRoaXMub25SZWplY3RlZCA9IHR5cGVvZiBvblJlamVjdGVkID09PSAnZnVuY3Rpb24nID8gb25SZWplY3RlZCA6IG51bGw7XG4gICAgdGhpcy5wcm9taXNlID0gcHJvbWlzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUYWtlIGEgcG90ZW50aWFsbHkgbWlzYmVoYXZpbmcgcmVzb2x2ZXIgZnVuY3Rpb24gYW5kIG1ha2Ugc3VyZVxuICAgKiBvbkZ1bGZpbGxlZCBhbmQgb25SZWplY3RlZCBhcmUgb25seSBjYWxsZWQgb25jZS5cbiAgICpcbiAgICogTWFrZXMgbm8gZ3VhcmFudGVlcyBhYm91dCBhc3luY2hyb255LlxuICAgKi9cbiAgZnVuY3Rpb24gZG9SZXNvbHZlKGZuLCBzZWxmKSB7XG4gICAgdmFyIGRvbmUgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgZm4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmIChkb25lKSByZXR1cm47XG4gICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgICByZXNvbHZlKHNlbGYsIHZhbHVlKTtcbiAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgaWYgKGRvbmUpIHJldHVybjtcbiAgICAgICAgZG9uZSA9IHRydWU7XG4gICAgICAgIHJlamVjdChzZWxmLCByZWFzb24pO1xuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgIGlmIChkb25lKSByZXR1cm47XG4gICAgICBkb25lID0gdHJ1ZTtcbiAgICAgIHJlamVjdChzZWxmLCBleCk7XG4gICAgfVxuICB9XG5cbiAgUHJvbWlzZS5wcm90b3R5cGVbJ2NhdGNoJ10gPSBmdW5jdGlvbiAob25SZWplY3RlZCkge1xuICAgIHJldHVybiB0aGlzLnRoZW4obnVsbCwgb25SZWplY3RlZCk7XG4gIH07XG5cbiAgUHJvbWlzZS5wcm90b3R5cGUudGhlbiA9IGZ1bmN0aW9uIChvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkge1xuICAgIHZhciBwcm9tID0gbmV3ICh0aGlzLmNvbnN0cnVjdG9yKShub29wKTtcblxuICAgIGhhbmRsZSh0aGlzLCBuZXcgSGFuZGxlcihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCwgcHJvbSkpO1xuICAgIHJldHVybiBwcm9tO1xuICB9O1xuXG4gIFByb21pc2UuYWxsID0gZnVuY3Rpb24gKGFycikge1xuICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJyKTtcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHJldHVybiByZXNvbHZlKFtdKTtcbiAgICAgIHZhciByZW1haW5pbmcgPSBhcmdzLmxlbmd0aDtcblxuICAgICAgZnVuY3Rpb24gcmVzKGksIHZhbCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICh2YWwgJiYgKHR5cGVvZiB2YWwgPT09ICdvYmplY3QnIHx8IHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicpKSB7XG4gICAgICAgICAgICB2YXIgdGhlbiA9IHZhbC50aGVuO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgIHRoZW4uY2FsbCh2YWwsIGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgICAgICByZXMoaSwgdmFsKTtcbiAgICAgICAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBhcmdzW2ldID0gdmFsO1xuICAgICAgICAgIGlmICgtLXJlbWFpbmluZyA9PT0gMCkge1xuICAgICAgICAgICAgcmVzb2x2ZShhcmdzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgcmVqZWN0KGV4KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcmVzKGksIGFyZ3NbaV0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIFByb21pc2UucmVzb2x2ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlLmNvbnN0cnVjdG9yID09PSBQcm9taXNlKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICByZXNvbHZlKHZhbHVlKTtcbiAgICB9KTtcbiAgfTtcblxuICBQcm9taXNlLnJlamVjdCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICByZWplY3QodmFsdWUpO1xuICAgIH0pO1xuICB9O1xuXG4gIFByb21pc2UucmFjZSA9IGZ1bmN0aW9uICh2YWx1ZXMpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHZhbHVlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB2YWx1ZXNbaV0udGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIC8vIFVzZSBwb2x5ZmlsbCBmb3Igc2V0SW1tZWRpYXRlIGZvciBwZXJmb3JtYW5jZSBnYWluc1xuICBQcm9taXNlLl9pbW1lZGlhdGVGbiA9ICh0eXBlb2Ygc2V0SW1tZWRpYXRlID09PSAnZnVuY3Rpb24nICYmIGZ1bmN0aW9uIChmbikgeyBzZXRJbW1lZGlhdGUoZm4pOyB9KSB8fFxuICAgIGZ1bmN0aW9uIChmbikge1xuICAgICAgc2V0VGltZW91dEZ1bmMoZm4sIDApO1xuICAgIH07XG5cbiAgUHJvbWlzZS5fdW5oYW5kbGVkUmVqZWN0aW9uRm4gPSBmdW5jdGlvbiBfdW5oYW5kbGVkUmVqZWN0aW9uRm4oZXJyKSB7XG4gICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJiBjb25zb2xlKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1Bvc3NpYmxlIFVuaGFuZGxlZCBQcm9taXNlIFJlamVjdGlvbjonLCBlcnIpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgaW1tZWRpYXRlIGZ1bmN0aW9uIHRvIGV4ZWN1dGUgY2FsbGJhY2tzXG4gICAqIEBwYXJhbSBmbiB7ZnVuY3Rpb259IEZ1bmN0aW9uIHRvIGV4ZWN1dGVcbiAgICogQGRlcHJlY2F0ZWRcbiAgICovXG4gIFByb21pc2UuX3NldEltbWVkaWF0ZUZuID0gZnVuY3Rpb24gX3NldEltbWVkaWF0ZUZuKGZuKSB7XG4gICAgUHJvbWlzZS5faW1tZWRpYXRlRm4gPSBmbjtcbiAgfTtcblxuICAvKipcbiAgICogQ2hhbmdlIHRoZSBmdW5jdGlvbiB0byBleGVjdXRlIG9uIHVuaGFuZGxlZCByZWplY3Rpb25cbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gZm4gRnVuY3Rpb24gdG8gZXhlY3V0ZSBvbiB1bmhhbmRsZWQgcmVqZWN0aW9uXG4gICAqIEBkZXByZWNhdGVkXG4gICAqL1xuICBQcm9taXNlLl9zZXRVbmhhbmRsZWRSZWplY3Rpb25GbiA9IGZ1bmN0aW9uIF9zZXRVbmhhbmRsZWRSZWplY3Rpb25Gbihmbikge1xuICAgIFByb21pc2UuX3VuaGFuZGxlZFJlamVjdGlvbkZuID0gZm47XG4gIH07XG4gIFxuICBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IFByb21pc2U7XG4gIH0gZWxzZSBpZiAoIXJvb3QuUHJvbWlzZSkge1xuICAgIHJvb3QuUHJvbWlzZSA9IFByb21pc2U7XG4gIH1cblxufSkodGhpcyk7XG4iLCIvKlxyXG5NSVQgTGljZW5zZVxyXG5cclxuQ29weXJpZ2h0IChjKSAyMDE3IEl2byBDYXNzXHJcblxyXG5QZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XHJcbm9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcclxuaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xyXG50byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXHJcbmNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xyXG5mdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxyXG5cclxuVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsXHJcbmNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXHJcbklNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxyXG5GSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcclxuQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxyXG5MSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxyXG5PVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRVxyXG5TT0ZUV0FSRS5cclxuKi9cclxuXHJcblwidXNlIHN0cmljdFwiXHJcblxyXG5pbXBvcnQgUHJvbWlzZSBmcm9tICdwcm9taXNlLXBvbHlmaWxsJzsgXHJcbmltcG9ydCBhcHAgZnJvbSAnLi9hcHAnO1xyXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi91dGlscyc7XHJcblxyXG5pbXBvcnQgbG9nZ2VyIGZyb20gJy4vbG9nZ2VyJztcclxuXHJcbmltcG9ydCBTaWduYWwgZnJvbSAnLi9zaWduYWwnO1xyXG5pbXBvcnQgVGVybXNNZ3IgZnJvbSAnLi90ZXJtc01ncic7XHJcbmltcG9ydCBDYWxjdWxhdG9yIGZyb20gJy4vY2FsY3VsYXRvcic7XHJcbmltcG9ydCBTZXR0aW5ncyBmcm9tICcuL3NldHRpbmdzJztcclxuLy8gaW1wb3J0IHF1b3RlR2VuZXJhdG9yIGZyb20gJy4vcXVvdGVHZW5lcmF0b3InO1xyXG5pbXBvcnQgQ3VycmVuY3kgZnJvbSAnLi9jdXJyZW5jeS9jdXJyZW5jeSc7XHJcbmltcG9ydCBDdXJyZW5jeU1hbmFnZXIgZnJvbSAnLi9jdXJyZW5jeS9jdXJyZW5jeU1hbmFnZXInO1xyXG5cclxuXHJcblxyXG5WdWUuY29uZmlnLmRldnRvb2xzID0gZmFsc2U7XHJcblxyXG4vLyBpZSBwb2x5ZmlsbFxyXG5pZiAoIXdpbmRvdy5Qcm9taXNlKSB7XHJcbndpbmRvdy5Qcm9taXNlID0gUHJvbWlzZTtcclxufVxyXG5cclxuLy8gaWUgcG9seWZpbGxcclxuTnVtYmVyLmlzSW50ZWdlciA9IE51bWJlci5pc0ludGVnZXIgfHwgZnVuY3Rpb24odmFsdWUpIHtcclxuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIgJiZcclxuICAgICAgICAgICBpc0Zpbml0ZSh2YWx1ZSkgJiZcclxuICAgICAgICAgICBNYXRoLmZsb29yKHZhbHVlKSA9PT0gdmFsdWU7XHJcbn07XHJcblxyXG5cclxudmFyIEFwcCA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgbG9nKCdBcHAoKScpOyAgICBcclxuICAgIFxyXG4gICAgdGhpcy5jb25maWcgPSBuZXcgQ29uZmlnKCk7ICAgIFxyXG4gICAgdGhpcy5kYXRhO1xyXG5cclxuICAgIHZhciBoYXNJbml0aWFsaXplZCA9IGZhbHNlOyAgICBcclxuICAgIHZhciB0ZXJtc01ncjtcclxuICAgIHZhciBjdXJyZW5jeU1hbmFnZXI7XHJcbiAgICB2YXIgc2V0dGluZ3M7XHJcbiAgICB2YXIgY2FsYztcclxuXHJcbiAgICB0aGlzLmN1cnJlbmN5VXBkYXRlZCA9IG5ldyBTaWduYWwoKTtcclxuICAgIHRoaXMuY3VycmVuY3lTZWxlY3RlZCA9IG5ldyBTaWduYWwoKTtcclxuICAgIHRoaXMuY3VycmVuY3lTbGlkZXJUb2dnbGVkID0gbmV3IFNpZ25hbCgpO1xyXG4gICAgdGhpcy5jdXJyZW5jeU9mZnNldFRvZ2dsZWQgPSBuZXcgU2lnbmFsKCk7XHJcbiAgICB0aGlzLmN1cnJlbmN5TW9kaWZpZWQgPSBuZXcgU2lnbmFsKCk7IC8vIGRpc3BhdGNoZWQgYWZ0ZXIgcHJvY2Vzc2VkIGJ5IFNldHRpbmdzXHJcbiAgICB0aGlzLmN1cnJlbmN5T2Zmc2V0TW9kaWZpZWQgPSBuZXcgU2lnbmFsKCk7IC8vIGRpc3BhdGNoZWQgYWZ0ZXIgcHJvY2Vzc2VkIGJ5IFNldHRpbmdzXHJcbiAgICB0aGlzLnNldHRpbmdzQ2hhbmdlZCA9IG5ldyBTaWduYWwoKTtcclxuICAgIHRoaXMuc2F2ZVNldHRpbmdSZXF1ZXN0ZWQgPSBuZXcgU2lnbmFsKCk7XHJcblxyXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgbG9nKCdBcHAgLSBpbml0KCknKTtcclxuXHJcbiAgICAgICAgaWYoaGFzSW5pdGlhbGl6ZWQpIHJldHVybjtcclxuICAgICAgICBoYXNJbml0aWFsaXplZCA9IHRydWU7XHJcblxyXG4gICAgICAgIGxvZ2dlci5zZXRNYXhFbnRyaWVzKHRoaXMuY29uZmlnLmxvZ2dlck1heEVudHJpZXMpO1xyXG5cclxuICAgICAgICB1dGlscy50cmFja2luZ0VuYWJsZWQgPSB0aGlzLmNvbmZpZy50cmFja2luZ0VuYWJsZWQ7XHJcblxyXG5cclxuICAgICAgICB0aGlzLmRhdGEgPSBuZXcgVnVlKHtcclxuICAgICAgICBlbDogJyNhcHAnLFxyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgdGVybXNBbmRDb25kaXRpb25zOlwiY2FyZ2FuZG8uLlwiLFxyXG4gICAgICAgICAgICBoYXNBY2NlcHRlZFRlcm1zOmZhbHNlLFxyXG4gICAgICAgICAgICBhbHRlcm5hdGl2ZURlc2lnbkVuYWJsZWQ6ZmFsc2UsXHJcbiAgICAgICAgICAgIGFsdGVybmF0ZURldGFpbHNFbmFibGVkOmZhbHNlLFxyXG4gICAgICAgICAgICBtYWluQ29sb3I6JyMxMGM3N2InLFxyXG4gICAgICAgICAgICBjdXJyZW5jeTpuZXcgQ3VycmVuY3koJ1VTRCcpLCAvLyBkdW1teSBjdXJyZW5jeSBmb3IgVnVlLCB1bnRpbCB0aGUgY3VycmVudCBvbmUgaXMgc2V0XHJcbiAgICAgICAgICAgIGN1cnJlbmN5VVNEOm5ldyBDdXJyZW5jeSgnVVNEJyksXHJcbiAgICAgICAgICAgIGN1cnJlbmN5RVVSOm5ldyBDdXJyZW5jeSgnRVVSJyksXHJcbiAgICAgICAgICAgIGN1cnJlbmN5R0JQOm5ldyBDdXJyZW5jeSgnR0JQJyksICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGN1cnJlbmN5QVJTOm5ldyBDdXJyZW5jeSgnQVJTJyksXHJcbiAgICAgICAgICAgIGN1cnJlbmNpZXM6W10sIFxyXG4gICAgICAgICAgICBzZWxlY3RPcHRpb25VU0Q6J1VTRCAoRMOzbGFyKSAtICQuLi4nLFxyXG4gICAgICAgICAgICBzZWxlY3RPcHRpb25FVVI6J0VVUiAoRXVybykgLSAkLi4uJyxcclxuICAgICAgICAgICAgc2VsZWN0T3B0aW9uR0JQOidHQlAgKExpYnJhKSAtICQuLi4nLFxyXG4gICAgICAgICAgICBzZWxlY3RPcHRpb25BUlM6J0FSUyAoUGVzbyknLFxyXG4gICAgICAgICAgICBjdXJyZW5jeU9mZnNldDphcHAuY29uZmlnLmN1cnJlbmN5T2Zmc2V0LFxyXG4gICAgICAgICAgICBpc09mZnNldEN1c3RvbTpmYWxzZSxcclxuICAgICAgICAgICAgdmFsQ29tcHJhOmFwcC5jb25maWcuZGVmYXVsdFB1cmNoYXNlLFxyXG4gICAgICAgICAgICB2YWxDdXJyZW5jeUNvbnZlcnNpb246MCwgICAgICAgIFxyXG4gICAgICAgICAgICB2YWxDdXJyZW5jeUNvbnZlcnNpb25UZXh0OickMCcsICAgICAgICBcclxuICAgICAgICAgICAgdmFsQWZpcDowLFxyXG4gICAgICAgICAgICB2YWxDb3JyZW86YXBwLmNvbmZpZy5nZXN0aW9uQ29ycmVvLFxyXG4gICAgICAgICAgICB2YWxGcmFuY2hpc2U6YXBwLmNvbmZpZy52YWxGcmFuY2hpc2UsXHJcbiAgICAgICAgICAgIHZhbFRvdGFsOjAsXHJcbiAgICAgICAgICAgIHNob3dDb21wcmFQZXNvczp0cnVlLFxyXG4gICAgICAgICAgICBzaG93QWZpcDp0cnVlLFxyXG4gICAgICAgICAgICBzaG93Q29ycmVvOnRydWUsXHJcbiAgICAgICAgICAgIHVzZUZyYW5jaGlzZTp0cnVlLFxyXG4gICAgICAgICAgICBzaG93SW5mb0ljb25zOnRydWUsXHJcbiAgICAgICAgICAgIHNob3dDaGVja2JveGVzOnRydWUsXHJcbiAgICAgICAgICAgIGluZm9Nb2RhbFRpdGxlOicnLFxyXG4gICAgICAgICAgICB2YWxDb21wcmFNYXg6YXBwLmNvbmZpZy52YWxDb21wcmFNYXgsXHJcbiAgICAgICAgICAgIGlzQ29tcHJhT3V0T2ZSYW5nZTpmYWxzZSxcclxuICAgICAgICAgICAgc2hvd2luZ1NldHRpbmdzOmZhbHNlLFxyXG4gICAgICAgICAgICB2ZXJzaW9uOmFwcC5jb25maWcudmVyc2lvblxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbWV0aG9kczoge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gc2V0dGluZ3NcclxuICAgICAgICAgICAgc2V0TWFpbkNvbG9yOmZ1bmN0aW9uKGNvbG9yKXtzZXR0aW5ncy5zZXRNYWluQ29sb3IoY29sb3IpfSwgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBvbkN1cnJlbmN5TW9kaWZpZWQ6ZnVuY3Rpb24oZXZlbnQsIGlkKXtzZXR0aW5ncy5vbkN1cnJlbmN5TW9kaWZpZWQoZXZlbnQsIGlkKX0sXHJcbiAgICAgICAgICAgIHRvZ2dsZURlc2lnbjpmdW5jdGlvbigpe3NldHRpbmdzLnRvZ2dsZURlc2lnbigpfSxcclxuICAgICAgICAgICAgdG9nZ2xlQ3VzdG9tQ3VycmVuY3k6ZnVuY3Rpb24oaWQpe3NldHRpbmdzLnRvZ2dsZUN1c3RvbUN1cnJlbmN5KGlkKX0sXHJcbiAgICAgICAgICAgIHRvZ2dsZUluZm9JY29uczpmdW5jdGlvbigpe3NldHRpbmdzLnRvZ2dsZUluZm9JY29ucygpfSxcclxuICAgICAgICAgICAgdG9nZ2xlQ2hlY2tib3hlczpmdW5jdGlvbigpe3NldHRpbmdzLnRvZ2dsZUNoZWNrYm94ZXMoKX0sICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRvZ2dsZUN1cnJlbmN5T2Zmc2V0OmZ1bmN0aW9uKCl7c2V0dGluZ3MudG9nZ2xlQ3VycmVuY3lPZmZzZXQoKX0sXHJcbiAgICAgICAgICAgIG9uQ3VycmVuY3lPZmZzZXRNb2RpZmllZDpmdW5jdGlvbihldmVudCl7c2V0dGluZ3Mub25DdXJyZW5jeU9mZnNldE1vZGlmaWVkKGV2ZW50KX0sXHJcblxyXG4gICAgICAgICAgICAvLyB0ZXJtc01nclxyXG4gICAgICAgICAgICBvblRlcm1zQ2hlY2tib3hDbGlja2VkOmZ1bmN0aW9uKCl7dGVybXNNZ3Iub25UZXJtc0NoZWNrYm94Q2xpY2tlZCgpfSxcclxuICAgICAgICAgICAgb25XZWxjb21lQ29udGludWVDbGlja2VkOmZ1bmN0aW9uKCl7dGVybXNNZ3Iub25XZWxjb21lQ29udGludWVDbGlja2VkKCl9LFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gYXBwXHJcbiAgICAgICAgICAgIG9wZW5TZXR0aW5nczpmdW5jdGlvbihjb2xvcil7YXBwLmRhdGEuc2hvd2luZ1NldHRpbmdzID0gdHJ1ZX0sXHJcbiAgICAgICAgICAgIGNsb3NlU2V0dGluZ3M6ZnVuY3Rpb24oY29sb3Ipe2FwcC5kYXRhLnNob3dpbmdTZXR0aW5ncyA9IGZhbHNlfSwgICAgXHJcbiAgICAgICAgICAgIHNob3dEZXRhaWxzU2VjdGlvbjpmdW5jdGlvbigpe2FwcC5kYXRhLmFsdGVybmF0ZURldGFpbHNFbmFibGVkID0gdHJ1ZX0sXHJcbiAgICAgICAgICAgIGhpZGVEZXRhaWxzU2VjdGlvbjpmdW5jdGlvbigpe2FwcC5kYXRhLmFsdGVybmF0ZURldGFpbHNFbmFibGVkID0gZmFsc2V9LFxyXG4gICAgICAgICAgICBvbkZhY2Vib29rQ2xpY2tlZDpmdW5jdGlvbigpe2FwcC5vbkZhY2Vib29rQ2xpY2tlZCgpfSxcclxuICAgICAgICAgICAgb25FeHRlbnNpb25DbGlja2VkOmZ1bmN0aW9uKG5hbWUpe2FwcC5vbkV4dGVuc2lvbkNsaWNrZWQobmFtZSl9LFxyXG5cclxuICAgICAgICAgICAgLy8gY3VycmVuY3lNYW5hZ2VyXHJcbiAgICAgICAgICAgIG9uQ3VycmVuY3lTZWxlY3RlZDpmdW5jdGlvbihlKXtjdXJyZW5jeU1hbmFnZXIub25DdXJyZW5jeVNlbGVjdGVkKGUpfSxcclxuICAgICAgICAgICAgdXBkYXRlQ3VycmVuY3k6ZnVuY3Rpb24oaWQpe2N1cnJlbmN5TWFuYWdlci51cGRhdGVDdXJyZW5jeShpZCl9LFxyXG5cclxuICAgICAgICAgICAgLy8gY2FsY1xyXG4gICAgICAgICAgICBvbkxhYmVsQ2xpY2tlZDpmdW5jdGlvbihuYW1lKXtjYWxjLm9uTGFiZWxDbGlja2VkKG5hbWUpfSxcclxuICAgICAgICAgICAgc2hvd0luZm9Nb2RhbDpmdW5jdGlvbihpZCl7Y2FsYy5zaG93SW5mb01vZGFsKGlkKX0sXHJcbiAgICAgICAgfVxyXG4gICAgIH0pO1xyXG5cclxuICAgICAgICBpZighdGhpcy5jb25maWcubG9nZ2VyRW5hYmxlZCl7XHJcbiAgICAgICAgICAgIGxvZ2dlci5kaXNhYmxlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0ZXJtc01nciA9IG5ldyBUZXJtc01ncigpO1xyXG4gICAgICAgIGN1cnJlbmN5TWFuYWdlciA9IG5ldyBDdXJyZW5jeU1hbmFnZXIoKTtcclxuICAgICAgICBzZXR0aW5ncyA9IG5ldyBTZXR0aW5ncygpO1xyXG4gICAgICAgIGNhbGMgPSBuZXcgQ2FsY3VsYXRvcigpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLm9uRmFjZWJvb2tDbGlja2VkID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgdXRpbHMudHJhY2soJ0ZhY2Vib29rJywgJ0NsaWNrZWQnKTtcclxuXHJcbiAgICAgICAgd2luZG93Lm9wZW4oJ2h0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS9DYWxjdWxvQ29tcHJhcycsJ19ibGFuaycpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLm9uRXh0ZW5zaW9uQ2xpY2tlZCA9IGZ1bmN0aW9uKGJyb3dzZXJOYW1lKXtcclxuXHJcbiAgICAgICAgdXRpbHMudHJhY2soJ0V4dGVuc2lvbicsICdDbGlja2VkJywgYnJvd3Nlck5hbWUpO1xyXG4gICAgfTtcclxuICAgIFxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBuZXcgQXBwKCk7XHJcblxyXG4vLyAkKGRvY3VtZW50KS5yZWFkeShhcHAuaW5pdCk7XHJcblxyXG5hcHAuaW5pdCgpOyIsIi8qXHJcbk1JVCBMaWNlbnNlXHJcblxyXG5Db3B5cmlnaHQgKGMpIDIwMTcgSXZvIENhc3NcclxuXHJcblBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcclxub2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxyXG5pbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXHJcbnRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcclxuY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXHJcbmZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XHJcblxyXG5UaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGxcclxuY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcclxuSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXHJcbkZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxyXG5BVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXHJcbkxJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXHJcbk9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFXHJcblNPRlRXQVJFLlxyXG4qL1xyXG5cclxuaW1wb3J0IGFwcCBmcm9tICcuL2FwcCc7XHJcbmltcG9ydCB1dGlscyBmcm9tICcuL3V0aWxzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENhbGN1bGF0b3IoKXtcclxuICAgIFxyXG4gICAgbG9nKCdDYWxjdWxhdG9yKCknKTtcclxuXHJcbiAgICAvLyB0b2RvOiB1c2UgYmV0dGVyIG5hbWVzIHRvIGlkZW50aWZ5IGh0bWwgZWxlbWVudHNcclxuICAgIHZhciBwcmljZUNvbXByYUlucHV0O1xyXG4gICAgdmFyIGN1cnJlbmN5Q29udmVyc2lvblRleHQ7XHJcbiAgICB2YXIgcHJpY2VBZmlwO1xyXG4gICAgdmFyIHByaWNlQ29ycmVvO1xyXG4gICAgdmFyIHByaWNlRnJhbnF1aWNpYTtcclxuICAgIHZhciB2YWxUb3RhbFNwYW47ICAgIFxyXG4gICAgdmFyIGRhdGEgPSBudWxsO1xyXG4gICAgdmFyIHByZXZJbnB1dCA9ICcnO1xyXG5cclxuICAgIFxyXG5cclxuICAgIGZ1bmN0aW9uIGluaXQoKXtcclxuXHJcbiAgICAgICAgbG9nKCdDYWxjdWxhdG9yIC0gaW5pdCgpJyk7XHJcblxyXG4gICAgICAgIGRhdGEgPSBhcHAuZGF0YTtcclxuICAgICAgICBcclxuICAgICAgICBwcmljZUNvbXByYUlucHV0ID0gJCgnI3ByaWNlLWNvbXByYS1pbnB1dCcpLmdldCgwKTtcclxuICAgICAgICBjdXJyZW5jeUNvbnZlcnNpb25UZXh0ID0gJCgnI2N1cnJlbmN5LWNvbnZlcnNpb24tdGV4dCcpLmdldCgwKTtcclxuICAgICAgICBwcmljZUFmaXAgPSAkKCcjcHJpY2UtYWZpcCcpLmdldCgwKTtcclxuICAgICAgICBwcmljZUNvcnJlbyA9ICQoJyNwcmljZS1jb3JyZW8nKS5nZXQoMCk7XHJcbiAgICAgICAgcHJpY2VGcmFucXVpY2lhID0gJCgnI3ByaWNlLWZyYW5xdWljaWEnKS5nZXQoMCk7XHJcbiAgICAgICAgdmFsVG90YWxTcGFuID0gJCgnI3ZhbC10b3RhbCcpLmdldCgwKTtcclxuICAgICAgICBwcmV2SW5wdXQgPSBkYXRhLnZhbENvbXByYTtcclxuICAgICAgICBcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgbW91c2VXaGVlbExpc3RlbmVyKTtcclxuICAgICAgICBwcmljZUNvbXByYUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgb25QcmljZUNvbXByYUlucHV0Q2hhbmdlZCk7XHJcblxyXG4gICAgICAgIGFwcC5jdXJyZW5jeVVwZGF0ZWQuYWRkKG9uQ3VycmVuY3lVcGRhdGVkKTtcclxuICAgICAgICBhcHAuc2V0dGluZ3NDaGFuZ2VkLmFkZCh1cGRhdGVUb3RhbCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICB1cGRhdGVQcmljZShwcmljZUNvbXByYUlucHV0LCBkYXRhLnZhbENvbXByYSk7XHJcblxyXG4gICAgICAgIHByb2Nlc3NOZXdDb21wcmFWYWwoKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIHVwZGF0ZVRvdGFsKCk7XHJcblxyXG4gICAgICAgIGlmKGFwcC5jb25maWcucnVuVGVzdHMpe1xyXG4gICAgICAgICAgICBydW5UZXN0cygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICBhcHAuY3VycmVuY3lTZWxlY3RlZC5hZGQocHJvY2Vzc05ld0NvbXByYVZhbCk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdCgpO1xyXG4gICAgXHJcbiAgICB0aGlzLnNob3dJbmZvTW9kYWwgPSBmdW5jdGlvbihpZCl7XHJcbiAgICAgICAgXHJcbiAgICAgICAgJCgnLmluZm8tbW9kYWwtY29udGVudCcpLmFkZENsYXNzKCdkLW5vbmUnKTtcclxuXHJcbiAgICAgICAgZGF0YS5pbmZvTW9kYWxUaXRsZSA9ICQoaWQpLmRhdGEoJ3RpdGxlJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgJChpZCkucmVtb3ZlQ2xhc3MoJ2Qtbm9uZScpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG9uQ3VycmVuY3lVcGRhdGVkKCl7XHJcblxyXG4gICAgICAgIGxvZygnQ2FsY3VsYXRvcigpIC0gb25DdXJyZW5jeVVwZGF0ZWQoKScpO1xyXG5cclxuICAgICAgICBwcm9jZXNzTmV3Q29tcHJhVmFsKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gb25QcmljZUNvbXByYUlucHV0Q2hhbmdlZChlKXtcclxuICAgICAgICBcclxuICAgICAgICAvLyBmaXJlZm94IGFsbG93cyBvdGhlciBjaGFyYWN0ZXJzIGluIGlucHV0IGV2ZW4gd2l0aCB0eXBlPVwibnVtYmVyXCJcclxuICAgICAgICAvLyB0aGlzIGNvZGUgaGVscHMgKGJ1dCBmaXJzdCBuZWVkcyB0byBiZSB0ZXN0ZWQgaW4gbWFjIGFuZCBtb2JpbGUpXHJcbiAgICAgICAgLy8gdmFyIGtleSA9IGUua2V5Q29kZTtcclxuICAgICAgICAvLyBjb25zdCBLRVlfQkFDS1NQQUNFID0gODtcclxuICAgICAgICAvLyBjb25zdCBLRVlfREVMID0gNDY7XHJcbiAgICAgICAgLy8gY29uc3QgS0VZX1BFUklPRCA9IDE5MDtcclxuICAgICAgICAvLyBjb25zdCBLRVlfTlVNUEFEX1BFUklPRCA9IDExMDsgICAgICAgIFxyXG4gICAgICAgIC8vIGNvbnN0IEtFWV9IT01FID0gMzY7XHJcbiAgICAgICAgLy8gY29uc3QgS0VZX0VORCA9IDM1O1xyXG5cclxuICAgICAgICAvLyAvLyBudW1iZXJzLCBudW1wYWQgbnVtYmVycywgYXJyb3dzXHJcbiAgICAgICAgLy8gdmFyIGFsbG93ZWRLZXlzID0gWzQ4LCA0OSwgNTAsIDUxLCA1MiwgNTMsIDU0LCA1NSwgNTYsIDU3LCBLRVlfQkFDS1NQQUNFLCBLRVlfREVMLCA5NywgOTgsIDk5LCAxMDAsIDEwMSwgMTAyLCAxMDMsIDEwNCwgMTA1LCAxMDYsIEtFWV9QRVJJT0QsIEtFWV9OVU1QQURfUEVSSU9ELCAzNywgMzgsIDM5LCA0MCwgS0VZX0hPTUUsIEtFWV9FTkRdO1xyXG5cclxuICAgICAgICAvLyBpZiAoYWxsb3dlZEtleXMuaW5kZXhPZihrZXkpID09IC0xKVxyXG4gICAgICAgIC8vIHtcclxuICAgICAgICAvLyAgICAgcHJpY2VDb21wcmFJbnB1dC52YWx1ZSA9IHByZXZJbnB1dDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgLy8gICAgIHJldHVybjtcclxuICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgIC8vIHByZXZJbnB1dCA9IHByaWNlQ29tcHJhSW5wdXQudmFsdWU7XHJcblxyXG4gICAgICAgIHByb2Nlc3NOZXdDb21wcmFWYWwoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBwcm9jZXNzTmV3Q29tcHJhVmFsKCl7XHJcblxyXG4gICAgICAgIGxvZygnQ2FsY3VsYXRvcigpIC0gcHJvY2Vzc05ld0NvbXByYVZhbCgpJywgcHJpY2VDb21wcmFJbnB1dC52YWx1ZSk7XHJcblxyXG4gICAgICAgIGlmKE51bWJlcihwcmljZUNvbXByYUlucHV0LnZhbHVlKSA8IDApe1xyXG4gICAgICAgICAgICBwcmljZUNvbXByYUlucHV0LnZhbHVlID0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRhdGEudmFsQ29tcHJhID0gTnVtYmVyKHByaWNlQ29tcHJhSW5wdXQudmFsdWUpOyAgICAgICAgIFxyXG5cclxuICAgICAgICBkYXRhLmlzQ29tcHJhT3V0T2ZSYW5nZSA9IGdldElzQ29tcHJhT3V0T2ZSYW5nZSgpO1xyXG5cclxuICAgICAgICB1cGRhdGVUb3RhbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG1vdXNlV2hlZWxMaXN0ZW5lcihlKXtcclxuXHJcbiAgICAgICAgaWYoZGF0YS5zaG93aW5nU2V0dGluZ3MgfHwgIWRhdGEuaGFzQWNjZXB0ZWRUZXJtcyl7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IHZhbCA9IE51bWJlcihwcmljZUNvbXByYUlucHV0LnZhbHVlKTtcclxuXHJcbiAgICAgICAgdmFyIHN0ZXAgPSAxO1xyXG5cclxuICAgICAgICBpZihlLnNoaWZ0S2V5KXtcclxuICAgICAgICAgICAgc3RlcCA9IDEwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgaWYoZS5hbHRLZXkpe1xyXG4gICAgICAgICAgICBzdGVwID0gMC4xO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoZS5kZWx0YVkgPCAwKXtcclxuICAgICAgICAgICAgdmFsICs9IHN0ZXA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHZhbCAtPSBzdGVwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYodmFsIDwgMCl7XHJcbiAgICAgICAgICAgIHZhbCA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YWwgPSBmb3JtYXRQcmljZSh2YWwpO1xyXG5cclxuICAgICAgICBwcmljZUNvbXByYUlucHV0LnZhbHVlID0gdmFsO1xyXG5cclxuICAgICAgICBwcm9jZXNzTmV3Q29tcHJhVmFsKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5vbkxhYmVsQ2xpY2tlZCA9IGZ1bmN0aW9uKG5hbWUpe1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxvZygnQ2FsY3VsYXRvciAtIG9uTGFiZWxDbGlja2VkJywgbmFtZSk7XHJcblxyXG4gICAgICAgIHN3aXRjaChuYW1lKXtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIGNhc2UgJ2FmaXAnOlxyXG4gICAgICAgICAgICAvLyAgICAgZGF0YS5zaG93QWZpcCA9ICFkYXRhLnNob3dBZmlwO1xyXG4gICAgICAgICAgICAvLyBicmVhaztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIGNhc2UgJ2NvcnJlbyc6XHJcbiAgICAgICAgICAgIC8vICAgICBkYXRhLnNob3dDb3JyZW8gPSAhZGF0YS5zaG93Q29ycmVvO1xyXG4gICAgICAgICAgICAvLyBicmVhaztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNhc2UgJ2ZyYW5xdWljaWEnOlxyXG4gICAgICAgICAgICAgICAgZGF0YS51c2VGcmFuY2hpc2UgPSAhZGF0YS51c2VGcmFuY2hpc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgJCgnI3NsaWRlclRvZ2dsZUZyYW5jaGlzZScpLnByb3AoJ2NoZWNrZWQnLCBkYXRhLnVzZUZyYW5jaGlzZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgYXBwLnNhdmVTZXR0aW5nUmVxdWVzdGVkLmRpc3BhdGNoKHtuYW1lOid1c2VGcmFuY2hpc2UnLCB2YWx1ZTpkYXRhLnVzZUZyYW5jaGlzZX0pO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHVwZGF0ZVRvdGFsKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gdG9kbzogc3RvcCB1c2luZyBlbmdsaXNoIGFuZCBzcGFuaXNoIGZvciBmIyRrJ3Mgc2FrZS4uLlxyXG4gICAgZnVuY3Rpb24gZ2V0SXNDb21wcmFPdXRPZlJhbmdlKCl7XHJcblxyXG4gICAgICAgIC8vIGdldCB2YWxDb21wcmEgaW4gVVNEXHJcbiAgICAgICAgdmFyIHZhbENvbXByYVVTRCA9IGRhdGEudmFsQ29tcHJhO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIGlmIHdlIGFyZSBub3QgdXNpbmcgVVNEXHJcbiAgICAgICAgaWYoZGF0YS5jdXJyZW5jeSAhPSBkYXRhLmN1cnJlbmN5VVNEKXtcclxuXHJcbiAgICAgICAgICAgIGxldCB2YWxDb21wcmFBUlMgPSBkYXRhLnZhbENvbXByYTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIGlmIHdlIGFyZSBub3QgdXNpbmcgQVJTXHJcbiAgICAgICAgICAgIGlmKGRhdGEuY3VycmVuY3kgIT0gZGF0YS5jdXJyZW5jeUFSUyl7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gY29udmVydCB0byBBUlNcclxuICAgICAgICAgICAgICAgIHZhbENvbXByYUFSUyA9IGRhdGEudmFsQ29tcHJhICogZGF0YS5jdXJyZW5jeS5nZXRDdXJyZW50VmFsKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIHRoZW4gY29udmVydCB0byBVU0RcclxuICAgICAgICAgICAgdmFsQ29tcHJhVVNEID0gdmFsQ29tcHJhQVJTIC8gZGF0YS5jdXJyZW5jeVVTRC5nZXRDdXJyZW50VmFsKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYodmFsQ29tcHJhVVNEID4gZGF0YS52YWxDb21wcmFNYXgpe1xyXG5cclxuICAgICAgICAgICAgbG9nKCdDYWxjdWxhdG9yIC0gZ2V0SXNDb21wcmFPdXRPZlJhbmdlKCknLCBkYXRhLnZhbENvbXByYSwgdmFsQ29tcHJhVVNELCB0cnVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb2coJ0NhbGN1bGF0b3IgLSBnZXRJc0NvbXByYU91dE9mUmFuZ2UoKScsIGRhdGEudmFsQ29tcHJhLCB2YWxDb21wcmFVU0QsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHVwZGF0ZVByaWNlKHByaWNlTGFiZWwsIHZhbHVlKXtcclxuXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ0NhbGN1bGF0b3IgLSB1cGRhdGVQcmljZSgpJywgcHJpY2VMYWJlbCwgdmFsdWUpO1xyXG5cclxuICAgICAgICB2YWx1ZSA9IGZvcm1hdFByaWNlKHZhbHVlKTtcclxuXHJcbiAgICAgICAgaWYocHJpY2VMYWJlbC50YWdOYW1lID09ICdJTlBVVCcpe1xyXG4gICAgICAgICAgICBwcmljZUxhYmVsLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHByaWNlTGFiZWwuaW5uZXJIVE1MID0gdmFsdWU7XHJcbiAgICAgICAgfSAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZm9ybWF0UHJpY2UodmFsKXtcclxuXHJcbiAgICAgICAgdmFsID0gcGFyc2VGbG9hdCh2YWwpLnRvRml4ZWQoMik7XHJcblxyXG4gICAgICAgIGlmKE51bWJlci5pc0ludGVnZXIoTnVtYmVyKHZhbCkpKXtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHZhbCkudG9GaXhlZCgwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBOdW1iZXIodmFsKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gdXBkYXRlVG90YWwoKXtcclxuXHJcbiAgICAgICAgdmFyIGN1cnJlbmN5TW9kaWZpZXIgPSBkYXRhLmN1cnJlbmN5LmdldEN1cnJlbnRWYWwoKTsgICBcclxuICAgICAgICBcclxuICAgICAgICB2YXIgdmFsUHVyY2hhc2UgPSBkYXRhLnZhbENvbXByYSAqIGN1cnJlbmN5TW9kaWZpZXI7XHJcblxyXG4gICAgICAgIHZhciB2YWxBZmlwID0gdmFsUHVyY2hhc2UgKiAwLjU7ICAgIFxyXG4gICAgICAgIHZhciB2YWxDb3JyZW8gPSBhcHAuY29uZmlnLmdlc3Rpb25Db3JyZW87XHJcbiAgICAgICAgdmFyIHZhbEZyYW5jaGlzZVBlc29zID0gZGF0YS52YWxGcmFuY2hpc2UgKiBkYXRhLmN1cnJlbmN5VVNELmdldEN1cnJlbnRWYWwoKTtcclxuICAgICAgICB2YXIgdmFsRnJhbmNoaXNlRGlzY291bnQgPSAwOyAvLyBob3cgbXVjaCB3ZSBzdWJ0cmFjdCBmcm9tIHZhbEFmaXAgaWYgdGhlIGZyYW5jaGlzZSBpcyB1c2VkXHJcblxyXG4gICAgICAgIC8vIEFjY29yZGluZyB0byBBRklQOiBcIkVsIG1vbnRvIGRlbCB0cmlidXRvIGEgYWJvbmFyIGNvcnJlc3BvbmRlIGFsIDUwJSBkZWwgZXhjZWRlbnRlIGRlIGxhIGZyYW5xdWljaWEsIFxyXG4gICAgICAgIC8vIHNpZW5kbyBlc3RhIGRlIFUkUyAyNSBhIHV0aWxpemFyc2UgZW4gdW4gc29sbyBlbnbDrW8geSB1bmEgdmV6IHBvciBhw7FvIGNhbGVuZGFyaW8uXCJcclxuICAgICAgICBpZihkYXRhLnVzZUZyYW5jaGlzZSl7XHJcblxyXG4gICAgICAgICAgICBpZih2YWxQdXJjaGFzZSA8PSB2YWxGcmFuY2hpc2VQZXNvcyl7XHJcbiAgICAgICAgICAgICAgICB2YWxBZmlwID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgdmFsQWZpcCA9ICh2YWxQdXJjaGFzZSAtIHZhbEZyYW5jaGlzZVBlc29zKSAqIDAuNTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHZhbFRvdGFsID0gdmFsUHVyY2hhc2UgKyB2YWxBZmlwICsgdmFsQ29ycmVvO1xyXG5cclxuICAgICAgICBcclxuICAgICAgICBpZihkYXRhLmN1cnJlbmN5LmdldElkKCkgPT0gJ0FSUycpe1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gY3VycmVuY3lDb252ZXJzaW9uVGV4dCB3aWxsIHNob3cgcGVzbyB0byBkb2xsYXJcclxuXHJcbiAgICAgICAgICAgIGRhdGEudmFsQ3VycmVuY3lDb252ZXJzaW9uID0gZGF0YS52YWxDb21wcmEgLyBkYXRhLmN1cnJlbmN5VVNELmdldEN1cnJlbnRWYWwoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGRhdGEudmFsQ3VycmVuY3lDb252ZXJzaW9uVGV4dCA9ICdVJFN7MX0nO1xyXG4gICAgICAgIH0gICAgICAgIFxyXG4gICAgICAgIGVsc2V7XHJcblxyXG4gICAgICAgICAgICAvLyBjdXJyZW5jeUNvbnZlcnNpb25UZXh0IHdpbGwgc2hvdyBwZXNvIGZyb20gb3RoZXIgY3VycmVuY2llc1xyXG5cclxuICAgICAgICAgICAgZGF0YS52YWxDdXJyZW5jeUNvbnZlcnNpb24gPSB2YWxQdXJjaGFzZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGRhdGEudmFsQ3VycmVuY3lDb252ZXJzaW9uVGV4dCA9ICckezF9JztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRhdGEudmFsQ3VycmVuY3lDb252ZXJzaW9uID0gZm9ybWF0UHJpY2UoZGF0YS52YWxDdXJyZW5jeUNvbnZlcnNpb24pO1xyXG4gICAgICAgIGRhdGEudmFsQ3VycmVuY3lDb252ZXJzaW9uVGV4dCA9ICBkYXRhLnZhbEN1cnJlbmN5Q29udmVyc2lvblRleHQucmVwbGFjZSgnezF9JywgZGF0YS52YWxDdXJyZW5jeUNvbnZlcnNpb24pXHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIGRhdGEudmFsQWZpcCA9IGZvcm1hdFByaWNlKHZhbEFmaXApO1xyXG4gICAgICAgIGRhdGEudmFsQ29ycmVvID0gZm9ybWF0UHJpY2UodmFsQ29ycmVvKTtcclxuICAgICAgICBkYXRhLnZhbFRvdGFsID0gZm9ybWF0UHJpY2UodmFsVG90YWwpO1xyXG5cclxuICAgICAgICBpZihkYXRhLnZhbENvbXByYSA9PSAwKXtcclxuICAgICAgICAgICAgZGF0YS52YWxUb3RhbCA9ICc/JztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxvZygnQ2FsY3VsYXRvciAtIHVwZGF0ZVRvdGFsKCkgLScsIGRhdGEuY3VycmVuY3kuZ2V0Q3VycmVudFZhbCgpLCB2YWxQdXJjaGFzZSwgdmFsQWZpcCwgdmFsQ29ycmVvLCB2YWxUb3RhbCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcnVuVGVzdHMoKXtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coJzw8PDw8PDw8PDw8PDw8PDw8IENhbGN1bGF0b3IgLSBydW5UZXN0cygpIC0gU1RBUlRFRCA+Pj4+Pj4+Pj4+Pj4+Pj4+Jyk7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKCctLS0tLS0tLS0gVEVTVCAxIC0tLS0tLS0tLScpO1xyXG5cclxuICAgICAgICBkYXRhLnZhbENvbXByYSA9IDEyMy40NTtcclxuICAgICAgICBwcmljZUNvbXByYUlucHV0LnZhbHVlID0gZGF0YS52YWxDb21wcmE7XHJcbiAgICAgICAgZGF0YS5jdXJyZW5jeVVTRC5zZXRDdXJyZW50VmFsKDE4LjEyKTtcclxuICAgICAgICBkYXRhLmdlc3Rpb25Db3JyZW8gPSAxMjA7XHJcbiAgICAgICAgZGF0YS52YWxGcmFuY2hpc2UgPSAyNTtcclxuXHJcbiAgICAgICAgZGF0YS5zaG93QWZpcCA9IHRydWU7XHJcbiAgICAgICAgZGF0YS5zaG93Q29ycmVvID0gdHJ1ZTtcclxuICAgICAgICBkYXRhLnVzZUZyYW5jaGlzZSA9IHRydWU7XHJcblxyXG4gICAgICAgIHVwZGF0ZVRvdGFsKCk7XHJcblxyXG4gICAgICAgIC8vIGZvcmNlIHJlbmRlclxyXG4gICAgICAgIGFwcC5kYXRhLiRtb3VudCgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHV0aWxzLmFzc2VydEVxdWFscygnY3VycmVuY3lDb252ZXJzaW9uVGV4dC5pbm5lckhUTUwnLCBjdXJyZW5jeUNvbnZlcnNpb25UZXh0LmlubmVySFRNTCwgXCIkMjIzNi45MVwiKTtcclxuICAgICAgICB1dGlscy5hc3NlcnRFcXVhbHMoJ3ByaWNlQWZpcC5pbm5lckhUTUwnLCBwcmljZUFmaXAuaW5uZXJIVE1MLCBcIiQ4OTEuOTZcIik7XHJcbiAgICAgICAgdXRpbHMuYXNzZXJ0RXF1YWxzKCdwcmljZUNvcnJlby5pbm5lckhUTUwnLCBwcmljZUNvcnJlby5pbm5lckhUTUwsIFwiJDEyMFwiKTtcclxuICAgICAgICB1dGlscy5hc3NlcnRFcXVhbHMoJ3ZhbFRvdGFsU3Bhbi5pbm5lckhUTUwnLCB2YWxUb3RhbFNwYW4uaW5uZXJIVE1MLCBcIjMyNDguODdcIik7XHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIC8vIGdldCB0aGUgdG90YWwgaW5kZXBlbmRlbnRseVxyXG4gICAgICAgIHZhciB2YWxQZXNvcyA9IGRhdGEudmFsQ29tcHJhICogZGF0YS5jdXJyZW5jeVVTRC5nZXRDdXJyZW50VmFsKCk7XHJcbiAgICAgICAgdmFyIHZhbEFmaXAgPSAoZGF0YS52YWxDb21wcmEgLSBkYXRhLnZhbEZyYW5jaGlzZSkgKiAwLjUgKiBkYXRhLmN1cnJlbmN5VVNELmdldEN1cnJlbnRWYWwoKTtcclxuICAgICAgICB2YWxBZmlwID0gZm9ybWF0UHJpY2UodmFsQWZpcCk7XHJcbiAgICAgICAgdmFyIHZhbENvcnJlbyA9IDEyMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgdmFyIHZhbFRvdGFsID0gZm9ybWF0UHJpY2UodmFsUGVzb3MgKyB2YWxBZmlwICsgdmFsQ29ycmVvKTtcclxuXHJcbiAgICAgICAgdXRpbHMuYXNzZXJ0RXF1YWxzKCd2YWxQZXNvcycsIHZhbFBlc29zLCAyMjM2LjkxNCk7XHJcbiAgICAgICAgdXRpbHMuYXNzZXJ0RXF1YWxzKCd2YWxBZmlwJywgdmFsQWZpcCwgODkxLjk2KTtcclxuICAgICAgICB1dGlscy5hc3NlcnRFcXVhbHMoJ3ZhbFRvdGFsJywgdmFsVG90YWwsIDMyNDguODcpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHV0aWxzLmFzc2VydEVxdWFscygnZGF0YS52YWxUb3RhbCcsIGRhdGEudmFsVG90YWwsIHZhbFRvdGFsKTtcclxuXHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKCctLS0tLS0tLS0gVEVTVCAyIC0tLS0tLS0tLScpO1xyXG5cclxuICAgICAgICBkYXRhLnZhbENvbXByYSA9IDQyLjQyO1xyXG4gICAgICAgIHByaWNlQ29tcHJhSW5wdXQudmFsdWUgPSBkYXRhLnZhbENvbXByYTtcclxuICAgICAgICBkYXRhLmN1cnJlbmN5ID0gZGF0YS5jdXJyZW5jeUVVUjtcclxuICAgICAgICBkYXRhLmN1cnJlbmN5RVVSLnNldEN1cnJlbnRWYWwoMjIuNTQpO1xyXG4gICAgICAgIGRhdGEuZ2VzdGlvbkNvcnJlbyA9IDEyMDtcclxuICAgICAgICBkYXRhLnZhbEZyYW5jaGlzZSA9IDI1O1xyXG5cclxuICAgICAgICBkYXRhLnNob3dBZmlwID0gdHJ1ZTtcclxuICAgICAgICBkYXRhLnNob3dDb3JyZW8gPSB0cnVlO1xyXG4gICAgICAgIGRhdGEudXNlRnJhbmNoaXNlID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHVwZGF0ZVRvdGFsKCk7XHJcblxyXG4gICAgICAgIC8vIGZvcmNlIHJlbmRlclxyXG4gICAgICAgIGFwcC5kYXRhLiRtb3VudCgpO1xyXG5cclxuICAgICAgICB1dGlscy5hc3NlcnRFcXVhbHMoJ2N1cnJlbmN5Q29udmVyc2lvblRleHQuaW5uZXJIVE1MJywgY3VycmVuY3lDb252ZXJzaW9uVGV4dC5pbm5lckhUTUwsIFwiJDk1Ni4xNVwiKTtcclxuICAgICAgICB1dGlscy5hc3NlcnRFcXVhbHMoJ3ByaWNlQWZpcC5pbm5lckhUTUwnLCBwcmljZUFmaXAuaW5uZXJIVE1MLCBcIiQ0NzguMDdcIik7XHJcbiAgICAgICAgdXRpbHMuYXNzZXJ0RXF1YWxzKCdwcmljZUNvcnJlby5pbm5lckhUTUwnLCBwcmljZUNvcnJlby5pbm5lckhUTUwsIFwiJDEyMFwiKTtcclxuICAgICAgICB1dGlscy5hc3NlcnRFcXVhbHMoJ3ZhbFRvdGFsU3Bhbi5pbm5lckhUTUwnLCB2YWxUb3RhbFNwYW4uaW5uZXJIVE1MLCBcIjE1NTQuMjJcIik7XHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIC8vIGdldCB0aGUgdG90YWwgaW5kZXBlbmRlbnRseVxyXG4gICAgICAgIHZhbFBlc29zID0gZGF0YS52YWxDb21wcmEgKiBkYXRhLmN1cnJlbmN5LmdldEN1cnJlbnRWYWwoKTtcclxuICAgICAgICB2YWxBZmlwID0gdmFsUGVzb3MgKiAwLjU7XHJcbiAgICAgICAgdmFsQ29ycmVvID0gMTIwO1xyXG4gICAgICAgIFxyXG5cclxuICAgICAgICB2YWxUb3RhbCA9IHZhbFBlc29zICsgdmFsQWZpcCArIHZhbENvcnJlbztcclxuXHJcbiAgICAgICAgdXRpbHMuYXNzZXJ0RXF1YWxzKCd2YWxQZXNvcycsIHZhbFBlc29zLCA5NTYuMTQ2OCk7XHJcbiAgICAgICAgdXRpbHMuYXNzZXJ0RXF1YWxzKCd2YWxBZmlwJywgdmFsQWZpcCwgNDc4LjA3MzQpO1xyXG4gICAgICAgIHV0aWxzLmFzc2VydEVxdWFscygndmFsVG90YWwnLCB2YWxUb3RhbCwgMTU1NC4yMjAyKTtcclxuICAgICAgICBcclxuICAgICAgICB1dGlscy5hc3NlcnRFcXVhbHMoJ2RhdGEudmFsQWZpcCcsIGRhdGEudmFsQWZpcCwgZm9ybWF0UHJpY2UodmFsQWZpcCkpO1xyXG4gICAgICAgIHV0aWxzLmFzc2VydEVxdWFscygnZGF0YS52YWxUb3RhbCcsIGRhdGEudmFsVG90YWwsIGZvcm1hdFByaWNlKHZhbFRvdGFsKSk7XHJcblxyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygnPDw8PDw8PDw8PDw8PDw8PDwgQ2FsY3VsYXRvciAtIHJ1blRlc3RzKCkgLSBFTkRFRCA+Pj4+Pj4+Pj4+Pj4+Pj4+Jyk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG4iLCJpbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMnO1xyXG5pbXBvcnQgYXBwIGZyb20gJy4uL2FwcCc7XHJcbmltcG9ydCBDdXJyZW5jeVVwZGF0ZXIgZnJvbSAnLi9jdXJyZW5jeVVwZGF0ZXInO1xyXG5cclxudmFyIEN1cnJlbmN5ID0gZnVuY3Rpb24oaWQpe1xyXG5cclxuICAgIGxvZygnQ3VycmVuY3koKSAtIGlkOicsIGlkKTtcclxuXHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgX2luZGV4ID0gLTE7XHJcbiAgICB2YXIgaWQgPSBpZDtcclxuICAgIHZhciBuYW1lID0gJy0xJztcclxuICAgIHZhciBjdXJyZW50VmFsID0gMDtcclxuICAgIHZhciBmYWxsYmFja1ZhbCA9IC0xO1xyXG4gICAgdmFyIHVwZGF0ZWRWYWwgPSAtMTtcclxuICAgIHZhciBjdXN0b21WYWwgPSAtMTtcclxuICAgIHZhciBsYXN0RmFsbGJhY2tWYWxEYXRlID0gLTE7ICAgIFxyXG4gICAgdmFyIGxhc3RVcGRhdGVEYXRlID0gLTE7ICAgIFxyXG4gICAgdmFyIGxhc3RDdXN0b21WYWxEYXRlID0gLTE7XHJcbiAgICB2YXIgX3VzZXNDdXN0b21WYWwgPSBmYWxzZTtcclxuICAgIHZhciBxdWVyeVVybCA9ICcnO1xyXG4gICAgdmFyIGlzU2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgIHZhciBjdXJyZW5jeVVwZGF0ZXI7XHJcblxyXG4gICAgdGhpcy5nZXROYW1lID0gZnVuY3Rpb24oKXtcclxuICAgICAgICByZXR1cm4gbmFtZTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5nZXRJZCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgcmV0dXJuIGlkO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdGhpcy5nZXRDdXJyZW50VmFsID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgbG9nKCdDdXJyZW5jeSAtIGdldEN1cnJlbnRWYWwoKScsIGlkLCBjdXJyZW50VmFsKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRWYWw7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zZXRDdXJyZW50VmFsID0gZnVuY3Rpb24odmFsKXtcclxuXHJcbiAgICAgICAgbG9nKCdDdXJyZW5jeSAtIHNldEN1cnJlbnRWYWwoKScsIGlkLCB2YWwpO1xyXG5cclxuICAgICAgICB2YWwgPSBhcHBseU9mZnNldCh2YWwpO1xyXG5cclxuICAgICAgICBjdXJyZW50VmFsID0gdmFsO1xyXG5cclxuICAgICAgICB1cGRhdGVTZWxlY3RPcHRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBhcHBseU9mZnNldCh2YWwpe1xyXG5cclxuICAgICAgICBpZihpZCA9PSAnQVJTJyl7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgb2Zmc2V0ID0gYXBwLmRhdGEuY3VycmVuY3lPZmZzZXQ7XHJcblxyXG4gICAgICAgIGlmKCFfdXNlc0N1c3RvbVZhbCAmJiBvZmZzZXQgIT0gMCl7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZih1cGRhdGVkVmFsID09IC0xKXtcclxuICAgICAgICAgICAgICAgIHZhbCA9IGZhbGxiYWNrVmFsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICB2YWwgPSB1cGRhdGVkVmFsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZihvZmZzZXQgPj0gLTUwICYmIG9mZnNldCA8PSA1MCl7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gb2Zmc2V0IGlzIGEgcGVyY2VudGFnZSwgc28gaXQgc2hvdWxkIGJlIGRpdmlkZWQgYnkgMTAwIGFuZCBhZGRlZCB0byAxXHJcbiAgICAgICAgICAgICAgICAvLyBlLmcuOiAxNy40ICogKDEgKyAyIC8gMTAwKSAgID09PT4gMTcuNCAqIDEuMDJcclxuICAgICAgICAgICAgICAgIHZhbCAqPSAxICsgb2Zmc2V0IC8gMTAwO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhbCA9IHV0aWxzLmZvcm1hdEN1cnJlbmN5KHZhbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgbG9nKCdDdXJyZW5jeSAtIHNldEN1cnJlbnRWYWwoKSBhcHBsaWVkIG9mZnNldC4gaWQ6JywgaWQsICd2YWw6JywgdmFsLCAnb2Zmc2V0OicsIG9mZnNldCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB2YWw7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRoaXMucmVmcmVzaCA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgIGxvZygnQ3VycmVuY3kgLSByZWZyZXNoKCknLCBpZCk7XHJcblxyXG4gICAgICAgIHZhciB2YWwgPSAtMTtcclxuXHJcbiAgICAgICAgaWYoX3VzZXNDdXN0b21WYWwpe1xyXG4gICAgICAgICAgICB2YWwgPSBjdXN0b21WYWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcblxyXG4gICAgICAgICAgICBpZih1cGRhdGVkVmFsID09IC0xKXtcclxuICAgICAgICAgICAgICAgIHZhbCA9IGZhbGxiYWNrVmFsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICB2YWwgPSB1cGRhdGVkVmFsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNldEN1cnJlbnRWYWwodmFsKTtcclxuICAgIH07ICAgXHJcblxyXG4gICAgdGhpcy5zZXRBdXRvTW9kZSA9IGZ1bmN0aW9uICh1c2VzQ3VzdG9tVmFsKXtcclxuXHJcbiAgICAgICAgbG9nKCdDdXJyZW5jeSAtIHNldEF1dG9Nb2RlKCknLCBpZCwgdXNlc0N1c3RvbVZhbCk7XHJcblxyXG4gICAgICAgIF91c2VzQ3VzdG9tVmFsID0gdXNlc0N1c3RvbVZhbDtcclxuXHJcbiAgICAgICAgaWYoX3VzZXNDdXN0b21WYWwpe1xyXG5cclxuICAgICAgICAgICAgaWYoY3VzdG9tVmFsID09IC0xKXtcclxuICAgICAgICAgICAgICAgIGN1c3RvbVZhbCA9IHNlbGYuZ2V0Q3VycmVudFZhbCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsYXN0Q3VzdG9tVmFsRGF0ZSA9IERhdGUubm93KCk7XHJcblxyXG4gICAgICAgICAgICBzZWxmLnNldEN1cnJlbnRWYWwoY3VzdG9tVmFsKTsgICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuXHJcbiAgICAgICAgICAgIGlmKHVwZGF0ZWRWYWwgPiAtMSl7XHJcblxyXG4gICAgICAgICAgICAgICAgc2VsZi5zZXRDdXJyZW50VmFsKHVwZGF0ZWRWYWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICBsb2coJ0N1cnJlbmN5IC0gc2V0QXV0b01vZGUoKSAtIHVzaW5nIGZhbGxiYWNrVmFsJywgaWQsIHVzZXNDdXN0b21WYWwsIGZhbGxiYWNrVmFsKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuc2V0Q3VycmVudFZhbChmYWxsYmFja1ZhbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNlbGYuc2F2ZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnNldEN1c3RvbVZhbCA9IGZ1bmN0aW9uKHZhbCl7XHJcblxyXG4gICAgICAgIGN1c3RvbVZhbCA9IHZhbDtcclxuXHJcbiAgICAgICAgc2VsZi5zZXRDdXJyZW50VmFsKGN1c3RvbVZhbCk7XHJcblxyXG4gICAgICAgIHNlbGYuc2F2ZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnNldFNlbGVjdGVkU3RhdGUgPSBmdW5jdGlvbih2YWwpe1xyXG4gICAgICAgIGlzU2VsZWN0ZWQgPSB2YWw7XHJcblxyXG4gICAgICAgIGlmKGlzU2VsZWN0ZWQpe1xyXG5cclxuICAgICAgICAgICAgaWYoaWQgIT0gJ0FSUycpe1xyXG4gICAgICAgICAgICAgICAgY3VycmVuY3lVcGRhdGVyLndha2VVcCgpO1xyXG4gICAgICAgICAgICB9ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIGN1cnJlbmN5VXBkYXRlci5zbGVlcCgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG5cclxuICAgIHRoaXMuZ2V0TGFzdFVwZGF0ZURhdGUgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIHJldHVybiBsYXN0VXBkYXRlRGF0ZTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5nZXRMYXN0VXBkYXRlRGF0ZVJlYWRhYmxlID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgaWYobGFzdFVwZGF0ZURhdGUgPT0gLTEpe1xyXG4gICAgICAgICAgICByZXR1cm4gJy0xJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShsYXN0VXBkYXRlRGF0ZSkudG9Mb2NhbGVTdHJpbmcoJ2VzLUFSJyk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzLmdldEhhc0N1c3RvbVZhbCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgcmV0dXJuIF91c2VzQ3VzdG9tVmFsO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmdldEluZGV4ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICByZXR1cm4gX2luZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMubG9hZCA9IGZ1bmN0aW9uKGluZGV4KXtcclxuXHJcbiAgICAgICAgX2luZGV4ID0gaW5kZXg7XHJcblxyXG4gICAgICAgIC8vIGxvYWQgZnJvbSBjb25maWcuanNcclxuICAgICAgICB2YXIgZGF0YSA9IGFwcC5jb25maWcuY3VycmVuY2llc1tfaW5kZXhdO1xyXG5cclxuICAgICAgICBsb2coJ0N1cnJlbmN5IC0gbG9hZCgpIGRhdGEuaWQnLCBkYXRhLmlkKTtcclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYoaWQgIT0gZGF0YS5pZCl7XHJcblxyXG4gICAgICAgICAgICB2YXIgZXJyb3JNc2cgPSAnQ3VycmVuY3kgLSBsb2FkKCkgLSBleHBlY3RlZCBpZDogXCInICsgaWQgKyAnXCIgZG9lc250IG1hdGNoIGRhdGEuaWQ6IFwiJyArIGRhdGEuaWQgKyAnXCInO1xyXG4gICAgICAgICAgICBsb2coZXJyb3JNc2cpO1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNc2cpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbmFtZSA9IGRhdGEubmFtZTtcclxuICAgICAgICBmYWxsYmFja1ZhbCA9IGRhdGEudmFsO1xyXG4gICAgICAgIGxhc3RVcGRhdGVEYXRlID0gZGF0YS5sYXN0VXBkYXRlO1xyXG4gICAgICAgIGxhc3RGYWxsYmFja1ZhbERhdGUgPSBkYXRhLmxhc3RVcGRhdGU7XHJcbiAgICAgICAgcXVlcnlVcmwgPSBhcHAuY29uZmlnLmN1cnJlbmN5UXVlcnlVcmwucmVwbGFjZSgnezF9JywgaWQpO1xyXG5cclxuICAgICAgICBjdXJyZW5jeVVwZGF0ZXIgPSBuZXcgQ3VycmVuY3lVcGRhdGVyKGlkLCBxdWVyeVVybCwgb25VcGRhdGVSZWFkeSk7XHJcblxyXG4gICAgICAgIHNlbGYuc2V0Q3VycmVudFZhbChmYWxsYmFja1ZhbCk7XHJcblxyXG4gICAgICAgIFxyXG5cclxuICAgICAgICAvLyBsb2FkIGZyb20gbG9jYWxTdG9yYWdlXHJcbiAgICAgICAgdmFyIHNhdmVkRGF0YSA9IHV0aWxzLmdldFNhdmVkSXRlbShpZCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYoIXNhdmVkRGF0YSB8fCBzYXZlZERhdGEuaWQgIT0gaWQpe1xyXG4gICAgICAgICAgICBsb2coJ0N1cnJlbmN5IC0gbG9hZCgpIC0gbm8gc2F2ZWQgZGF0YScsIHNhdmVkRGF0YSwgaWQpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB1cGRhdGVkVmFsID0gc2F2ZWREYXRhLnVwZGF0ZWRWYWw7XHJcbiAgICAgICAgY3VzdG9tVmFsID0gc2F2ZWREYXRhLmN1c3RvbVZhbDtcclxuICAgICAgICBsYXN0VXBkYXRlRGF0ZSA9IHNhdmVkRGF0YS5sYXN0VXBkYXRlRGF0ZTtcclxuICAgICAgICBsYXN0Q3VzdG9tVmFsRGF0ZSA9IHNhdmVkRGF0YS5sYXN0Q3VzdG9tVmFsRGF0ZTtcclxuICAgICAgICBfdXNlc0N1c3RvbVZhbCA9IHNhdmVkRGF0YS51c2VzQ3VzdG9tVmFsO1xyXG5cclxuICAgICAgICBsb2coJ0N1cnJlbmN5IC0gbG9hZCgpIC0gbG9hZGluZzonLCB1cGRhdGVkVmFsLCBjdXN0b21WYWwsIGxhc3RVcGRhdGVEYXRlLCBsYXN0Q3VzdG9tVmFsRGF0ZSwgX3VzZXNDdXN0b21WYWwpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmKF91c2VzQ3VzdG9tVmFsID09IGZhbHNlKXtcclxuXHJcbiAgICAgICAgICAgIGlmKHVwZGF0ZWRWYWwgPiAtMSAmJlxyXG4gICAgICAgICAgICAgICAgbGFzdFVwZGF0ZURhdGUgPiAtMSAmJlxyXG4gICAgICAgICAgICAgICAgbGFzdFVwZGF0ZURhdGUgPiBsYXN0RmFsbGJhY2tWYWxEYXRlKXtcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgIGxvZygnQ3VycmVuY3kgLSBsb2FkKCkgLSBsb2FkZWQgc3VjY2Vzc2Z1bGx5LiBzZXR0aW5nIHVwZGF0ZWRWYWw6JywgdXBkYXRlZFZhbCk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNldEN1cnJlbnRWYWwodXBkYXRlZFZhbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgIGxvZygnQ3VycmVuY3kgLSBsb2FkKCkgLSBGQUlMRUQgdG8gbG9hZDonLCBpZCwgdXBkYXRlZFZhbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuXHJcbiAgICAgICAgICAgIGlmKGN1c3RvbVZhbCA+IC0xKXtcclxuICAgICAgICAgICAgICAgIHNlbGYuc2V0Q3VycmVudFZhbChjdXN0b21WYWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAvLyB3ZSBrZWVwIHVzaW5nIHRoZSBmYWxsYmFja1ZhbCB0aGF0IHdlIGp1c3Qgc2V0XHJcbiAgICAgICAgICAgICAgICBfdXNlc0N1c3RvbVZhbCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIHNlbGYuc2F2ZSgpO1xyXG4gICAgICAgICAgICB9ICAgICAgICAgICAgXHJcbiAgICAgICAgfTsgICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgdGhpcy5zYXZlID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgbG9nKCdDdXJyZW5jeSAtIHNhdmUoKScsIGlkKTtcclxuXHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oaWQsIGdldFNhdmVEYXRhKCkpO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXRTYXZlRGF0YSgpe1xyXG5cclxuICAgICAgICB2YXIgZGF0YSA9IFxyXG4gICAgICAgICAgICB7aWQ6aWQsIFxyXG4gICAgICAgICAgICB1cGRhdGVkVmFsOnVwZGF0ZWRWYWwsIFxyXG4gICAgICAgICAgICBjdXN0b21WYWw6Y3VzdG9tVmFsLCBcclxuICAgICAgICAgICAgbGFzdFVwZGF0ZURhdGU6bGFzdFVwZGF0ZURhdGUsIFxyXG4gICAgICAgICAgICBsYXN0Q3VzdG9tVmFsRGF0ZTpsYXN0Q3VzdG9tVmFsRGF0ZSwgXHJcbiAgICAgICAgICAgIHVzZXNDdXN0b21WYWw6X3VzZXNDdXN0b21WYWx9O1xyXG5cclxuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy51cGRhdGUgPSBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICBsb2coJ0N1cnJlbmN5IC0gdXBkYXRlKCknLCBpZCk7XHJcblxyXG4gICAgICAgIGN1cnJlbmN5VXBkYXRlci51cGRhdGUoKTtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gdXBkYXRlU2VsZWN0T3B0aW9uKCl7XHJcblxyXG4gICAgICAgIGxvZygnQ3VycmVuY3kgLSB1cGRhdGVTZWxlY3RPcHRpb24oKSAtICcgKyBpZCk7XHJcblxyXG4gICAgICAgIHN3aXRjaChpZCl7XHJcblxyXG4gICAgICAgICAgICBjYXNlICdVU0QnOlxyXG4gICAgICAgICAgICAgICAgYXBwLmRhdGEuc2VsZWN0T3B0aW9uVVNEID0gJ1VTRCAoRMOzbGFyKSAtICQnICsgU3RyaW5nKHNlbGYuZ2V0Q3VycmVudFZhbCgpKSArIChzZWxmLmdldEhhc0N1c3RvbVZhbCgpID8gJyonIDogJycpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ0VVUic6XHJcbiAgICAgICAgICAgICAgICBhcHAuZGF0YS5zZWxlY3RPcHRpb25FVVIgPSAnRVVSIChFdXJvKSAtICQnICsgU3RyaW5nKHNlbGYuZ2V0Q3VycmVudFZhbCgpKSArIChzZWxmLmdldEhhc0N1c3RvbVZhbCgpID8gJyonIDogJycpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ0dCUCc6XHJcbiAgICAgICAgICAgICAgICBhcHAuZGF0YS5zZWxlY3RPcHRpb25HQlAgPSAnR0JQIChMaWJyYSkgLSAkJyArIFN0cmluZyhzZWxmLmdldEN1cnJlbnRWYWwoKSkgKyAoc2VsZi5nZXRIYXNDdXN0b21WYWwoKSA/ICcqJyA6ICcnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBvblVwZGF0ZVJlYWR5KHVwZGF0ZSl7XHJcblxyXG4gICAgICAgIGxvZygnQ3VycmVuY3kgLSBvblVwZGF0ZVJlYWR5KCknLCB1cGRhdGUuaWQsIHVwZGF0ZS52YWx1ZSwgdXBkYXRlLmRhdGUpO1xyXG4gICAgICAgIFxyXG5cclxuICAgICAgICBpZih1cGRhdGUuaWQgIT0gaWQpe1xyXG5cclxuICAgICAgICAgICAgbG9nKCdDdXJyZW5jeSAtIG9uVXBkYXRlUmVhZHkoKSAtIGlkcyBkb250IG1hdGNoOicsIHVwZGF0ZS5pZCwgaWQpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih1cGRhdGUuZGF0ZSA+IGxhc3RVcGRhdGVEYXRlKXtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGxhc3RVcGRhdGVEYXRlID0gdXBkYXRlLmRhdGU7XHJcbiAgICAgICAgICAgIHVwZGF0ZWRWYWwgPSB1cGRhdGUudmFsdWU7XHJcbiAgICBcclxuICAgICAgICAgICAgbG9nKCdDdXJyZW5jeSAtIG9uVXBkYXRlUmVhZHkoKSAtIHN1Y2Nlc3MnLCBpZCk7XHJcbiAgICBcclxuICAgICAgICAgICAgaWYoIV91c2VzQ3VzdG9tVmFsKXtcclxuICAgICAgICAgICAgICAgIHNlbGYuc2V0Q3VycmVudFZhbCh1cGRhdGVkVmFsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIHNlbGYuc2F2ZSgpO1xyXG5cclxuICAgICAgICAgICAgYXBwLmN1cnJlbmN5VXBkYXRlZC5kaXNwYXRjaChzZWxmKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgbG9nKCdDdXJyZW5jeSAtIG9uVXBkYXRlUmVhZHkoKSAtIHVwZGF0ZS5kYXRlIGlzIG9sZGVyIHRoYW46JywgZ2V0TGFzdFVwZGF0ZURhdGUoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ3VycmVuY3k7IiwiaW1wb3J0IGFwcCBmcm9tICcuLi9hcHAnO1xyXG5cclxuaW1wb3J0IHV0aWxzIGZyb20gJy4uL3V0aWxzJztcclxuXHJcblxyXG52YXIgQ3VycmVuY3lNYW5hZ2VyID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICBsb2coJ0N1cnJlbmN5TWFuYWdlcigpJyk7XHJcblxyXG4gICAgXHJcblxyXG4gICAgZnVuY3Rpb24gaW5pdCgpe1xyXG5cclxuICAgICAgICBsb2coJ0N1cnJlbmN5TWFuYWdlciAtIGluaXQoKScpO1xyXG5cclxuICAgICAgICAvLyBkb24ndCBpbmNsdWRlIEFSUyAoYXMgaXQgc2hvdWxkbid0IGJlIGluIENvbmZpZ3VyYWNpw7NuKVxyXG4gICAgICAgIGFwcC5kYXRhLmN1cnJlbmNpZXMucHVzaChhcHAuZGF0YS5jdXJyZW5jeVVTRCwgYXBwLmRhdGEuY3VycmVuY3lFVVIsIGFwcC5kYXRhLmN1cnJlbmN5R0JQKTsgXHJcblxyXG4gICAgICAgIGFwcC5kYXRhLmN1cnJlbmN5VVNELmxvYWQoMCk7XHJcbiAgICAgICAgYXBwLmRhdGEuY3VycmVuY3lFVVIubG9hZCgxKTtcclxuICAgICAgICBhcHAuZGF0YS5jdXJyZW5jeUdCUC5sb2FkKDIpO1xyXG4gICAgICAgIGFwcC5kYXRhLmN1cnJlbmN5QVJTLmxvYWQoMyk7XHJcblxyXG4gICAgICAgIFxyXG5cclxuICAgICAgICB2YXIgc2VsZWN0ZWRDdXJyZW5jeUlkID0gdXRpbHMuZ2V0U2F2ZWRJdGVtKCdzZWxlY3RlZEN1cnJlbmN5SWQnKTtcclxuXHJcbiAgICAgICAgaWYoc2VsZWN0ZWRDdXJyZW5jeUlkID09IG51bGwgfHwgc2VsZWN0ZWRDdXJyZW5jeUlkID09IHVuZGVmaW5lZCB8fCBzZWxlY3RlZEN1cnJlbmN5SWQgPT0gJycpe1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgc2VsZWN0ZWRDdXJyZW5jeUlkID0gYXBwLmNvbmZpZy5kZWZhdWx0Q3VycmVuY3lJZDtcclxuXHJcbiAgICAgICAgICAgIHV0aWxzLnRyYWNrKCdTZXR0aW5ncycsICdsb2FkZWQnLCAnc2VsZWN0ZWRDdXJyZW5jeUlkJywgc2VsZWN0ZWRDdXJyZW5jeUlkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGFwcC5kYXRhLmN1cnJlbmN5ID0gZ2V0Q3VycmVuY3lCeUlkKHNlbGVjdGVkQ3VycmVuY3lJZCk7XHJcblxyXG4gICAgICAgICQoJyNjdXJyZW5jeS1zZWxlY3QnKS5wcm9wKCdzZWxlY3RlZEluZGV4JywgYXBwLmRhdGEuY3VycmVuY3kuZ2V0SW5kZXgoKSk7XHJcblxyXG4gICAgICAgIGFwcC5kYXRhLmN1cnJlbmN5LnNldFNlbGVjdGVkU3RhdGUodHJ1ZSk7XHJcblxyXG4gICAgICAgIGxvZygnQ3VycmVuY3lNYW5hZ2VyIC0gaW5pdCgpIC0gYXBwLmRhdGEuY3VycmVuY3kuZ2V0SWQoKTonLCBhcHAuZGF0YS5jdXJyZW5jeS5nZXRJZCgpKTtcclxuXHJcblxyXG4gICAgICAgIGFwcC5jdXJyZW5jeVNsaWRlclRvZ2dsZWQuYWRkKG9uQ3VycmVuY3lTbGlkZXJUb2dnbGVkKTtcclxuICAgICAgICBhcHAuY3VycmVuY3lNb2RpZmllZC5hZGQob25DdXJyZW5jeU1vZGlmaWVkKTtcclxuICAgICAgICBhcHAuY3VycmVuY3lPZmZzZXRUb2dnbGVkLmFkZChvbkN1cnJlbmN5T2Zmc2V0VG9nZ2xlZCk7XHJcbiAgICAgICAgYXBwLmN1cnJlbmN5T2Zmc2V0TW9kaWZpZWQuYWRkKG9uQ3VycmVuY3lPZmZzZXRNb2RpZmllZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gb25DdXJyZW5jeU9mZnNldFRvZ2dsZWQoKXtcclxuXHJcbiAgICAgICAgYXBwLmRhdGEuY3VycmVuY2llcy5mb3JFYWNoKGZ1bmN0aW9uKGN1cnJlbmN5KXtcclxuICAgICAgICAgICAgY3VycmVuY3kucmVmcmVzaCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG9uQ3VycmVuY3lPZmZzZXRNb2RpZmllZCh2YWwpe1xyXG4gICAgICAgIG9uQ3VycmVuY3lPZmZzZXRUb2dnbGVkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy51cGRhdGVDdXJyZW5jeSA9IGZ1bmN0aW9uIChpZCl7XHJcblxyXG4gICAgICAgIHZhciBjdXJyZW5jeSA9IGdldEN1cnJlbmN5QnlJZChpZCk7XHJcblxyXG4gICAgICAgIGlmKGN1cnJlbmN5KXtcclxuICAgICAgICAgICAgY3VycmVuY3kudXBkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBvbkN1cnJlbmN5U2xpZGVyVG9nZ2xlZChkYXRhKXtcclxuXHJcbiAgICAgICAgdmFyIGN1cnJlbmN5ID0gZ2V0Q3VycmVuY3lCeUlkKGRhdGEuaWQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmKGN1cnJlbmN5KXtcclxuICAgICAgICAgICAgY3VycmVuY3kuc2V0QXV0b01vZGUoZGF0YS52YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSAgICBcclxuXHJcbiAgICBmdW5jdGlvbiBvbkN1cnJlbmN5TW9kaWZpZWQoZGF0YSl7XHJcblxyXG4gICAgICAgIHZhciBjdXJyZW5jeSA9IGdldEN1cnJlbmN5QnlJZChkYXRhLmlkKTtcclxuXHJcbiAgICAgICAgaWYoY3VycmVuY3kpe1xyXG4gICAgICAgICAgICBjdXJyZW5jeS5zZXRDdXN0b21WYWwoZGF0YS52YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRDdXJyZW5jeUJ5SWQoaWQpe1xyXG5cclxuICAgICAgICBsb2coJ0N1cnJlbmN5TWFuYWdlciAtIGdldEN1cnJlbmN5QnlJZCgpJywgaWQpO1xyXG5cclxuICAgICAgICBzd2l0Y2goaWQpe1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY2FzZSAnVVNEJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBhcHAuZGF0YS5jdXJyZW5jeVVTRDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNhc2UgJ0VVUic6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXBwLmRhdGEuY3VycmVuY3lFVVI7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjYXNlICdHQlAnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFwcC5kYXRhLmN1cnJlbmN5R0JQO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY2FzZSAnQVJTJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBhcHAuZGF0YS5jdXJyZW5jeUFSUztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ3VycmVuY3lNYW5hZ2VyIC0gZ2V0Q3VycmVuY3lCeUlkKCkgLSB1bnJlY29nbml6ZWQgY3VycmVuY3kgaWQ6JyArIGlkKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHRoaXMub25DdXJyZW5jeVNlbGVjdGVkID0gIGZ1bmN0aW9uKGUpe1xyXG5cclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICBpZihlID09IG51bGwgfHwgZS50YXJnZXQuc2VsZWN0ZWRJbmRleCA9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0N1cnJlbmN5TWFuYWdlciAtIG9uQ3VycmVuY3lTZWxlY3RlZCgpJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgaWQgPSBhcHAuY29uZmlnLmN1cnJlbmNpZXNbZS50YXJnZXQuc2VsZWN0ZWRJbmRleF0uaWQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbG9nKCdDdXJyZW5jeU1hbmFnZXIgLSBvbkN1cnJlbmN5U2VsZWN0ZWQoKScsIGlkKTtcclxuXHJcbiAgICAgICAgdmFyIHNlbGVjdGVkQ3VycmVuY3kgPSBnZXRDdXJyZW5jeUJ5SWQoaWQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmKCFzZWxlY3RlZEN1cnJlbmN5IHx8IHNlbGVjdGVkQ3VycmVuY3kgPT0gYXBwLmRhdGEuY3VycmVuY3kpe1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhcHAuZGF0YS5jdXJyZW5jeS5zZXRTZWxlY3RlZFN0YXRlKGZhbHNlKTtcclxuXHJcbiAgICAgICAgYXBwLmRhdGEuY3VycmVuY3kgPSBzZWxlY3RlZEN1cnJlbmN5O1xyXG5cclxuICAgICAgICBhcHAuZGF0YS5jdXJyZW5jeS5zZXRTZWxlY3RlZFN0YXRlKHRydWUpO1xyXG5cclxuICAgICAgICBhcHAuY3VycmVuY3lTZWxlY3RlZC5kaXNwYXRjaCgpO1xyXG5cclxuICAgICAgICBhcHAuc2F2ZVNldHRpbmdSZXF1ZXN0ZWQuZGlzcGF0Y2goe25hbWU6J3NlbGVjdGVkQ3VycmVuY3lJZCcsIHZhbHVlOmlkfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5vbkN1cnJlbmN5TW9kaWZpZWQgPSBmdW5jdGlvbihldmVudCwgaWQpe1xyXG5cclxuXHJcbiAgICB9O1xyXG5cclxuICAgIGluaXQoKTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ3VycmVuY3lNYW5hZ2VyOyIsIi8qXHJcbk1JVCBMaWNlbnNlXHJcblxyXG5Db3B5cmlnaHQgKGMpIDIwMTcgSXZvIENhc3NcclxuXHJcblBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcclxub2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxyXG5pbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXHJcbnRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcclxuY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXHJcbmZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XHJcblxyXG5UaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGxcclxuY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcclxuSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXHJcbkZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxyXG5BVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXHJcbkxJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXHJcbk9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFXHJcblNPRlRXQVJFLlxyXG4qL1xyXG5cclxuaW1wb3J0IGFwcCBmcm9tICcuLi9hcHAnO1xyXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMnO1xyXG5cclxudmFyIEN1cnJlbmN5VXBkYXRlciA9IGZ1bmN0aW9uKGlkLCBxdWVyeVVybCwgb25VcGRhdGVTdWNjZXNzZnVsLCBvblVwZGF0ZUVycm9yKXtcclxuICAgIFxyXG4gICAgbG9nKCdDdXJyZW5jeVVwZGF0ZXIoKSAtIGlkOicsIGlkLCAncXVlcnlVcmw6JywgcXVlcnlVcmwpO1xyXG5cclxuICAgIHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgIHZhciB0aW1lcklkID0gJyc7XHJcbiAgICB2YXIgc2xlZXBpbmcgPSB0cnVlO1xyXG5cclxuICAgIHRoaXMud2FrZVVwID0gZnVuY3Rpb24oKXtcclxuICAgICAgICBcclxuICAgICAgICBsb2coJ0N1cnJlbmN5VXBkYXRlcigpIC0gd2FrZVVwKCknLCBpZCwgYXBwLmNvbmZpZy51cGRhdGVDdXJyZW5jeSk7XHJcblxyXG4gICAgICAgIGlmKCFhcHAuY29uZmlnLnVwZGF0ZUN1cnJlbmN5KXtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2VuZFJlcXVlc3QoKTtcclxuXHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcklkKTtcclxuICAgICAgICB0aW1lcklkID0gc2V0SW50ZXJ2YWwoc2VuZFJlcXVlc3QsIGFwcC5jb25maWcuY3VycmVuY3lVcGRhdGVJbnRlcnZhbCk7XHJcbiAgICAgICAgc2xlZXBpbmcgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNsZWVwID0gZnVuY3Rpb24oKXtcclxuICAgICAgICBjbGVhckludGVydmFsKHRpbWVySWQpO1xyXG5cclxuICAgICAgICB0aW1lcklkID0gJyc7XHJcbiAgICAgICAgc2xlZXBpbmcgPSB0cnVlO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnVwZGF0ZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgc2VuZFJlcXVlc3QoKTtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gc2VuZFJlcXVlc3QoKXtcclxuXHJcbiAgICAgICAgbG9nKCdDdXJyZW5jeVVwZGF0ZXIoKSAtIHNlbmRSZXF1ZXN0KCkgLSBxdWVyeVVybDonLCBxdWVyeVVybCk7XHJcblxyXG4gICAgICAgIHJlcS5vcGVuKCdHRVQnLCBxdWVyeVVybCwgdHJ1ZSk7XHJcbiAgICAgICAgcmVxLnNlbmQoKTtcclxuICAgIH1cclxuXHJcbiAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKXtcclxuICAgICAgICBcclxuICAgICAgICBsb2coJ0N1cnJlbmN5VXBkYXRlcigpIC0gcmVxLm9ucmVhZHlzdGF0ZWNoYW5nZSgpJywgaWQsICdyZXEucmVhZHlTdGF0ZTonLCByZXEucmVhZHlTdGF0ZSk7XHJcblxyXG4gICAgICAgIGlmIChyZXEucmVhZHlTdGF0ZSA9PT0gWE1MSHR0cFJlcXVlc3QuRE9ORSkge1xyXG5cclxuICAgICAgICAgICAgbG9nKCdDdXJyZW5jeVVwZGF0ZXIoKSAtIHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UoKSAtIHJlcS5zdGF0dXM6JywgcmVxLnN0YXR1cylcclxuXHJcbiAgICAgICAgICAgIGlmIChyZXEuc3RhdHVzID09PSAyMDApIHtcclxuXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB4bWxEb2MgPSB1dGlscy5zdHJpbmdUb1hNTChyZXEucmVzcG9uc2VUZXh0KTsgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHZhciByYXRlID0geG1sRG9jLmRvY3VtZW50RWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnUmF0ZScpWzBdLmNoaWxkTm9kZXNbMF0ubm9kZVZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZighaXNOYU4ocmF0ZSkgJiYgcmF0ZSA+IDApe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmF0ZSA9IHBhcnNlRmxvYXQocmF0ZSkudG9GaXhlZCgyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uVXBkYXRlU3VjY2Vzc2Z1bCh7aWQ6aWQsIHZhbHVlOnJhdGUsIGRhdGU6RGF0ZS5ub3coKX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2goZXJyKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxvZygnQ3VycmVuY3lVcGRhdGVyKCkgLSByZXEub25yZWFkeXN0YXRlY2hhbmdlKCkgLSBlcnJvciBjYXVnaHQhIC0gcmVhc29uJywgZXJyLm5hbWUpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKG9uVXBkYXRlRXJyb3Ipe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25VcGRhdGVFcnJvcihcImVycm9yIGdldHRpbmcgcmF0ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0N1cnJlbmN5VXBkYXRlciAtIGVycm9yIGdldHRpbmcgcmF0ZScsIGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZihvblVwZGF0ZUVycm9yKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgb25VcGRhdGVFcnJvcihcImVycm9yIGdldHRpbmcgY3VycmVuY3lcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDdXJyZW5jeVVwZGF0ZXIgLSBlcnJvciBnZXR0aW5nIGN1cnJlbmN5Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBDdXJyZW5jeVVwZGF0ZXI7XHJcblxyXG4vKlxyXG5cclxuc2FtcGxlIHJlc3BvbnNlVGV4dFxyXG5cclxuPHF1ZXJ5IHhtbG5zOnlhaG9vPVwiaHR0cDovL3d3dy55YWhvb2FwaXMuY29tL3YxL2Jhc2Uucm5nXCIgeWFob286Y291bnQ9XCIxXCIgeWFob286Y3JlYXRlZD1cIjIwMTctMDgtMTFUMTg6MDc6NTJaXCIgeWFob286bGFuZz1cImVuLVVTXCI+XHJcbiAgICA8ZGlhZ25vc3RpY3M+XHJcbiAgICAgICAgPHVybCBleGVjdXRpb24tc3RhcnQtdGltZT1cIjFcIiBleGVjdXRpb24tc3RvcC10aW1lPVwiMlwiIGV4ZWN1dGlvbi10aW1lPVwiMVwiPjwhW0NEQVRBW2h0dHA6Ly93d3cuZGF0YXRhYmxlcy5vcmcveWFob28vZmluYW5jZS95YWhvby5maW5hbmNlLnhjaGFuZ2UueG1sXV0+PC91cmw+XHJcbiAgICAgICAgPHB1YmxpY2x5Q2FsbGFibGU+dHJ1ZTwvcHVibGljbHlDYWxsYWJsZT5cclxuICAgICAgICA8Y2FjaGUgZXhlY3V0aW9uLXN0YXJ0LXRpbWU9XCI0XCIgZXhlY3V0aW9uLXN0b3AtdGltZT1cIjRcIiBleGVjdXRpb24tdGltZT1cIjBcIiBtZXRob2Q9XCJHRVRcIiB0eXBlPVwiTUVNQ0FDSEVEXCI+PCFbQ0RBVEFbZTFiMjhmZDhhYjhhN2JmMjFhNTIxNjJmNDIwZjE0NDddXT48L2NhY2hlPlxyXG4gICAgICAgIDx1cmwgZXhlY3V0aW9uLXN0YXJ0LXRpbWU9XCI0XCIgZXhlY3V0aW9uLXN0b3AtdGltZT1cIjVcIiBleGVjdXRpb24tdGltZT1cIjFcIj48IVtDREFUQVtodHRwOi8vZG93bmxvYWQuZmluYW5jZS55YWhvby5jb20vZC9xdW90ZXMuY3N2P3M9VVNEQVJTPVgmYW1wO2Y9c25sMWQxdDFhYl1dPjwvdXJsPlxyXG4gICAgICAgIDxxdWVyeSBleGVjdXRpb24tc3RhcnQtdGltZT1cIjRcIiBleGVjdXRpb24tc3RvcC10aW1lPVwiNVwiIGV4ZWN1dGlvbi10aW1lPVwiMVwiPjwhW0NEQVRBW3NlbGVjdCAqIGZyb20gY3N2IHdoZXJlIHVybD0naHR0cDovL2Rvd25sb2FkLmZpbmFuY2UueWFob28uY29tL2QvcXVvdGVzLmNzdj9zPVVTREFSUz1YJmFtcDtmPXNubDFkMXQxYWInIGFuZCBjb2x1bW5zPSdTeW1ib2wsTmFtZSxSYXRlLERhdGUsVGltZSxBc2ssQmlkJ11dPjwvcXVlcnk+XHJcbiAgICAgICAgPGphdmFzY3JpcHQgZXhlY3V0aW9uLXN0YXJ0LXRpbWU9XCIyXCIgZXhlY3V0aW9uLXN0b3AtdGltZT1cIjVcIiBleGVjdXRpb24tdGltZT1cIjJcIiBpbnN0cnVjdGlvbnMtdXNlZD1cIjE4NjY4XCIgdGFibGUtbmFtZT1cInlhaG9vLmZpbmFuY2UueGNoYW5nZVwiIC8+XHJcbiAgICAgICAgPHVzZXItdGltZT42PC91c2VyLXRpbWU+XHJcbiAgICAgICAgPHNlcnZpY2UtdGltZT4yPC9zZXJ2aWNlLXRpbWU+XHJcbiAgICAgICAgPGJ1aWxkLXZlcnNpb24+Mi4wLjE2NDwvYnVpbGQtdmVyc2lvbj5cclxuICAgIDwvZGlhZ25vc3RpY3M+XHJcbiAgICA8cmVzdWx0cz5cclxuICAgICAgICA8cmF0ZSBpZD1cIlVTREFSU1wiPlxyXG4gICAgICAgICAgICA8TmFtZT5VU0QvQVJTPC9OYW1lPlxyXG4gICAgICAgICAgICA8UmF0ZT4xNy43MTUwPC9SYXRlPlxyXG4gICAgICAgICAgICA8RGF0ZT44LzExLzIwMTc8L0RhdGU+XHJcbiAgICAgICAgICAgIDxUaW1lPjU6NTBwbTwvVGltZT5cclxuICAgICAgICAgICAgPEFzaz4xNy43MjAwPC9Bc2s+XHJcbiAgICAgICAgICAgIDxCaWQ+MTcuNzE1MDwvQmlkPlxyXG4gICAgICAgIDwvcmF0ZT5cclxuICAgIDwvcmVzdWx0cz5cclxuPC9xdWVyeT5cclxuKi8iLCIgLypcclxuTUlUIExpY2Vuc2VcclxuXHJcbkNvcHlyaWdodCAoYykgMjAxNyBJdm8gQ2Fzc1xyXG5cclxuUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxyXG5vZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXHJcbmluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcclxudG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxyXG5jb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcclxuZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcclxuXHJcblRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluIGFsbFxyXG5jb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxyXG5JTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcclxuRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXHJcbkFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcclxuTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcclxuT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEVcclxuU09GVFdBUkUuXHJcbiovXHJcblxyXG4vKlxyXG5cclxuYWJvdXQ6IGxpZ2h0d2VpZ2h0IGxvZ2dlclxyXG5hdXRob3I6IGl2b2Nhc3NcclxuXHJcbnZlcnNpb246IDAuMTFcclxubGFzdCB1cGRhdGVkOiAyMDE3MDkwOFxyXG5cclxuLWRlc2NyaXB0aW9uOlxyXG5zdG9yZXMgbGluZXMgaW4gYW4gYXJyYXksIHRoZW4gZHVtcHMgdG8gY29uc29sZSB1cG9uIHJlcXVlc3QuXHJcbndoZW4gJ21heEVudHJpZXMnIGlzIHJlYWNoZWQsIGl0IHN0YXJ0cyBzdG9yaW5nIGZyb20gaW5kZXggMCBhZ2Fpbi5cclxuXHJcbi11c2FnZTpcclxubG9nKCdzb21lIG1lc3NhZ2UnKTtcclxubG9nKGlzVmFsaWQsIGFycmF5Lmxlbmd0aCwgbW9yZVBhcmFtcyk7XHJcbnRoZW4gaW4gdGhlIGNvbnNvbGU6IGxvZ2dlci5zaG93KClcclxuXHJcbiAqL1xyXG5cclxudmFyIExvZ2dlciA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGVuYWJsZWQgPSB0cnVlO1xyXG4gICAgdmFyIG1heEVudHJpZXMgPSAyMDAwO1xyXG5cclxuICAgIFxyXG4gICAgdmFyIGxvZ0hpc3RvcnkgPSBbXTtcclxuICAgIHZhciBsb2dIaXN0b3J5SW5kZXggPSAwO1xyXG4gICAgdmFyIGVudHJ5SWQgPSAwO1xyXG4gICAgXHJcblxyXG4gICAgZnVuY3Rpb24gaW5pdCgpe1xyXG5cclxuICAgICAgICB3aW5kb3cubG9nZ2VyID0gc2VsZjtcclxuXHJcbiAgICAgICAgd2luZG93LmxvZyA9IGxvZ0VudHJ5O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGxvZ0VudHJ5KCl7XHJcblxyXG4gICAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKS50b1N0cmluZygpO1xyXG5cclxuICAgICAgICBsb2dIaXN0b3J5W2xvZ0hpc3RvcnlJbmRleF0gPSBTdHJpbmcoZW50cnlJZCkgKyAnKSAnICsgYXJncztcclxuXHJcbiAgICAgICAgbG9nSGlzdG9yeUluZGV4Kys7XHJcbiAgICAgICAgZW50cnlJZCsrO1xyXG5cclxuICAgICAgICBpZihsb2dIaXN0b3J5SW5kZXggPT0gbWF4RW50cmllcyl7XHJcbiAgICAgICAgICAgIGxvZ0hpc3RvcnlJbmRleCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc2V0TWF4RW50cmllcyA9IGZ1bmN0aW9uKHZhbHVlKXtcclxuICAgICAgICBtYXhFbnRyaWVzID0gdmFsdWU7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZGlzYWJsZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgZW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgdGhpcy5zaG93ID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coJy0tLS0tLS0tLS0tLS0tLS0gTE9HIEJFR0lOUyAtLS0tLS0tLS0tLS0tLS0tJyk7XHJcblxyXG4gICAgICAgIC8vIFRPRE86IGlmIGxvZ0hpc3RvcnkubGVuZ3RoID4gbG9nSGlzdG9yeUluZGV4LCBzdGFydCBmcm9tIGxvZ0hpc3RvcnlJbmRleCArIDEsIHRoZW4gZ28gZnJvbSAwIHRvIGxvZ0hpc3RvcnlJbmRleFxyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsb2dIaXN0b3J5Lmxlbmd0aDsgaSsrKXtcclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGxvZ0hpc3RvcnlbaV0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coJy0tLS0tLS0tLS0tLS0tLS0gTE9HIEVORFMgLS0tLS0tLS0tLS0tLS0tLS0tJyk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICBpbml0KCk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IG5ldyBMb2dnZXIoKTtcclxuXHJcbiIsIi8qXHJcbk1JVCBMaWNlbnNlXHJcblxyXG5Db3B5cmlnaHQgKGMpIDIwMTcgSXZvIENhc3NcclxuXHJcblBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcclxub2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxyXG5pbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXHJcbnRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcclxuY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXHJcbmZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XHJcblxyXG5UaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGxcclxuY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcclxuSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXHJcbkZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxyXG5BVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXHJcbkxJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXHJcbk9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFXHJcblNPRlRXQVJFLlxyXG4qL1xyXG5cclxuaW1wb3J0IGFwcCBmcm9tICcuL2FwcCc7XHJcbmltcG9ydCB1dGlscyBmcm9tICcuL3V0aWxzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFNldHRpbmdzKCl7XHJcblxyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGRvbGFySW5wdXRDdXN0b207XHJcbiAgICBcclxuICAgIFxyXG4gICAgZnVuY3Rpb24gaW5pdCgpe1xyXG5cclxuICAgICAgICBcclxuICAgICAgICB2YXIgc2hvd0luZm9JY29ucyA9IHV0aWxzLmdldFNhdmVkSXRlbSgnc2hvd0luZm9JY29ucycpO1xyXG4gICAgICAgIHZhciBzaG93Q2hlY2tib3hlcyA9IHV0aWxzLmdldFNhdmVkSXRlbSgnc2hvd0NoZWNrYm94ZXMnKTtcclxuICAgICAgICB2YXIgdXNlRnJhbmNoaXNlID0gdXRpbHMuZ2V0U2F2ZWRJdGVtKCd1c2VGcmFuY2hpc2UnKTtcclxuICAgICAgICB2YXIgaXNPZmZzZXRDdXN0b20gPSB1dGlscy5nZXRTYXZlZEl0ZW0oJ2lzT2Zmc2V0Q3VzdG9tJyk7XHJcbiAgICAgICAgdmFyIGFsdGVybmF0aXZlRGVzaWduRW5hYmxlZCA9IHV0aWxzLmdldFNhdmVkSXRlbSgnYWx0ZXJuYXRpdmVEZXNpZ25FbmFibGVkJyk7XHJcblxyXG4gICAgICAgIFxyXG5cclxuICAgICAgICBkb2xhcklucHV0Q3VzdG9tID0gJCgnI2RvbGFyLWlucHV0LWN1c3RvbScpLmdldCgwKTtcclxuICAgICAgICBcclxuICAgICAgICBhcHAudmFsQ29tcHJhID0gYXBwLmNvbmZpZy5kZWZhdWx0UHVyY2hhc2U7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gaXQgbWF5IGJlIG51bGwsIHRydWUsIGZhbHNlXHJcbiAgICAgICAgaWYoYWx0ZXJuYXRpdmVEZXNpZ25FbmFibGVkID09PSBudWxsKSBhbHRlcm5hdGl2ZURlc2lnbkVuYWJsZWQgPSBhcHAuZGF0YS5hbHRlcm5hdGl2ZURlc2lnbkVuYWJsZWQ7IC8vIHNldCB0byBkZWZhdWx0XHJcbiAgICAgICAgYXBwLmRhdGEuYWx0ZXJuYXRpdmVEZXNpZ25FbmFibGVkID0gYWx0ZXJuYXRpdmVEZXNpZ25FbmFibGVkO1xyXG4gICAgICAgICQoJyNzbGlkZXJUb2dnbGVEZXNpZ24nKS5wcm9wKCdjaGVja2VkJywgYXBwLmRhdGEuYWx0ZXJuYXRpdmVEZXNpZ25FbmFibGVkKTtcclxuXHJcbiAgICAgICAgdXRpbHMudHJhY2soJ1NldHRpbmdzJywgJ2xvYWRlZCcsICdhbHRlcm5hdGl2ZURlc2lnbkVuYWJsZWQnLCBhcHAuZGF0YS5hbHRlcm5hdGl2ZURlc2lnbkVuYWJsZWQpO1xyXG5cclxuICAgICAgICBsb2FkTWFpbkNvbG9yKCk7XHJcblxyXG4gICAgICAgIC8vIGl0IG1heSBiZSBudWxsLCB0cnVlLCBmYWxzZVxyXG4gICAgICAgIGlmKHNob3dJbmZvSWNvbnMgPT09IG51bGwpIHNob3dJbmZvSWNvbnMgPSBhcHAuZGF0YS5zaG93SW5mb0ljb25zOyAvLyBzZXQgdG8gZGVmYXVsdFxyXG4gICAgICAgIGFwcC5kYXRhLnNob3dJbmZvSWNvbnMgPSBzaG93SW5mb0ljb25zO1xyXG4gICAgICAgICQoJyNzbGlkZXJUb2dnbGVJbmZvJykucHJvcCgnY2hlY2tlZCcsIGFwcC5kYXRhLnNob3dJbmZvSWNvbnMpO1xyXG5cclxuICAgICAgICAvLyBpdCBtYXkgYmUgbnVsbCwgdHJ1ZSwgZmFsc2VcclxuICAgICAgICBpZihzaG93Q2hlY2tib3hlcyA9PT0gbnVsbCkgc2hvd0NoZWNrYm94ZXMgPSBhcHAuZGF0YS5zaG93Q2hlY2tib3hlczsgLy8gc2V0IHRvIGRlZmF1bHRcclxuICAgICAgICBhcHAuZGF0YS5zaG93Q2hlY2tib3hlcyA9IHNob3dDaGVja2JveGVzO1xyXG4gICAgICAgICQoJyNzbGlkZXJUb2dnbGVDaGVja2JveGVzJykucHJvcCgnY2hlY2tlZCcsIGFwcC5kYXRhLnNob3dDaGVja2JveGVzKTtcclxuXHJcbiAgICAgICAgLy8gaXQgbWF5IGJlIG51bGwsIHRydWUsIGZhbHNlXHJcbiAgICAgICAgaWYoaXNPZmZzZXRDdXN0b20gPT09IG51bGwpIGlzT2Zmc2V0Q3VzdG9tID0gYXBwLmRhdGEuaXNPZmZzZXRDdXN0b207IC8vIHNldCB0byBkZWZhdWx0XHJcbiAgICAgICAgYXBwLmRhdGEuaXNPZmZzZXRDdXN0b20gPSBpc09mZnNldEN1c3RvbTtcclxuICAgICAgICAkKCcjc2xpZGVyVG9nZ2xlT2Zmc2V0JykucHJvcCgnY2hlY2tlZCcsICFpc09mZnNldEN1c3RvbSk7XHJcblxyXG4gICAgICAgIC8vIGl0IG1heSBiZSBudWxsLCB0cnVlLCBmYWxzZVxyXG4gICAgICAgIGlmKHVzZUZyYW5jaGlzZSA9PT0gbnVsbCkgdXNlRnJhbmNoaXNlID0gYXBwLmRhdGEudXNlRnJhbmNoaXNlOyAvLyBzZXQgdG8gZGVmYXVsdFxyXG4gICAgICAgIGFwcC5kYXRhLnVzZUZyYW5jaGlzZSA9IHVzZUZyYW5jaGlzZTtcclxuICAgICAgICAkKCcjc2xpZGVyVG9nZ2xlRnJhbmNoaXNlJykucHJvcCgnY2hlY2tlZCcsIHVzZUZyYW5jaGlzZSk7XHJcblxyXG4gICAgICAgIC8vIHJlc3RvcmUgY3VzdG9tIG9mZnNldCBpZiBhbnkgYW5kIGlmIHZhbGlkXHJcbiAgICAgICAgaWYoaXNPZmZzZXRDdXN0b20pe1xyXG4gICAgICAgICAgICB2YXIgY3VycmVuY3lPZmZzZXRDdXN0b20gPSB1dGlscy5nZXRTYXZlZEl0ZW0oJ2N1cnJlbmN5T2Zmc2V0Q3VzdG9tJyk7XHJcblxyXG4gICAgICAgICAgICBpZihjdXJyZW5jeU9mZnNldEN1c3RvbSAhPSBudWxsICYmIGN1cnJlbmN5T2Zmc2V0Q3VzdG9tICE9IDAgJiYgY3VycmVuY3lPZmZzZXRDdXN0b20gPj0gLTUwICYmIGN1cnJlbmN5T2Zmc2V0Q3VzdG9tIDw9IDUwKXtcclxuICAgICAgICAgICAgICAgIGFwcC5kYXRhLmN1cnJlbmN5T2Zmc2V0ID0gY3VycmVuY3lPZmZzZXRDdXN0b207XHJcbiAgICAgICAgICAgICAgICAkKCcjY3VycmVuY3lPZmZzZXRJbnB1dCcpLnZhbChjdXJyZW5jeU9mZnNldEN1c3RvbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIGFwcC5zYXZlU2V0dGluZ1JlcXVlc3RlZC5hZGQob25TYXZlU2V0dGluZ1JlcXVlc3RlZCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudG9nZ2xlRGVzaWduID0gZnVuY3Rpb24gKCl7XHJcblxyXG4gICAgICAgIGFwcC5kYXRhLmFsdGVybmF0aXZlRGVzaWduRW5hYmxlZCA9ICQoJyNzbGlkZXJUb2dnbGVEZXNpZ24nKS5wcm9wKCdjaGVja2VkJyk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0TWFpbkNvbG9yKGFwcC5kYXRhLm1haW5Db2xvcik7XHJcblxyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhbHRlcm5hdGl2ZURlc2lnbkVuYWJsZWQnLCAgYXBwLmRhdGEuYWx0ZXJuYXRpdmVEZXNpZ25FbmFibGVkKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gdG9kbzogaXMgJ2ltcG9ydGFudCcgbmVjZXNzYXJ5P1xyXG4gICAgdGhpcy5zZXRNYWluQ29sb3IgPSBmdW5jdGlvbihjb2xvcil7XHJcblxyXG4gICAgICAgIGxvZygnU2V0dGluZ3MgLSBzZXRNYWluQ29sb3IoKSBjb2xvcjonLCBjb2xvcilcclxuXHJcbiAgICAgICAgJChkb2N1bWVudC5ib2R5KS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBjb2xvciwgJ2ltcG9ydGFudCcpO1xyXG4gICAgICAgICQoJyNhcHAnKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBjb2xvciwgJ2ltcG9ydGFudCcpO1xyXG4gICAgICAgICQoJyNzZXR0aW5ncyAuc2V0dGluZ3MtaGVhZGVyJykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgY29sb3IsICdpbXBvcnRhbnQnKTtcclxuICAgICAgICAkKCcjaW5mb01vZGFsIC5tb2RhbC1oZWFkZXInKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBjb2xvciwgJ2ltcG9ydGFudCcpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIGRvbnQgY2hhbmdlIHdoZW4gb24gdGhlIHdlbGNvbWUgc2NyZWVuXHJcbiAgICAgICAgaWYoYXBwLmRhdGEuaGFzQWNjZXB0ZWRUZXJtcyl7XHJcbiAgICAgICAgICAgICQoJyN0ZXJtc01vZGFsIC5tb2RhbC1oZWFkZXInKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBjb2xvciwgJ2ltcG9ydGFudCcpO1xyXG4gICAgICAgICAgICAkKCcjdGVybXMtb2stYnRuJykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgY29sb3IsICdpbXBvcnRhbnQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gJCgnI2NvbnRhY3QtbGluaycpLmNzcygnY29sb3InLCBjb2xvciwgJ2ltcG9ydGFudCcpOyAgICAgICAgXHJcbiAgICAgICAgJCgnLmNoZWNrYm94LWNoZWNrJykuY3NzKCdjb2xvcicsIGNvbG9yLCAnaW1wb3J0YW50Jyk7XHJcbiAgICAgICAgLy8gJCgnI3ByaWNlLWNvbXByYS1pbnB1dCcpLmNzcygnY29sb3InLCBjb2xvciwgJ2ltcG9ydGFudCcpO1xyXG4gICAgICAgIC8vICQoJyNjb21wcmEtc3R1ZmYgLmZvcm0tY29udHJvbCcpLmNzcygnY29sb3InLCBjb2xvciwgJ2ltcG9ydGFudCcpO1xyXG4gICAgICAgIC8vICQoJy5hcnJvdyAuZmEtY2FyZXQtZG93bicpLmNzcygnY29sb3InLCBjb2xvciwgJ2ltcG9ydGFudCcpO1xyXG4gICAgICAgICQoJyNzZXR0aW5ncyAucGFuZWwtbGVmdCcpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsIGNvbG9yLCAnaW1wb3J0YW50Jyk7XHJcblxyXG5cclxuICAgICAgICBpZihhcHAuZGF0YS5hbHRlcm5hdGl2ZURlc2lnbkVuYWJsZWQpe1xyXG4gICAgICAgICAgICAkKCcjc2VjdGlvbi1wdXJjaGFzZScpLmNzcygnYmFja2dyb3VuZC1jb2xvcicsIGNvbG9yKTtcclxuICAgICAgICAgICAgJCgnI3NlY3Rpb24tZXhwZW5zZXMnKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBjb2xvcik7XHJcbiAgICAgICAgICAgICQoJyNzZWN0aW9uLXRvdGFsJykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgJ3doaXRlJyk7XHJcbiAgICAgICAgICAgICQoJyNzZWN0aW9uLXRvdGFsJykuY3NzKCdjb2xvcicsIGNvbG9yKTtcclxuXHJcbiAgICAgICAgICAgICQoJyNhcHAtbGlua3MgYnV0dG9uJykuY3NzKCdjb2xvcicsIGNvbG9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgJCgnI3NlY3Rpb24tcHVyY2hhc2UnKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCB1dGlscy5jaGFuZ2VDb2xvckx1bWluYW5jZShjb2xvciwgLWFwcC5jb25maWcuY29sb3JMdW1pbmFuY2VDaGFuZ2UpKTtcclxuICAgICAgICAgICAgJCgnI3NlY3Rpb24tZXhwZW5zZXMnKS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBjb2xvcik7XHJcbiAgICAgICAgICAgICQoJyNzZWN0aW9uLXRvdGFsJykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgdXRpbHMuY2hhbmdlQ29sb3JMdW1pbmFuY2UoY29sb3IsIGFwcC5jb25maWcuY29sb3JMdW1pbmFuY2VDaGFuZ2UpKTtcclxuXHJcbiAgICAgICAgICAgICQoJyNzZWN0aW9uLXRvdGFsJykuY3NzKCdjb2xvcicsICd3aGl0ZScpO1xyXG4gICAgICAgICAgICAkKCcjYXBwLWxpbmtzIGJ1dHRvbicpLmNzcygnY29sb3InLCAnd2hpdGUnKTsgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdtYWluQ29sb3InLCBjb2xvcik7XHJcblxyXG4gICAgICAgIGFwcC5kYXRhLm1haW5Db2xvciA9IGNvbG9yO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgdGhpcy5vbkN1cnJlbmN5TW9kaWZpZWQgPSBmdW5jdGlvbihldmVudCwgaWQpe1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciB2YWwgPSBldmVudC50YXJnZXQudmFsdWU7XHJcblxyXG4gICAgICAgIGlmKGlzTmFOKHZhbCkpe1xyXG4gICAgICAgICAgICAkKGV2ZW50LnRhcmdldCkuYWRkQ2xhc3MoJ2lucHV0LWVycm9yJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhbCA9IE51bWJlcih2YWwpO1xyXG5cclxuICAgICAgICBpZih2YWwgPD0gMCl7XHJcbiAgICAgICAgICAgICQoZXZlbnQudGFyZ2V0KS5hZGRDbGFzcygnaW5wdXQtZXJyb3InKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgJChldmVudC50YXJnZXQpLnJlbW92ZUNsYXNzKCdpbnB1dC1lcnJvcicpO1xyXG5cclxuICAgICAgICAgICAgYXBwLmN1cnJlbmN5TW9kaWZpZWQuZGlzcGF0Y2goe2lkOmlkLCB2YWx1ZTp2YWx9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGFwcC5zZXR0aW5nc0NoYW5nZWQuZGlzcGF0Y2goKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMub25DdXJyZW5jeU9mZnNldE1vZGlmaWVkID0gZnVuY3Rpb24oZXZlbnQpe1xyXG5cclxuICAgICAgICB2YXIgdmFsID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xyXG5cclxuICAgICAgICBpZihpc05hTih2YWwpKXtcclxuICAgICAgICAgICAgJChldmVudC50YXJnZXQpLmFkZENsYXNzKCdpbnB1dC1lcnJvcicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFsID0gTnVtYmVyKHZhbCk7XHJcblxyXG4gICAgICAgIGlmKHZhbCA8IC01MCB8fCB2YWwgPiA1MCl7XHJcbiAgICAgICAgICAgICQoZXZlbnQudGFyZ2V0KS5hZGRDbGFzcygnaW5wdXQtZXJyb3InKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgJChldmVudC50YXJnZXQpLnJlbW92ZUNsYXNzKCdpbnB1dC1lcnJvcicpO1xyXG5cclxuICAgICAgICAgICAgYXBwLmRhdGEuY3VycmVuY3lPZmZzZXQgPSB2YWw7XHJcblxyXG4gICAgICAgICAgICBhcHAuY3VycmVuY3lPZmZzZXRNb2RpZmllZC5kaXNwYXRjaCh2YWwpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYXBwLnNldHRpbmdzQ2hhbmdlZC5kaXNwYXRjaCgpO1xyXG5cclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2N1cnJlbmN5T2Zmc2V0Q3VzdG9tJywgdmFsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy50b2dnbGVDdXJyZW5jeU9mZnNldCA9IGZ1bmN0aW9uICgpe1xyXG5cclxuICAgICAgICBhcHAuZGF0YS5pc09mZnNldEN1c3RvbSA9ICEkKCcjc2xpZGVyVG9nZ2xlT2Zmc2V0JykucHJvcCgnY2hlY2tlZCcpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmKGFwcC5kYXRhLmlzT2Zmc2V0Q3VzdG9tKXtcclxuXHJcbiAgICAgICAgICAgIGFwcC5kYXRhLmN1cnJlbmN5T2Zmc2V0ID0gMDtcclxuICAgICAgICAgICAgJCgnI2N1cnJlbmN5T2Zmc2V0SW5wdXQnKS52YWwoYXBwLmRhdGEuY3VycmVuY3lPZmZzZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICBhcHAuZGF0YS5jdXJyZW5jeU9mZnNldCA9IGFwcC5jb25maWcuY3VycmVuY3lPZmZzZXQ7ICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhcHAuY3VycmVuY3lPZmZzZXRUb2dnbGVkLmRpc3BhdGNoKCk7XHJcblxyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdpc09mZnNldEN1c3RvbScsIGFwcC5kYXRhLmlzT2Zmc2V0Q3VzdG9tKVxyXG5cclxuICAgICAgICBhcHAuc2V0dGluZ3NDaGFuZ2VkLmRpc3BhdGNoKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMudG9nZ2xlQ3VzdG9tQ3VycmVuY3kgPSBmdW5jdGlvbihpZCl7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIHNpZ25hbERhdGEgPSB7aWQ6aWQsIHZhbHVlOmZhbHNlfTtcclxuXHJcbiAgICAgICAgLy8gaWYgJ2NoZWNrZWQnIGlzIHRydWUsICd2YWx1ZScgaXMgZmFsc2UgKGl0IGFmZmVjdHMgJ3VzZXNDdXN0b21WYWx1ZScpXHJcbiAgICAgICAgaWYoISQoJyNzbGlkZXJUb2dnbGUnICsgaWQpLnByb3AoJ2NoZWNrZWQnKSl7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIHNpZ25hbERhdGEudmFsdWUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYXBwLmN1cnJlbmN5U2xpZGVyVG9nZ2xlZC5kaXNwYXRjaChzaWduYWxEYXRhKTtcclxuXHJcbiAgICAgICAgYXBwLnNldHRpbmdzQ2hhbmdlZC5kaXNwYXRjaCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnRvZ2dsZUluZm9JY29ucyA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgIGFwcC5kYXRhLnNob3dJbmZvSWNvbnMgPSAkKCcjc2xpZGVyVG9nZ2xlSW5mbycpLnByb3AoJ2NoZWNrZWQnKTtcclxuICAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Nob3dJbmZvSWNvbnMnLCBhcHAuZGF0YS5zaG93SW5mb0ljb25zKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy50b2dnbGVDaGVja2JveGVzID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgYXBwLmRhdGEuc2hvd0NoZWNrYm94ZXMgPSAkKCcjc2xpZGVyVG9nZ2xlQ2hlY2tib3hlcycpLnByb3AoJ2NoZWNrZWQnKTsgICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc2hvd0NoZWNrYm94ZXMnLCBhcHAuZGF0YS5zaG93Q2hlY2tib3hlcyk7XHJcbiAgICB9O1xyXG4gICAgXHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGxvYWRNYWluQ29sb3IoKXtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgbWFpbkNvbG9yID0gdXRpbHMuZ2V0U2F2ZWRJdGVtKCdtYWluQ29sb3InKTtcclxuXHJcbiAgICAgICAgaWYobWFpbkNvbG9yICE9PSBudWxsKXtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHNlbGYuc2V0TWFpbkNvbG9yKG1haW5Db2xvcik7XHJcblxyXG4gICAgICAgICAgICB1dGlscy50cmFjaygnU2V0dGluZ3MnLCAnbG9hZGVkJywgJ21haW5Db2xvcicsIG1haW5Db2xvcik7ICAgICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgc2VsZi5zZXRNYWluQ29sb3IoYXBwLmNvbmZpZy5tYWluQ29sb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBvblNhdmVTZXR0aW5nUmVxdWVzdGVkKHNldHRpbmcpe1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHNldHRpbmcubmFtZSwgc2V0dGluZy52YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdCgpO1xyXG59IiwiLypcclxuTUlUIExpY2Vuc2VcclxuXHJcbkNvcHlyaWdodCAoYykgMjAxNyBJdm8gQ2Fzc1xyXG5cclxuUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxyXG5vZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXHJcbmluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcclxudG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxyXG5jb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcclxuZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcclxuXHJcblRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluIGFsbFxyXG5jb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxyXG5JTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcclxuRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXHJcbkFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcclxuTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcclxuT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEVcclxuU09GVFdBUkUuXHJcbiovXHJcblxyXG4vL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXHJcblxyXG4vKipcclxuKiBhdXRob3I6IGl2b2Nhc3NcclxuKiBkYXRlIGNyZWF0ZWQ6IDIwMTFcclxuKiBkYXRlIG1vZGlmaWVkOiAyMDE3MDgxMFxyXG4qIGRlc2NyaXB0aW9uOiBsaWdodHdlaWdodCBhbmQgYXdlc29tZSBzaWduYWwuIHBvcnRlZCBmcm9tIEFTMy5cclxuKiB2ZXJzaW9uOiAwLjEzXHJcbiogXHJcbiovXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFNpZ25hbCgpe1xyXG5cdFxyXG5cdHZhciBsaXN0ZW5lcnMgPSBbXTtcclxuXHR2YXIgYW1vdW50ID0gMDtcclxuXHRcclxuXHR2YXIgc3RlcHBpbmcgPSBmYWxzZTtcclxuXHRcclxuXHR2YXIgaGFzQ29sZExpc3RlbmVycyA9IGZhbHNlO1xyXG5cdFxyXG5cdHRoaXMuZGVzdHJveSA9IGZ1bmN0aW9uKCl7XHJcblxyXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspIFxyXG5cdFx0e1xyXG5cdFx0XHRsaXN0ZW5lcnNbaV0uY2FsbGJhY2tGdW5jdGlvbiA9IG51bGw7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGxpc3RlbmVycyA9IG51bGw7XHJcblx0XHRhbW91bnQgPSAwO1xyXG5cdH1cclxuXHRcclxuXHR0aGlzLnJlc2V0ID0gZnVuY3Rpb24oKXtcclxuXHJcblx0XHR0aGlzLmRlc3Ryb3koKTtcclxuXHRcdFxyXG5cdFx0bGlzdGVuZXJzID0gW107XHJcblx0XHRcclxuXHRcdHN0ZXBwaW5nID0gZmFsc2U7XHJcblx0XHRoYXNDb2xkTGlzdGVuZXJzID0gZmFsc2U7XHJcblx0fVxyXG5cdFxyXG5cdFxyXG5cdFxyXG5cdHRoaXMuYWRkID0gZnVuY3Rpb24oY2FsbGJhY2ssIHJlbW92ZU9uRmlyc3RDYWxsYmFjayA9IGZhbHNlKVxyXG5cdHtcclxuXHRcdGlmIChnZXRMaXN0ZW5lckluZGV4KGNhbGxiYWNrKSA+IC0xKVxyXG5cdFx0e1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJBdHRlbXB0IHRvIGFkZCBhIGNhbGxiYWNrIHR3aWNlLlwiKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0dmFyIGxpc3RlbmVyID0gbmV3IFNpZ25hbExpc3RlbmVyKGNhbGxiYWNrKTtcclxuXHRcdGxpc3RlbmVyLnJlbW92ZU9uRmlyc3RDYWxsYmFjayA9IHJlbW92ZU9uRmlyc3RDYWxsYmFjaztcclxuXHRcdFxyXG5cdFx0bGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xyXG5cdFx0YW1vdW50Kys7XHJcblx0fVxyXG5cdFxyXG5cdFxyXG5cdHRoaXMucmVtID0gZnVuY3Rpb24oY2FsbGJhY2ssIHNhZmVSZW1vdmUgPSBmYWxzZSl7XHJcblxyXG5cdFx0dmFyIGluZGV4ID0gZ2V0TGlzdGVuZXJJbmRleChjYWxsYmFjayk7XHJcblx0XHRcclxuXHRcdGlmIChpbmRleCA9PSAtMSlcclxuXHRcdHtcclxuXHRcdFx0aWYgKHNhZmVSZW1vdmUpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiQXR0ZW1wdCB0byByZW1vdmUgYW4gdW5yZWdpc3RlcmVkIGNhbGxiYWNrLlwiKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAoc3RlcHBpbmcpXHJcblx0XHR7XHJcblx0XHRcdGxpc3RlbmVyc1tpbmRleF0uaXNDb2xkID0gdHJ1ZTtcclxuXHRcdFx0bGlzdGVuZXJzW2luZGV4XS5jYWxsYmFja0Z1bmN0aW9uID0gbnVsbDtcclxuXHRcdFx0XHJcblx0XHRcdGhhc0NvbGRMaXN0ZW5lcnMgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZVxyXG5cdFx0e1xyXG5cdFx0XHRsaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcclxuXHRcdFx0YW1vdW50LS07XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdHZhciBnZXRMaXN0ZW5lckluZGV4ID0gIGZ1bmN0aW9uKGNhbGxiYWNrKXtcclxuXHJcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFtb3VudDsgaSsrKSBcclxuXHRcdHtcclxuXHRcdFx0aWYgKGxpc3RlbmVyc1tpXS5jYWxsYmFja0Z1bmN0aW9uID09IGNhbGxiYWNrKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIGk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIC0xO1xyXG5cdH1cclxuXHRcclxuXHR0aGlzLmRpc3BhdGNoID0gZnVuY3Rpb24ocGFyYW0gPSBudWxsKXtcclxuXHRcdFxyXG5cdFx0aWYgKHN0ZXBwaW5nKVxyXG5cdFx0e1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJBdHRlbXB0IHRvIGRpc3BhdGNoIGEgc2lnbmFsIHdoaWxlIHN0ZXBwaW5nLlwiKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0c3RlcHBpbmcgPSB0cnVlO1xyXG5cdFx0XHJcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGFtb3VudDsgaSsrKSBcclxuXHRcdHtcclxuXHRcdFx0dmFyIGxpc3RlbmVyID0gbGlzdGVuZXJzW2ldO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKGxpc3RlbmVyLmlzQ29sZCkgY29udGludWU7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAobGlzdGVuZXIucGFyYW1zUmVxdWlyZWQgPT0gMClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGxpc3RlbmVyLmNhbGxiYWNrRnVuY3Rpb24oKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlXHJcblx0XHRcdGlmIChsaXN0ZW5lci5wYXJhbXNSZXF1aXJlZCA9PSAxKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0bGlzdGVuZXIuY2FsbGJhY2tGdW5jdGlvbihwYXJhbSk7XHJcblx0XHRcdFx0XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHRpZiAobGlzdGVuZXIucGFyYW1zUmVxdWlyZWQgPT0gMilcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGxpc3RlbmVyLmNhbGxiYWNrRnVuY3Rpb24odGhpcywgcGFyYW0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRcclxuXHRcdFx0aWYgKGxpc3RlbmVyLnJlbW92ZU9uRmlyc3RDYWxsYmFjaylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGxpc3RlbmVyLmNhbGxiYWNrRnVuY3Rpb24gPSBudWxsO1xyXG5cdFx0XHRcdGxpc3RlbmVyLmlzQ29sZCA9IHRydWU7XHJcblx0XHRcdFx0aGFzQ29sZExpc3RlbmVycyA9IHRydWU7XHJcblx0XHRcdH1cdFx0XHRcdFxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRcclxuXHRcdGlmIChoYXNDb2xkTGlzdGVuZXJzKVxyXG5cdFx0e1xyXG5cdFx0XHRmb3IgKGkgPSBhbW91bnQgLSAxOyBpID4gLTE7IGktLSkgXHJcblx0XHRcdHtcclxuXHRcdFx0XHRpZiAobGlzdGVuZXJzW2ldLmlzQ29sZClcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRsaXN0ZW5lcnMuc3BsaWNlKGksIDEpO1xyXG5cdFx0XHRcdFx0YW1vdW50LS07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRoYXNDb2xkTGlzdGVuZXJzID0gZmFsc2U7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHN0ZXBwaW5nID0gZmFsc2U7XHJcblx0fVxyXG5cdFxyXG59XHJcblxyXG52YXIgU2lnbmFsTGlzdGVuZXIgPSBmdW5jdGlvbihjYWxsYmFja0Z1bmN0aW9uKXtcclxuXHJcblx0dGhpcy5jYWxsYmFja0Z1bmN0aW9uID0gY2FsbGJhY2tGdW5jdGlvbjtcclxuXHJcblx0dGhpcy5yZW1vdmVPbkZpcnN0Q2FsbGJhY2sgPSBmYWxzZTtcclxuXHJcblx0dGhpcy5pc0NvbGQgPSBmYWxzZTtcclxuXHJcblx0dGhpcy5wYXJhbXNSZXF1aXJlZCA9IGNhbGxiYWNrRnVuY3Rpb24ubGVuZ3RoOyAvLyAwOm5vbmUsIDE6cGFyYW0sIDI6c2lnbmFsIGFuZCBwYXJhbVxyXG5cclxufSIsIiAvKlxyXG5NSVQgTGljZW5zZVxyXG5cclxuQ29weXJpZ2h0IChjKSAyMDE3IEl2byBDYXNzXHJcblxyXG5QZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XHJcbm9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcclxuaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xyXG50byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXHJcbmNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xyXG5mdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxyXG5cclxuVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsXHJcbmNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXHJcbklNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxyXG5GSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcclxuQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxyXG5MSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxyXG5PVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRVxyXG5TT0ZUV0FSRS5cclxuKi9cclxuXHJcbmltcG9ydCBhcHAgZnJvbSAnLi9hcHAnO1xyXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi91dGlscyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBUZXJtc01ncigpe1xyXG4gICAgXHJcbiAgICBsb2coJ1Rlcm1zTWdyKCknKTtcclxuXHJcbiAgICBmdW5jdGlvbiBpbml0KCl7XHJcblxyXG4gICAgICAgIHV0aWxzLmxvYWRUZXh0KCdhc3NldHMvdGVybXMudHh0JykudGhlbigodHh0KSA9PiB7XHJcblxyXG4gICAgICAgICAgICBsb2coJ1Rlcm1zTWdyKCkgLSB0eHQgbG9hZGVkJywgdHh0Lmxlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICBhcHAuZGF0YS50ZXJtc0FuZENvbmRpdGlvbnMgPSB0eHQ7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciBoYXNBY2NlcHRlZFRlcm1zID0gdXRpbHMuZ2V0U2F2ZWRJdGVtKCdoYXNBY2NlcHRlZFRlcm1zJyk7XHJcblxyXG4gICAgICAgIGxvZygnVGVybXNNZ3IoKSAtIGhhc0FjY2VwdGVkVGVybXM6JywgaGFzQWNjZXB0ZWRUZXJtcyk7XHJcblxyXG4gICAgICAgIGlmKGhhc0FjY2VwdGVkVGVybXMpe1xyXG4gICAgICAgICAgICBhcHAuZGF0YS5oYXNBY2NlcHRlZFRlcm1zID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5vblRlcm1zQ2hlY2tib3hDbGlja2VkID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgaWYoJCgnI3Rlcm1zQ2hlY2tib3gnKS5wcm9wKCdjaGVja2VkJykpe1xyXG5cclxuICAgICAgICAgICAgJCgnI2J0bldlbGNvbWVDb250aW51ZScpLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAkKCcjYnRuV2VsY29tZUNvbnRpbnVlJykuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLm9uV2VsY29tZUNvbnRpbnVlQ2xpY2tlZCA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgIGlmKCQoJyN0ZXJtc0NoZWNrYm94JykucHJvcCgnY2hlY2tlZCcpKXtcclxuXHJcbiAgICAgICAgICAgICQoJyN3ZWxjb21lJykuYWRkQ2xhc3MoJ2Qtbm9uZScpO1xyXG5cclxuICAgICAgICAgICAgYXBwLmRhdGEuaGFzQWNjZXB0ZWRUZXJtcyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnaGFzQWNjZXB0ZWRUZXJtcycsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAvLyBhbGVydCgnJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgaW5pdCgpO1xyXG59XHJcbiIsIiAvKlxyXG5NSVQgTGljZW5zZVxyXG5cclxuQ29weXJpZ2h0IChjKSAyMDE3IEl2byBDYXNzXHJcblxyXG5QZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XHJcbm9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcclxuaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xyXG50byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXHJcbmNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xyXG5mdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxyXG5cclxuVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsXHJcbmNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXHJcbklNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxyXG5GSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcclxuQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxyXG5MSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxyXG5PVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRVxyXG5TT0ZUV0FSRS5cclxuKi9cclxuXHJcblxyXG52YXIgVXRpbHMgPSBmdW5jdGlvbigpe1xyXG5cclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHRoaXMudHJhY2tpbmdFbmFibGVkID0gZmFsc2U7XHJcbiAgICBcclxuICAgIHRoaXMuaXNCcm93c2VyID0gZnVuY3Rpb24obmFtZSl7XHJcblxyXG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YobmFtZSkgPiAtMTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5hc3NlcnRFcXVhbHMgPSBmdW5jdGlvbihuYW1lLCBjdXJyZW50VmFsLCBleHBlY3RlZFZhbCl7XHJcblxyXG4gICAgICAgIHZhciBpc1N1Y2Nlc3NmdWwgPSBjdXJyZW50VmFsID09PSBleHBlY3RlZFZhbCA/IHRydWUgOiBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYoaXNTdWNjZXNzZnVsKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2Fzc2VydEVxdWFscygpJywgJ1NVQ0NFU1MnLCBuYW1lLCBjdXJyZW50VmFsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2Fzc2VydEVxdWFscygpJywgJ0VSUk9SJywgbmFtZSwgJ2N1cnJlbnQvZXhwZWN0ZWQ6JywgY3VycmVudFZhbCwgJy8nLCBleHBlY3RlZFZhbCk7XHJcbiAgICAgICAgfSAgICAgICAgXHJcblxyXG4gICAgICAgIGlmKCFpc1N1Y2Nlc3NmdWwpe1xyXG4gICAgICAgICAgIGNvbnNvbGUubG9nKCdFUlJPUiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0nKTtcclxuICAgICAgICAgICBjb25zb2xlLmxvZygnfCAgICAgICAgICAgIExBU1QgVEVTVCBGQUlMRUQgPSgnKTtcclxuICAgICAgICAgICBjb25zb2xlLmxvZygnRVJST1IgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmdldFNhdmVkSXRlbSA9IGZ1bmN0aW9uKG5hbWUpe1xyXG5cclxuICAgICAgICBsb2coJ1V0aWxzIC0gZ2V0U2F2ZWRJdGVtKCknLCBuYW1lKTtcclxuXHJcbiAgICAgICAgdmFyIGl0ZW0gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShuYW1lKTtcclxuXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3V0aWxzLmdldFNhdmVkSXRlbSgpIC0gbmFtZTonLCBuYW1lLCAnIC0gaXRlbTonLCBpdGVtKTtcclxuXHJcbiAgICAgICAgaWYoaXRlbSAhPT0gbnVsbCAmJiBpdGVtICE9PSB1bmRlZmluZWQgJiYgaXRlbSAhPT0gJ3VuZGVmaW5lZCcpe1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgc3dpdGNoKHRydWUpe1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjYXNlIGl0ZW0gPT09ICdmYWxzZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjYXNlIGl0ZW0gPT09ICd0cnVlJzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY2FzZSAhaXNOYU4oaXRlbSk6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE51bWJlcihpdGVtKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIHR5cGVvZiBpdGVtID09ICdzdHJpbmcnOlxyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZShpdGVtKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGEgIT0gbnVsbCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXRjaChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy50cmFjayA9IGZ1bmN0aW9uIChjYXRlZ29yeSwgYWN0aW9uID0gJycsIGxhYmVsID0gJycsIHZhbHVlID0gJycpe1xyXG5cclxuICAgICAgICBpZighc2VsZi50cmFja2luZ0VuYWJsZWQpIHJldHVybjtcclxuXHJcbiAgICAgICAgZ2EoJ3NlbmQnLCB7XHJcbiAgICAgICAgICAgIGhpdFR5cGU6ICdldmVudCcsXHJcbiAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6IGNhdGVnb3J5LFxyXG4gICAgICAgICAgICBldmVudEFjdGlvbjogYWN0aW9uLFxyXG4gICAgICAgICAgICBldmVudExhYmVsOiBsYWJlbCxcclxuICAgICAgICAgICAgZXZlbnRWYWx1ZTogdmFsdWVcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5mb3JtYXRDdXJyZW5jeSA9IGZ1bmN0aW9uKHZhbCl7XHJcblxyXG4gICAgICAgIHZhbCA9IHBhcnNlRmxvYXQodmFsKS50b0ZpeGVkKDIpO1xyXG5cclxuICAgICAgICBpZihOdW1iZXIuaXNJbnRlZ2VyKE51bWJlcih2YWwpKSl7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdCh2YWwpLnRvRml4ZWQoMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gTnVtYmVyKHZhbCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRoaXMubG9hZFRleHQgPSBmdW5jdGlvbiAodXJsKXtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh4aHIub3ZlcnJpZGVNaW1lVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgeGhyLm92ZXJyaWRlTWltZVR5cGUoJ3RleHQvcGxhaW47IGNoYXJzZXQ9SVNPLTg4NTktMScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB4aHIub3BlbignR0VUJywgdXJsLCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPj0gMjAwICYmIHRoaXMuc3RhdHVzIDwgMzAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh4aHIucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3Qoe1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogdGhpcy5zdGF0dXMsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dDogeGhyLnN0YXR1c1RleHRcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KHtcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHRoaXMuc3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6IHhoci5zdGF0dXNUZXh0XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHhoci5zZW5kKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV0dXJucyBhbiBYTUwgRE9NIGRvY3VtZW50XHJcbiAgICB0aGlzLnN0cmluZ1RvWE1MID0gZnVuY3Rpb24odGV4dCl7XHJcblxyXG4gICAgICAgIGlmKHRleHQpe1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyh0ZXh0LCBcInRleHQveG1sXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gbHVtIHNob3VsZCByZXByZXNlbnQgYSBwZXJjZW50YWdlIChlLmcuIGZvciA1JSwgcHJvdmlkZSAwLjA1LiBuZWdhdGl2ZSB2YWx1ZXMgdG8gZGFya2VuKVxyXG4gICAgdGhpcy5jaGFuZ2VDb2xvckx1bWluYW5jZSA9IGZ1bmN0aW9uKGhleCwgbHVtKSB7XHJcblxyXG4gICAgICAgIC8vIFZhbGlkYXRlIGhleCBzdHJpbmdcclxuICAgICAgICBoZXggPSBTdHJpbmcoaGV4KS5yZXBsYWNlKC9bXjAtOWEtZl0vZ2ksIFwiXCIpO1xyXG4gICAgICAgIGlmIChoZXgubGVuZ3RoIDwgNikge1xyXG4gICAgICAgIGhleCA9IGhleC5yZXBsYWNlKC8oLikvZywgJyQxJDEnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbHVtID0gbHVtIHx8IDA7XHJcblxyXG4gICAgICAgIC8vIENvbnZlcnQgdG8gZGVjaW1hbCBhbmQgY2hhbmdlIGx1bWlub3NpdHlcclxuICAgICAgICB2YXIgcmdiID0gXCIjXCIsXHJcbiAgICAgICAgYztcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7ICsraSkge1xyXG4gICAgICAgICAgICBjID0gcGFyc2VJbnQoaGV4LnN1YnN0cihpICogMiwgMiksIDE2KTtcclxuICAgICAgICAgICAgYyA9IE1hdGgucm91bmQoTWF0aC5taW4oTWF0aC5tYXgoMCwgYyArIChjICogbHVtKSksIDI1NSkpLnRvU3RyaW5nKDE2KTtcclxuICAgICAgICAgICAgcmdiICs9IChcIjAwXCIgKyBjKS5zdWJzdHIoYy5sZW5ndGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJnYjtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgbmV3IFV0aWxzKCk7XHJcblxyXG4iXX0="}